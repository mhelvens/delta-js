(function e(t,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r();else if(typeof define==="function"&&define.amd)define(r);else if(typeof exports==="object")exports["DeltaJs"]=r();else t["DeltaJs"]=r()})(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:false};e[n].call(a.exports,a,a.exports,r);a.loaded=true;return a.exports}r.m=e;r.c=t;r.p="";return r(0)}([function(e,t,r){r(1);e.exports=r(2)},function(e,t,r){e.exports=r(3)},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=r(4).extend;var i=n(r(5));var o=r(6);var u=o.ReadableTarget;var s=o.WritableTarget;a(i,{ReadableTarget:u,WritableTarget:s});var f=n(r(7));a(i,{Path:f});var l=r(8);var c=l.ApplicationError;var v=l.PreconditionFailure;var h=l.MultipleOverloadsApplicationError;var p=l.NoOverloadsApplicationError;var d=l.CompositionError;var y=l.MultipleOverloadsCompositionError;var g=l.ConstraintFailure;var m=l.ApplicationOrderCycle;var w=l.UnresolvedDeltaConflict;var b=l.MultipleActiveProxiesError;a(i,{ApplicationError:c,PreconditionFailure:v,MultipleOverloadsApplicationError:h,NoOverloadsApplicationError:p,CompositionError:d,MultipleOverloadsCompositionError:y,ConstraintFailure:g,ApplicationOrderCycle:m,UnresolvedDeltaConflict:w,MultipleActiveProxiesError:b});e.exports=i},function(e,t,r){(function(e){"use strict";if(e._babelPolyfill){throw new Error("only one instance of babel/polyfill is allowed")}e._babelPolyfill=true;r(20);r(21)}).call(t,function(){return this}())},function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];for(var n=e[Symbol.iterator](),a;!(a=n.next()).done;){r.push(a.value);if(t&&r.length===t)break}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var a=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};t.extend=i;t.o=u;t.a=s;t.m=f;t.s=l;t.assert=c;t.isUndefined=v;t.isDefined=h;t.repeat=p;t.indent=d;t.oncePer=g;t.mapEqual=b;t.customIndexOf=x;t.arraysEqual=P;t.arraysHaveSameElements=_;t.swapLastTwo=E;Object.defineProperty(t,"__esModule",{value:true});function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}var a=true;var i=false;var o=undefined;try{for(var u=r[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var f=s.value;var l=true;var c=false;var v=undefined;try{for(var h=Object.keys(f)[Symbol.iterator](),p;!(l=(p=h.next()).done);l=true){var d=p.value;Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(f,d))}}catch(y){c=true;v=y}finally{try{if(!l&&h["return"]){h["return"]()}}finally{if(c){throw v}}}}}catch(y){i=true;o=y}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}return e}var o=function(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}var o=n.slice(0,-1);var u=n[n.length-1];if(o.length===0){return t}var s=e.apply(undefined,[t].concat(a(o.slice(0,-1))));if(s instanceof Map){if(v(s.get(o[o.length-1]))){s.set(o[o.length-1],u)}return s.get(o[o.length-1])}else{if(v(s[o[o.length-1]])){s[o[o.length-1]]=u}return s[o[o.length-1]]}}};function u(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}return o(u).apply(undefined,[e].concat(r,[{}]))}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}return o(u).apply(undefined,[e].concat(r,[[]]))}function f(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}return o(f).apply(undefined,[e].concat(r,[new Map]))}function l(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}return o(f).apply(undefined,[e].concat(r,[new Set]))}function c(e,t){if(!e){throw new Error(t||"Assertion failed")}}function v(e){return typeof e==="undefined"}function h(e){return typeof e!=="undefined"}function p(e,t){return new Array(e+1).join(t)}function d(e,t){var r=arguments[2]===undefined?" ":arguments[2];return e.replace(/^(?!\s*$)/gm,p(t,r))}var y={};function g(e,t,r){var a=function(e){if(!y[t]){y[t]=Symbol("once per:"+t)}if(e[y[t]]){return}e[y[t]]=true;return r.call(e,e)};if(typeof e==="string"){var i=[e,t];var o=n(i,2);t=o[0];r=o[1];return a}else{return a(e)}}var m=function(e,t){return function(r,n){return r.type===e&&n.type===t}};t.t=m;var w=function(e){return function(t,r){if(typeof r==="string"){r=function(e){return function(t){return t[e]}}(r)}return function(n,a){return new e.Delta[t](r&&r({d1:n,d2:a,p1:n.arg,p2:a.arg}))}}};t.define_d=w;function b(e,t){var r=arguments[2]===undefined?function(e,t){return e===t}:arguments[2];if(e.size!==t.size){return false}var n=[].concat(a(e.keys())).sort();var i=[].concat(a(t.keys())).sort();for(var o=0;o<n.length;++o){if(n[o]!==i[o]){return false}if(!r(e.get(n[o]),t.get(i[o]))){return false}}return true}function x(e,t){var r=arguments[2]===undefined?function(e,t){return e===t}:arguments[2];for(var n=0;n<e.length;++n){if(r(e[n],t)){return n}}return-1}function P(e,t){var r=arguments[2]===undefined?function(e,t){return e===t}:arguments[2];if(e.length!==t.length){return false}for(var n=0;n<e.length;++n){if(!r(e[n],t[n])){return false}}return true}function _(e,t){var r=arguments[2]===undefined?function(e,t){return e===t}:arguments[2];if(e.length!==t.length){return false}var n=[].concat(a(t));for(var i=0;i<e.length;++i){var o=false;for(var u=0;u<n.length;++u){if(r(e[i],n[u])){n.splice(u,1);o=true;break}}if(!o){return false}}return true}function E(e){return e.slice(0,-2).concat([e[e.length-1],e[e.length-2]])}},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e,t){var r=Object.create(e.prototype);var n=e.apply(r,t);return n!=null&&(typeof n=="object"||typeof n=="function")?n:r};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var u=n(r(22));var s=r(4);var f=s.extend;var l=s.assert;var c=s.isUndefined;var v=s.isDefined;var h=s.arraysEqual;var p=n(r(7));var d=r(6);var y=d.ReadableTarget;var g=d.WritableTarget;var m=d.rt;var w=d.wt;var b=n(r(9));var x=n(r(10));var P=n(r(11));var _=n(r(12));var E=n(r(13));var O=n(r(14));var C=n(r(15));var A=n(r(16));var k=n(r(17));var S=n(r(18));var D=n(r(19));var T=function(){function e(){o(this,e);D(this);b(this);x(this);P(this);_(this);E(this);O(this);C(this);A(this);k(this);S(this)}i(e,{newOperationType:{value:function t(r,n){var i=arguments[2]===undefined?null:arguments[2];l(r[0]===r[0].toUpperCase(),"Delta operation classes must have a name starting with a capital letter - '"+r+"' does not.");l(c(this.Delta[r]),"The '"+r+"' operation type already exists.");this.Delta[r]=n;n.Proxy=i;var o=n.prototype.applyTo||function(){};f(n.prototype,{applyTo:function m(t){var r=arguments[1]===undefined?{}:arguments[1];if(!this.selected){return}if(!(t instanceof e.ReadableTarget)){t=new e.ReadableTarget(t)}if(c(r.weak)){r.weak=false}var n=this.evaluatePrecondition(t,r);if(n!==true){throw n}o.call(this,t,r)},type:r});var u=r[0].toLowerCase()+r.slice(1);var s=true;var v=false;var h=undefined;try{for(var p=(n.prototype.methods||[u])[Symbol.iterator](),d;!(s=(d=p.next()).done);s=true){var y=d.value;this.ContainerProxy.newProxyMethod(y,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}return a(n,t)})}}catch(g){v=true;h=g}finally{try{if(!s&&p["return"]){p["return"]()}}finally{if(v){throw h}}}return n}},newProxyMethod:{value:function r(e,t){this.ContainerProxy.newProxyMethod(e,t)}}});return e}();e.exports=T},function(e,t,r){"use strict";var n=function c(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return c(a,t,r)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var a=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};t.wt=f;t.rt=l;Object.defineProperty(t,"__esModule",{value:true});var u=t.ReadableTarget=function(){function e(t){o(this,e);this._val=t}i(e,{getValue:{value:function t(){return this._val}},value:{get:function(){return this.getValue()},set:function(e){this.setValue(e)}}});return e}();var s=t.WritableTarget=function(e){function t(e,r){o(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._obj=e;this._prop=r}a(t,e);i(t,{getValue:{value:function r(){return this._obj[this._prop]}},setValue:{value:function u(e){this._obj[this._prop]=e}},"delete":{value:function s(){delete this._obj[this._prop]}}});return t}(u);function f(e,t){return new s(e,t)}function l(e,t){return new u(e,t)}},function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];for(var n=e[Symbol.iterator](),a;!(a=n.next()).done;){r.push(a.value);if(t&&r.length===t)break}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var a=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var o=r(4);var u=o.assert;var s=o.isDefined;var f=function(){function e(){var t=arguments[0]===undefined?"":arguments[0];i(this,e);var r=t.match(/^([.#]?)(\w*|\(\w+\))(.*)$/);u(r,"The path string '"+t+"' is not well formed.");var a=n(r,4);var o=a[1];var s=a[2];var f=a[3];if(o==="#"){this.set(new e(".(instance)."+s+""+f))}else if(s!==""){this._prop=s;if(f!==""){this._rest=new e(f)}}}a(e,{set:{value:function t(e){this._prop=e._prop;this._rest=e._rest}},prop:{get:function(){return this._prop}},rest:{get:function(){return this._rest}},toString:{value:function r(){var e="";if(s(this.prop)){e+=this.prop;if(s(this.rest)){e+="."+this.rest.toString()}}return e}}});return e}();e.exports=f},function(e,t,r){"use strict";var n=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var a=function g(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return g(a,t,r)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var i=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};Object.defineProperty(t,"__esModule",{value:true});var u=t.ApplicationError=function(e){function t(){o(this,t);if(e!=null){e.apply(this,arguments)}}i(t,e);return t}(Error);var s=t.PreconditionFailure=function(e){function t(e,r){o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="PreconditionFailure";this.message="This delta of type '"+e.type+"' cannot apply to this value of type '"+typeof r+"'.";this.delta=e;this.value=r}i(t,e);return t}(u);var f=t.MultipleOverloadsApplicationError=function(e){function t(e,r){var n=arguments[2]===undefined?[]:arguments[2];o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r);this.name="MultipleOverloadsApplicationError";this.message="None of the delta-types "+e.overloads.map(function(e){return"'"+e.type+"'"}).join(",")+" can apply to this value of type '"+typeof r+"'."+n.map(function(e){return"\n-- "+e.message}).join("");this.errors=n}i(t,e);return t}(s);var l=t.NoOverloadsApplicationError=function(e){function t(e,r){o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r);this.name="NoOverloadsApplicationError";this.message="This delta of type '"+e.type+"' has no specific deltas assigned to it, so it cannot apply to this value of type '"+typeof r+"."}i(t,e);return t}(s);var c=t.CompositionError=function(e){function t(e,r){o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="CompositionError";this.message="This delta of type '"+e.type+"' cannot be composed with this other delta of type '"+r.type+"'.";this.delta1=e;this.delta2=r}i(t,e);return t}(Error);var v=t.MultipleOverloadsCompositionError=function(e){function t(e,r){var n=arguments[2]===undefined?[]:arguments[2];o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r);this.name="MultipleOverloadsCompositionError";this.message="There are no overloads to compose this delta of type '"+e.type+"' with this other delta of type '"+r.type+"'."+n.map(function(e){return"\n-- "+e.message}).join("");this.errors=n}i(t,e);return t}(c);var h=t.ConstraintFailure=function(e){function t(e){o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="ConstraintFailure";this.message="The feature '"+e.name+"' is both selected and excluded by its constraints.";this.feature=e}i(t,e);return t}(Error);var p=t.ApplicationOrderCycle=function(e){function t(e,r){o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="ApplicationOrderCycle";this.message="The new application order between "+e+" and "+r+" created a cycle.";this.from=e;this.to=r}i(t,e);return t}(Error);var d=t.UnresolvedDeltaConflict=function(e){function t(e){o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="UnresolvedDeltaConflict";e=[].concat(n(e));var r=e.slice(0,-1).map(function(e){return"'"+e+"'"}).join(",");this.message="There is an unresolved conflict between deltas "+r+" and '"+e[e.length-1]+"'.";this.deltaNames=e}i(t,e);return t}(u);var y=t.MultipleActiveProxiesError=function(e){function t(){o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="MultipleActiveProxiesError";this.message="Only one Proxy per path can be active at any given time."}i(t,e);return t}(Error)},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var i=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})};var o=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var u=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var s=r(4);var f=s.extend;var l=s.oncePer;var c=s.isDefined;var v=s.isUndefined;var h=s.arraysEqual;var p=s.swapLastTwo;var d=r(6);var y=d.ReadableTarget;var g=d.wt;var m=r(8);var w=m.PreconditionFailure;var b=m.CompositionError;var x=n(r(23));e.exports=l("Delta",function(e){e.Delta=function(){function t(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++){n[a]=arguments[a]}u(this,t);this.id=++e.Delta._nextID;this.args=n}o(t,{arg:{get:function(){return this.args[0]},set:function(e){this.args[0]=e}},clone:{value:function r(){return new this.constructor(this.arg)}},evaluatePrecondition:{value:function n(e){var t=arguments[1]===undefined?{}:arguments[1];var r=t.weak;if(this.precondition){var n=this.precondition(e,t);if(n instanceof w){return n}else if(!n){return new w(this,e.value)}}return true}},appliedTo:{value:function a(e){var t=arguments[1]===undefined?{}:arguments[1];if(e instanceof y){e=e.value}if(typeof e.clone==="function"){e=e.clone()}var r={value:e};this.applyTo(g(r,"value"),t);return r.value}},toString:{value:function i(){var e=arguments[0]===undefined?{}:arguments[0];var t=this.type;if(e.targetProp){t+=" ‹"+e.targetProp+"›"}if(this.args.length>0){t+=": "+this.args.map(function(e){return JSON.stringify(e)}).join(",")}if(e.debug){t+=" ("+this.id+")"}return t}}});return t}();e.Delta._nextID=0;var t=new Map;function r(r,n,o){var u=arguments[3]===undefined?{}:arguments[3];if(v(u.commutative)){u.commutative=false}if(v(u.arity)){u.arity=2}if(v(u.onTrue)){u.onTrue=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}return t.slice(0,u.arity)}}if(v(u.onFalse)){u.onFalse=function(){throw new Error("Failure in finding a "+r+"!")}}if(u.onDefault==="onTrue"){u.onDefault=u.onTrue}else if(u.onDefault==="onFalse"||v(u.onDefault)){u.onDefault=u.onFalse}f(u,{name:r,staticMethodName:n,methodName:o,creationMethodName:"new"+r[0].toUpperCase()+""+r.slice(1),storageSymbol:Symbol("multiDispatch:"+r)});t.set(r,u);var s=u.creationMethodName;var c=u.storageSymbol;var h=u.onTrue;var d=u.onFalse;var y=u.onDefault;var g=u.commutative;var m=u.arity;f(e.Delta,function(){var t={};i(t,c,[]);i(t,s,function(t,r){var n=arguments[2]===undefined?{}:arguments[2];if(v(n.weak)){n.weak=false}if(v(e.Delta[c])){e.Delta[c]=[]}e.Delta[c].push({precondition:t,value:r,options:n})});i(t,n,function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n]}var i=r.slice(0,m),o=r[m]||{};if(v(o.weak)){o.weak=false}var u=function(){},s=false,f=false;if(v(e.Delta[c])){e.Delta[c]=[]}var l=true;var w=false;var b=undefined;try{for(var x=e.Delta[c][Symbol.iterator](),P;!(l=(P=x.next()).done);l=true){var _=P.value;var E=_.precondition;var O=_.value;var C=_.options;if(C.weak&&!o.weak){continue}if(E.apply(undefined,a(i))){u=O;s=true;break}else if(g&&E.apply(undefined,a(p(i)))){u=O;s=true;f=true;break}}}catch(A){w=true;b=A}finally{try{if(!l&&x["return"]){x["return"]()}}finally{if(w){throw b}}}if(!s){u=y}else if(u===false){u=d}else if(u===true){u=h}if(f){return u.apply(undefined,a(p(i)).concat([o]))}else{return u.apply(undefined,a(i).concat([o]))}});return t}());f(e.Delta.prototype,i({},o,function(){var t;for(var r=arguments.length,a=Array(r),i=0;i<r;i++){a[i]=arguments[i]}return(t=e.Delta)[n].apply(t,[this].concat(a))}));l(e.constructor,"multiDispatch:"+r,function(){f(e.constructor.prototype,i({},s,function(e,t){var r=arguments[2]===undefined?{}:arguments[2];return this.Delta[s](e,t,r)}))})}function n(r){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++){i[o-1]=arguments[o]}var u=t.get(r);var s=u.storageSymbol;var f=u.commutative;var l=true;var c=false;var v=undefined;try{for(var h=e.Delta[s][Symbol.iterator](),d;!(l=(d=h.next()).done);l=true){var y=d.value;var g=y.precondition;var m=y.value;if(g.apply(undefined,i)||f&&g.apply(undefined,a(p(i)))){return typeof m==="function"}}}catch(w){c=true;v=w}finally{try{if(!l&&h["return"]){h["return"]()}}finally{if(c){throw v}}}return false}r("composition","_binaryComposed","composedWith",{onTrue:function(t,r,n){return new e.Delta.Composed([t,r],n)},onFalse:function(e,t){throw new b(e,t)},onDefault:"onFalse"});e.Delta.composed=function s(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n]}var a=undefined,i=undefined;if(!(r[r.length-1]instanceof e.Delta)&&typeof r[r.length-1]!=="undefined"){i=r.slice(0,r.length-1);a=r[r.length-1]}else{i=r;a={}}return i.map(function(t){return t||new e.Delta.NoOp}).reduce(function(t,r){return e.Delta._binaryComposed(t,r,a)},new e.Delta.NoOp)};r("refinement","refines","refines",{onTrue:function(e,t){return true},onFalse:function(e,t){return false},onDefault:function(e,t,r){return e.equals(t,r)}});r("equality","equal","equals",{onTrue:function(e,t){return true},onFalse:function(e,t){return false},onDefault:function(e,t,r){if(n("refinement",e,t)){return e.refines(t,r)&&t.refines(e,r)}else{return e.type===t.type&&h(e.args,t.args)}},commutative:true});r("commutation","commute","commutesWith",{onTrue:function(e,t){return true},onFalse:function(e,t){return false},onDefault:function(e,t,r){return e.composedWith(t,r).equals(t.composedWith(e,r),r)},commutative:true});r("resolution","resolves","resolves",{onTrue:function(e,t,r){return true},onFalse:function(e,t,r){return false},onDefault:function(t,r,n,a){return e.Delta.composed(r,n,t,a).equals(e.Delta.composed(n,r,t,a),a)},arity:3,commutative:true});x(e)})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function m(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return m(a,t,r)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var o=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var u=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var s=r(4);var f=s.indent;var l=s.oncePer;var c=s.arraysEqual;var v=s.t;var h=n(r(9));var p=r(8);var d=p.MultipleOverloadsApplicationError;var y=p.NoOverloadsApplicationError;var g=p.MultipleOverloadsCompositionError;e.exports=l("Overloaded",function(e){h(e);e.newOperationType("Overloaded",function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}u(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this.overloads=this.arg||[]}o(t,e);a(t,{clone:{value:function r(){var e=i(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.overloads=this.overloads.map(function(e){return e.clone()});return e}},precondition:{value:function n(e,t){var r=[];var n=this.overloads.some(function(n){var a=n.evaluatePrecondition(e,t);if(a!==true){r.push(a);return false}return true});if(!n){if(r.length===0){return new y(this,e.value)}else if(r.length===1){return r[0]}else{return new d(this,e.value,r)}}return true}},applyTo:{value:function s(e){var t=arguments[1]===undefined?{}:arguments[1];var r=[];var n=this.overloads.some(function(n){var a=n.evaluatePrecondition(e);if(a!==true){r.push(a);return false}n.applyTo(e,t);return true});if(!n){if(r.length===0){throw new y(this,e.value)}else if(r.length===1){throw r[0]}else{throw new d(this,e.value,r)}}}},toString:{value:function l(){var e=arguments[0]===undefined?{}:arguments[0];var r=i(Object.getPrototypeOf(t.prototype),"toString",this).call(this,e);var n=this.overloads.map(function(t){return t.toString(e)}).join("\n");r+="\n"+f(n,4);return r}}});return t}(e.Delta));e.newComposition(function(t,r){return t instanceof e.Delta.Overloaded||r instanceof e.Delta.Overloaded},function(t,r,n){var a=t instanceof e.Delta.Overloaded?t.overloads:[t];var i=r instanceof e.Delta.Overloaded?r.overloads:[r];var o=new e.Delta.Overloaded;var u=[];var s=true;var f=false;var l=undefined;try{for(var c=a[Symbol.iterator](),v;!(s=(v=c.next()).done);s=true){var h=v.value;var p=true;var d=false;var y=undefined;try{for(var m=i[Symbol.iterator](),w;!(p=(w=m.next()).done);p=true){var b=w.value;try{o.overloads.push(h.composedWith(b,n))}catch(x){u.push(x)}}}catch(P){d=true;y=P}finally{try{if(!p&&m["return"]){m["return"]()}}finally{if(d){throw y}}}}}catch(P){f=true;l=P}finally{try{if(!s&&c["return"]){c["return"]()}}finally{if(f){throw l}}}if(o.overloads.length===0){throw new g(t,r,u)}return o});e.newEquality(v("Overloaded","Overloaded"),function(e,t,r){return c(e.overloads,t.overloads,function(e,t){return e.equals(t,r)})});e.newCommutation(v("Overloaded","Overloaded"),function(e,t,r){for(var n=0;n<e.overloads.length;++n){if(!e.overloads[n].commutesWith(t.overloads[n],r)){return false}}return true})})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];for(var n=e[Symbol.iterator](),a;!(a=n.next()).done;){r.push(a.value);if(t&&r.length===t)break}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function m(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return m(a,t,r)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var u=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var s=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var f=r(4);var l=f.extend;var c=f.indent;var v=f.t;var h=f.oncePer;var p=f.mapEqual;var d=n(r(7));var y=r(6).wt;var g=n(r(19));e.exports=h("Modify",function(e){g(e);e.newOperationType("Modify",function(e){function t(){var e=this;for(var r=arguments.length,n=Array(r),a=0;a<r;a++){n[a]=arguments[a]}s(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n);this.subDeltas=new Map(this.arg&&Object.keys(this.arg).map(function(t){return[t,e.arg[t]]}))}u(t,e);i(t,{clone:{value:function r(){var e=o(Object.getPrototypeOf(t.prototype),"clone",this).call(this);var r=true;var n=false;var i=undefined;try{for(var u=this.subDeltas[Symbol.iterator](),s;!(r=(s=u.next()).done);r=true){var f=a(s.value,2);var l=f[0];var c=f[1];e.subDeltas.set(l,c.clone())}}catch(v){n=true;i=v}finally{try{if(!r&&u["return"]){u["return"]()}}finally{if(n){throw i}}}return e}},precondition:{value:function n(e){var t=arguments[1]===undefined?{}:arguments[1];if(!(e.value instanceof Object)){return false}var r=true;var n=false;var i=undefined;try{for(var o=this.subDeltas[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var s=a(u.value,2);var f=s[0];var c=s[1];if(!t.restrictToProperty||t.restrictToProperty===f){var v=c.evaluatePrecondition(y(e.value,f),l({},t,{restrictToProperty:null}));if(v!==true){return v}}}}catch(h){n=true;i=h}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(n){throw i}}}return true}},applyTo:{value:function f(e){var t=arguments[1]===undefined?{}:arguments[1];var r=true;var n=false;var i=undefined;try{for(var o=this.subDeltas[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var s=a(u.value,2);var f=s[0];var c=s[1];if(!t.restrictToProperty||t.restrictToProperty===f){c.applyTo(y(e.value,f),l({},t,{restrictToProperty:null}))}}}catch(v){n=true;i=v}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(n){throw i}}}}},toString:{value:function v(){var e=arguments[0]===undefined?{}:arguments[0];var r=o(Object.getPrototypeOf(t.prototype),"toString",this).call(this,e);if(this.subDeltas.size>0){var n=this.subDeltas.entries().map(function(t){var r=a(t,2);var n=r[0];var i=r[1];return i.toString(l({},e,{targetProp:n}))}).join("\n");r+="\n"+c(n,4)}return r}}});return t}(e.Delta),function(t){function r(){s(this,r);if(t!=null){t.apply(this,arguments)}}u(r,t);i(r,{processProxyArguments:{value:function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n={};do{if(t.length===0){throw new Error("The argument list for this Modify.Proxy method is insufficient.")}var a=t.shift();if(typeof a==="string"){n.path=a}else{l(n,a)}}while(!n.path);return{options:n,args:t}}},addOperation:{value:function a(t,r){var n=r.path;if(!n.prop){throw new Error("Operations on a Modify.Proxy need to have a non-empty path.")}var a;if(n.rest){var i=l({},r,{path:n.rest});var o=this.addChildProxy(n.prop,new e.Delta.Modify);a=o.addOperation(t,i)}else{a=this.addChildProxy(n.prop,t)}return a}},delta:{value:function f(){var e=o(Object.getPrototypeOf(r.prototype),"delta",this).call(this);var t=true;var n=false;var a=undefined;try{for(var i=this.childKeys()[Symbol.iterator](),u;!(t=(u=i.next()).done);t=true){var s=u.value;e.subDeltas.set(s,this.childDelta(s))}}catch(f){n=true;a=f}finally{try{if(!t&&i["return"]){i["return"]()}}finally{if(n){throw a}}}return e}}});return r}(e.ContainerProxy));e.newComposition(v("Modify","Modify"),function(t,r,n){var a=t.clone();var i=true;var o=false;var u=undefined;try{for(var s=r.subDeltas.keys()[Symbol.iterator](),f;!(i=(f=s.next()).done);i=true){var l=f.value;a.subDeltas.set(l,e.Delta.composed(a.subDeltas.get(l),r.subDeltas.get(l),n))}}catch(c){o=true;u=c}finally{try{if(!i&&s["return"]){s["return"]()}}finally{if(o){throw u}}}return a});e.newEquality(v("Modify","Modify"),function(e,t){return p(e.subDeltas,t.subDeltas,function(e,t){return e.equals(t)})});e.newCommutation(v("Modify","Modify"),function(e,t,r){var n=true;var a=false;var i=undefined;try{for(var o=e.subDeltas.keys()[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){var s=u.value;if(t.subDeltas.has(s)){var f=e.subDeltas.get(s);var l=t.subDeltas.get(s);if(!f.commutesWith(l,r)){return false}}}}catch(c){a=true;i=c}finally{try{if(!n&&o["return"]){o["return"]()}}finally{if(a){throw i}}}return true})})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var u=r(4);var s=u.isUndefined;var f=u.isDefined;var l=u.t;var c=u.define_d;var v=u.oncePer;var h=r(6);var p=h.WritableTarget;var d=h.ReadableTarget;var y=h.rt;var g=h.wt;var m=n(r(9));var w=n(r(11));e.exports=v("basic operations",function(e){m(e);w(e);e.newOperationType("NoOp",function(e){function t(){o(this,t);if(e!=null){e.apply(this,arguments)}}i(t,e);return t}(e.Delta));e.newOperationType("Add",function(e){function t(){o(this,t);if(e!=null){e.apply(this,arguments)}}i(t,e);a(t,{precondition:{value:function r(e,t){var r=t.weak;return e instanceof p&&(r||s(e.value))}},applyTo:{value:function n(e){e.value=this.arg}}});return t}(e.Delta));e.newOperationType("Remove",function(e){function t(){o(this,t);if(e!=null){e.apply(this,arguments)}}i(t,e);a(t,{precondition:{value:function r(e,t){var r=t.weak;return e instanceof p&&(r||f(e.value))}},applyTo:{value:function n(e){e["delete"]()}}});return t}(e.Delta));e.newOperationType("Forbid",function(e){function t(){o(this,t);if(e!=null){e.apply(this,arguments)}}i(t,e);a(t,{precondition:{value:function r(e,t){var r=t.weak;return r||s(e.value)}}});return t}(e.Delta));e.newOperationType("Replace",function(e){
function t(){o(this,t);if(e!=null){e.apply(this,arguments)}}i(t,e);a(t,{precondition:{value:function r(e,t){var r=t.weak;return e instanceof p&&(r||f(e.value))}},applyTo:{value:function n(e){e.value=this.arg}}});return t}(e.Delta));e.newOperationType("Update",function(e){function t(){o(this,t);if(e!=null){e.apply(this,arguments)}}i(t,e);a(t,{precondition:{value:function r(e,t){var r=t.weak;return e instanceof p&&(r||f(e.value))}},applyTo:{value:function n(e){e.value=this.arg(e.value)}}});return t}(e.Delta));e.newComposition(function(t,r){return t instanceof e.Delta.NoOp},function(e,t){return t.clone()});e.newComposition(function(t,r){return r instanceof e.Delta.NoOp},function(e,t){return e.clone()});var t=c(e);e.newComposition(l("Add","Modify"),t("Add",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(l("Modify","Add"),false);e.newComposition(function(e,t){return t.type==="Add"},t("Add",function(e){var t=e.p2;return t}),{weak:true});e.newComposition(l("Add","Add"),false);e.newComposition(l("Modify","Remove"),t("Remove"));e.newComposition(l("Add","Remove"),t("Forbid"));e.newComposition(l("Remove","Modify"),false);e.newComposition(l("Remove","Add"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(function(e,t){return t.type==="Remove"},t("Remove"),{weak:true});e.newComposition(l("Remove","Remove"),false);e.newComposition(function(e,t){return e.type==="Forbid"},function(e,t){return t.clone()},{weak:true});e.newComposition(function(e,t){return t.type==="Forbid"},function(e,t){return e.clone()},{weak:true});e.newComposition(l("Modify","Forbid"),false);e.newComposition(l("Add","Forbid"),false);e.newComposition(l("Remove","Forbid"),t("Remove"));e.newComposition(l("Forbid","Modify"),false);e.newComposition(l("Forbid","Add"),t("Add",function(e){var t=e.p2;return t}));e.newComposition(l("Forbid","Remove"),false);e.newComposition(l("Forbid","Forbid"),t("Forbid"));e.newComposition(l("Modify","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(l("Add","Replace"),t("Add",function(e){var t=e.p2;return t}));e.newComposition(l("Remove","Replace"),false);e.newComposition(l("Forbid","Replace"),false);e.newComposition(l("Replace","Modify"),t("Replace",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(l("Replace","Add"),false);e.newComposition(l("Replace","Remove"),t("Remove"));e.newComposition(l("Replace","Forbid"),false);e.newComposition(l("Replace","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(l("Modify","Update"),true);e.newComposition(l("Add","Update"),t("Add",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(l("Remove","Update"),true);e.newComposition(l("Forbid","Update"),true);e.newComposition(l("Replace","Update"),t("Replace",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(l("Update","Modify"),true);e.newComposition(l("Update","Add"),true);e.newComposition(l("Update","Remove"),t("Remove"));e.newComposition(l("Update","Forbid"),true);e.newComposition(l("Update","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(l("Update","Update"),t("Update",function(e){var t=e.p1;var r=e.p2;return function(e){return r(t(e))}}))})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function b(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return b(a,t,r)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var u=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var s=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var f=r(4);var l=f.isDefined;var c=f.t;var v=f.define_d;var h=f.oncePer;var p=f.arraysEqual;var d=f.arraysHaveSameElements;var y=f.customIndexOf;var g=n(r(11));var m=n(r(12));var w=n(r(24));e.exports=h("PutIntoArray",function(e){g(e);m(e);w(e);e.newOperationType("PutIntoArray",function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}s(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this.values=this.arg?Array.isArray(this.arg)?this.arg:[this.arg]:[]}u(t,e);i(t,{clone:{value:function r(){var e=o(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.values=[].concat(a(this.values));return e}},precondition:{value:function n(e,t){var r=t.weak;return r||l(e.value)&&Array.isArray(e.value)}},applyTo:{value:function f(e){var t=e.value;var r=true;var n=false;var a=undefined;try{for(var i=this.values[Symbol.iterator](),o;!(r=(o=i.next()).done);r=true){var u=o.value;var s=u.method;var f=u.value;switch(s){case"prepend":{t.unshift(f)}break;case"insert":{var l=Math.floor(Math.random()*(t.length+1));t.splice(l,0,f)}break;case"append":{t.push(f)}break}}}catch(c){n=true;a=c}finally{try{if(!r&&i["return"]){i["return"]()}}finally{if(n){throw a}}}}},methods:{get:function(){return[]}}});return t}(e.Delta));e.newProxyMethod("prepend",function(t){return new e.Delta.PutIntoArray({method:"prepend",value:t})});e.newProxyMethod("insert",function(t){return new e.Delta.PutIntoArray({method:"insert",value:t})});e.newProxyMethod("append",function(t){return new e.Delta.PutIntoArray({method:"append",value:t})});var t=v(e);e.newComposition(c("Modify","PutIntoArray"),false);e.newComposition(c("Add","PutIntoArray"),t("Add",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(c("Remove","PutIntoArray"),false);e.newComposition(c("Forbid","PutIntoArray"),false);e.newComposition(c("Replace","PutIntoArray"),t("Replace",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(c("Update","PutIntoArray"),true);e.newComposition(c("PutIntoArray","Modify"),false);e.newComposition(c("PutIntoArray","Add"),false);e.newComposition(c("PutIntoArray","Remove"),t("Remove"));e.newComposition(c("PutIntoArray","Forbid"),false);e.newComposition(c("PutIntoArray","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(c("PutIntoArray","Update"),true);e.newComposition(c("PutIntoArray","PutIntoArray"),function(t,r){return new e.Delta.PutIntoArray([].concat(a(t.values),a(r.values)))});e.newRefinement(c("PutIntoArray","PutIntoArray"),function(e,t){var r=function(e,t){return e.method===t.method&&e.value===t.value};if(!d(e.values,t.values,r)){return false}if(!p(e.values.filter(function(e){return e.method==="append"}),t.values.filter(function(e){return e.method==="append"}),r)){return false}if(!p(e.values.filter(function(e){return e.method==="prepend"}),t.values.filter(function(e){return e.method==="prepend"}),r)){return false}var n=[];for(var a=0;a<e.values.length;++a){if(e.values[a].method==="insert"){var i=y(t.values,e.values[a],r);var o=[].concat(n);for(var u=0;u<=i;++u){var s=y(o,t.values[u],r);if(s>-1){o.splice(s,1)}}if(o.length>0){return false}}else{n.push(e.values[a])}}return true});e.newCommutation(c("PutIntoArray","PutIntoArray"),function(e,t,r){return true},{weak:true})})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function b(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return b(a,t,r)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var u=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var s=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var f=r(4);var l=f.isUndefined;var c=f.isDefined;var v=f.t;var h=f.define_d;var p=f.oncePer;var d=f.arraysEqual;var y=r(6).WritableTarget;var g=n(r(11));var m=n(r(12));var w=n(r(24));e.exports=p("PutIntoFunction",function(e){g(e);m(e);w(e);var t=Symbol("DeltaJs:function-parts");e.newOperationType("PutIntoFunction",function(e){function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}s(this,r);o(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,t);this.values=this.arg?Array.isArray(this.arg)?this.arg:[this.arg]:[]}u(r,e);i(r,{clone:{value:function n(){var e=o(Object.getPrototypeOf(r.prototype),"clone",this).call(this);e.values=[].concat(a(this.values));return e}},precondition:{value:function f(e){return c(e.value)&&typeof e.value==="function"&&(c(e.value[t])||e instanceof y)}},applyTo:{value:function v(e){if(l(e.value[t])){var r=e.value;var n=function(e){var t=function r(t){return e.apply(this,arguments)};t.toString=function(){return e.toString()};return t}(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++){r[a]=arguments[a]}var i=undefined;var o=true;var u=false;var s=undefined;try{for(var f=n[t][Symbol.iterator](),l;!(o=(l=f.next()).done);o=true){var c=l.value;i=c.apply(this,r)}}catch(v){u=true;s=v}finally{try{if(!o&&f["return"]){f["return"]()}}finally{if(u){throw s}}}return i});n[t]=[function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}r.apply(this,t)}];e.value=n}var a=e.value[t];var i=true;var o=false;var u=undefined;try{for(var s=this.values[Symbol.iterator](),f;!(i=(f=s.next()).done);i=true){var c=f.value;var v=c.method;var h=c.value;switch(v){case"prepend":{a.unshift(h)}break;case"insert":{var p=Math.floor(Math.random()*(a.length+1));a.splice(p,0,h)}break;case"append":{a.push(h)}break}}}catch(d){o=true;u=d}finally{try{if(!i&&s["return"]){s["return"]()}}finally{if(o){throw u}}}}},methods:{get:function(){return[]}}});return r}(e.Delta));e.newProxyMethod("prepend",function(t){return new e.Delta.PutIntoFunction({method:"prepend",value:t})});e.newProxyMethod("insert",function(t){return new e.Delta.PutIntoFunction({method:"insert",value:t})});e.newProxyMethod("append",function(t){return new e.Delta.PutIntoFunction({method:"append",value:t})});var r=h(e);e.newComposition(v("Modify","PutIntoFunction"),false);e.newComposition(v("Add","PutIntoFunction"),r("Add",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(v("Remove","PutIntoFunction"),false);e.newComposition(v("Forbid","PutIntoFunction"),false);e.newComposition(v("Replace","PutIntoFunction"),r("Replace",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(v("Update","PutIntoFunction"),true);e.newComposition(v("PutIntoFunction","Modify"),false);e.newComposition(v("PutIntoFunction","Add"),false);e.newComposition(v("PutIntoFunction","Remove"),r("Remove"));e.newComposition(v("PutIntoFunction","Forbid"),false);e.newComposition(v("PutIntoFunction","Replace"),r("Replace",function(e){var t=e.p2;return t}));e.newComposition(v("PutIntoFunction","Update"),true);e.newComposition(v("PutIntoFunction","PutIntoFunction"),function(t,r){return new e.Delta.PutIntoFunction([].concat(a(t.values),a(r.values)))});e.newEquality(v("PutIntoFunction","PutIntoFunction"),function(e,t){return d(e.values,t.values,function(e,t){return e.method===t.method&&e.value&&t.value})});e.newCommutation(v("PutIntoFunction","PutIntoFunction"),function(e,t){return true},{weak:true})})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];for(var n=e[Symbol.iterator](),a;!(a=n.next()).done;){r.push(a.value);if(t&&r.length===t)break}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var i=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var o=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var u=function E(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return E(a,t,r)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var s=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var f=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var l=n(r(22));var c=r(4);var v=c.extend;var h=c.isDefined;var p=c.indent;var d=c.oncePer;var y=c.s;var g=c.t;var m=n(r(7));var w=n(r(11));var b=n(r(19));var x=r(8);var P=x.ApplicationOrderCycle;var _=x.UnresolvedDeltaConflict;e.exports=d("DeltaModel",function(e){b(e);e.newOperationType("DeltaModel",function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}f(this,t);u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this.graph=new l}s(t,e);o(t,{clone:{value:function r(){var e=u(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.graph=this.graph.clone(function(e){return e.clone()});return e}},_assertNoUnresolvedConflicts:{value:function n(){var e=true;var t=false;var r=undefined;try{for(var n=this.conflicts()[Symbol.iterator](),a;!(e=(a=n.next()).done);e=true){var i=a.value;if(i.conflictResolvingDeltas.size===0){throw new _(i.conflictingDeltas)}}}catch(o){t=true;r=o}finally{try{if(!e&&n["return"]){n["return"]()}}finally{if(t){throw r}}}}},precondition:{value:function c(e,t){var r=true;var n=false;var o=undefined;try{for(var u=this.graph.vertices()[Symbol.iterator](),s;!(r=(s=u.next()).done);r=true){var f=a(s.value,2);var l=f[0];var c=f[1];if([].concat(i(this.graph.verticesTo(l))).length===0){var v=c.evaluatePrecondition(e,t);if(v!==true){return v}}}}catch(h){n=true;o=h}finally{try{if(!r&&u["return"]){u["return"]()}}finally{if(n){throw o}}}return true}},applyTo:{value:function h(e){var t=arguments[1]===undefined?{}:arguments[1];this._assertNoUnresolvedConflicts();var r=true;var n=false;var i=undefined;try{for(var o=this.graph.vertices_topologically()[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var s=a(u.value,2);var f=s[1];f.applyTo(e,v({},t,{weak:true}))}}catch(l){n=true;i=l}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(n){throw i}}}}},toString:{value:function d(){var e=arguments[0]===undefined?{}:arguments[0];var r=u(Object.getPrototypeOf(t.prototype),"toString",this).call(this,e);if(this.graph.vertexCount()>0){var n="";var i=true;var o=false;var s=undefined;try{for(var f=this.graph.vertices_topologically()[Symbol.iterator](),l;!(i=(l=f.next()).done);i=true){var c=a(l.value,2);var v=c[0];var h=c[1];n+="["+v+"] "+h.toString(e)+"\n"}}catch(d){o=true;s=d}finally{try{if(!i&&f["return"]){f["return"]()}}finally{if(o){throw s}}}r+="\n"+p(n,4)}return r}},conflicts:{value:function g(){var e=this.graph.clone();var t="(sink)";while(e.hasVertex(t)){t=""+t+"'"}e.addNewVertex(t,null);var r=true;var n=false;var o=undefined;try{for(var u=e.vertices()[Symbol.iterator](),s;!(r=(s=u.next()).done);r=true){var f=a(s.value,1);var l=f[0];e.setVertex(l,null);if(l!==t){e.ensureEdge(l,t)}}}catch(c){n=true;o=c}finally{try{if(!r&&u["return"]){u["return"]()}}finally{if(n){throw o}}}e=e.transitiveReduction();var v=new Map;var h=function(t){if(e.vertexValue(t)){return}var r=new Map;var n=true;var o=false;var u=undefined;try{for(var s=e.verticesTo(t)[Symbol.iterator](),f;!(n=(f=s.next()).done);n=true){var l=a(f.value,1);var c=l[0];h(c);var p=new Set([c]);var d=true;var g=false;var m=undefined;try{for(var w=e.vertexValue(c).values()[Symbol.iterator](),b;!(d=(b=w.next()).done);d=true){var x=b.value;var P=true;var _=false;var E=undefined;try{for(var O=x.values()[Symbol.iterator](),C;!(P=(C=O.next()).done);P=true){var A=C.value;p.add(A)}}catch(k){_=true;E=k}finally{try{if(!P&&O["return"]){O["return"]()}}finally{if(_){throw E}}}}}catch(k){g=true;m=k}finally{try{if(!d&&w["return"]){w["return"]()}}finally{if(g){throw m}}}r.set(c,p)}}catch(k){o=true;u=k}finally{try{if(!n&&s["return"]){s["return"]()}}finally{if(o){throw u}}}e.setVertex(t,r);var S=true;var D=false;var T=undefined;try{for(var j=r.keys()[Symbol.iterator](),M;!(S=(M=j.next()).done);S=true){var F=M.value;var R=true;var I=false;var V=undefined;try{for(var N=r.keys()[Symbol.iterator](),L;!(R=(L=N.next()).done);R=true){var U=L.value;if(F<U){var q=new Set(r.get(F));var W=new Set(r.get(U));var z=true;var G=false;var Y=undefined;try{for(var J=q[Symbol.iterator](),$;!(z=($=J.next()).done);z=true){var H=$.value;var K=true;var B=false;var X=undefined;try{for(var Q=W[Symbol.iterator](),Z;!(K=(Z=Q.next()).done);K=true){var ee=Z.value;if(H===ee){q["delete"](H);W["delete"](ee)}}}catch(k){B=true;X=k}finally{try{if(!K&&Q["return"]){Q["return"]()}}finally{if(B){throw X}}}}}catch(k){G=true;Y=k}finally{try{if(!z&&J["return"]){J["return"]()}}finally{if(G){throw Y}}}var te=true;var re=false;var ne=undefined;try{for(var ae=q[Symbol.iterator](),ie;!(te=(ie=ae.next()).done);te=true){var H=ie.value;var oe=true;var ue=false;var se=undefined;try{for(var fe=W[Symbol.iterator](),le;!(oe=(le=fe.next()).done);oe=true){var ee=le.value;y.apply(undefined,[v].concat(i([H,ee].sort()))).add(t)}}catch(k){ue=true;se=k}finally{try{if(!oe&&fe["return"]){fe["return"]()}}finally{if(ue){throw se}}}}}catch(k){re=true;ne=k}finally{try{if(!te&&ae["return"]){ae["return"]()}}finally{if(re){throw ne}}}}}}catch(k){I=true;V=k}finally{try{if(!R&&N["return"]){N["return"]()}}finally{if(I){throw V}}}}}catch(k){D=true;T=k}finally{try{if(!S&&j["return"]){j["return"]()}}finally{if(D){throw T}}}};h(t);var p=new Set;var d=true;var g=false;var m=undefined;try{for(var w=v.keys()[Symbol.iterator](),b;!(d=(b=w.next()).done);d=true){var x=b.value;var P=true;var _=false;var E=undefined;try{for(var O=v.get(x).keys()[Symbol.iterator](),C;!(P=(C=O.next()).done);P=true){var A=C.value;var k=this.graph.vertexValue(x);var S=this.graph.vertexValue(A);if(!k.commutesWith(S,{weak:true})){var D={conflictingDeltas:new Set([x,A]),conflictResolvingDeltas:new Set};var T=true;var j=false;var M=undefined;try{for(var F=v.get(x).get(A)[Symbol.iterator](),R;!(T=(R=F.next()).done);T=true){var I=R.value;var V=true;var N=false;var L=undefined;try{for(var U=[[I]].concat(i(e.verticesWithPathFrom(I)))[Symbol.iterator](),q;!(V=(q=U.next()).done);V=true){var W=a(q.value,1);var z=W[0];var G=this.graph.vertexValue(z);if(z!==t&&G.resolves(k,S,{weak:true})){D.conflictResolvingDeltas.add(z)}}}catch(c){N=true;L=c}finally{try{if(!V&&U["return"]){U["return"]()}}finally{if(N){throw L}}}}}catch(c){j=true;M=c}finally{try{if(!T&&F["return"]){F["return"]()}}finally{if(j){throw M}}}p.add(D)}}}catch(c){_=true;E=c}finally{try{if(!P&&O["return"]){O["return"]()}}finally{if(_){throw E}}}}}catch(c){g=true;m=c}finally{try{if(!d&&w["return"]){w["return"]()}}finally{if(g){throw m}}}return p}}});return t}(e.Delta),function(t){function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}f(this,r);u(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,t);this._childOptions=new Map;this._childApplicationConditions=new Map}s(r,t);o(r,{processProxyArguments:{value:function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n={};do{if(t.length===0){throw new Error("The argument list for this Modify.DeltaModel method is insufficient.")}var a=t.shift();if(typeof a==="string"){if(!n.name){n.name=a}else{n.path=a}}else{v(n,a)}}while(!n.path||!n.name);return{options:n,args:t}}},addOperation:{value:function a(t,r){var n=r.path;var a=r.name;var i=r.feature;if(!this._childApplicationConditions.has(a)){var o=undefined;if(i){o=e.newFeature(a,r)}else{o=e.newFeature("delta__"+a,v({hidden:true},r))}if(h(r.resolves)){o["if"](r.resolves);r=v({},r,{feature:false})}if(h(r.requires)){o.selects(r.requires)}if(i||o.conditional){t.applicationCondition=o}this._childApplicationConditions.set(a,o)}var u;if(n.prop){var s=v({},r,{name:undefined});var f=this.addChildProxy(a,new e.Delta.Modify);u=f.addOperation(t,s)}else{u=this.addChildProxy(a,t)}if(!this._childOptions.has(a)){this._childOptions.set(a,r)}return u}},delta:{value:function l(){var e=u(Object.getPrototypeOf(r.prototype),"delta",this).call(this);e.graph.clear();var t=true;var n=false;var a=undefined;try{for(var o=this.childKeys()[Symbol.iterator](),s;!(t=(s=o.next()).done);t=true){var f=s.value;var c=this._childOptions.get(f);var l=this.childDelta(f);e.graph.addVertex(f,l);var v=true;var h=false;var p=undefined;try{for(var d=[].concat(i(c.resolves||[]),i(c.after||[]),i(c.requires||[]))[Symbol.iterator](),y;!(v=(y=d.next()).done);v=true){var g=y.value;e.graph.createEdge(g,f);if(e.graph.hasCycle()){e.graph.removeExistingEdge(g,f);throw new P(g,f)}}}catch(m){h=true;p=m}finally{try{if(!v&&d["return"]){d["return"]()}}finally{if(h){throw p}}}if(c.feature||this._childApplicationConditions.get(f).conditional){l.applicationCondition=this._childApplicationConditions.get(f)}}}catch(m){n=true;a=m}finally{try{if(!t&&o["return"]){o["return"]()}}finally{if(n){throw a}}}return e}}});return r}(e.ContainerProxy));e.newComposition(function(t,r){return t instanceof e.Delta.DeltaModel||r instanceof e.Delta.DeltaModel},true);e.newEquality(g("DeltaModel","DeltaModel"),function(e,t){var r=e.graph.transitiveReduction();var n=t.graph.transitiveReduction();return r.equals(n,function(e,t){return e.equals(t)})})})},function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];for(var n=e[Symbol.iterator](),a;!(a=n.next()).done;){r.push(a.value);if(t&&r.length===t)break}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var a=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var o=r(4);var u=o.extend;var s=o.a;var f=o.assert;var l=o.isUndefined;var c=o.oncePer;var v=r(8).ConstraintFailure;e.exports=c("features",function(e){c(e.constructor,"features",function(){u(e.constructor.prototype,{newFeature:function t(e){var t=arguments[1]===undefined?{}:arguments[1];f(l(this.features[e]),"A feature with the name '"+e+"' already exists.");return this.features[e]=new this.Feature(e,t)}})});function t(t){t=Array.isArray(t)?t:[t];t=t.map(function(t){return t instanceof e.Feature?t.name:t});return t}var r=new Map;var o=new Map;function h(e){var n=arguments[1]===undefined?[]:arguments[1];w=true;if(n===true){o.set(e,true)}else if(n===false){}else if(r.get(e)!==true){s(r,e).push(t(n))}}function p(e,r){var n=true;var a=false;var i=undefined;try{for(var o=t(r)[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){var s=u.value;h(s,e)}}catch(f){a=true;i=f}finally{try{if(!n&&o["return"]){o["return"]()}}finally{if(a){throw i}}}}var d=new Map;var y=new Map;function g(e){var r=arguments[1]===undefined?[]:arguments[1];w=true;if(r===false){y.set(e,false)}else if(r===true){}else if(d.get(e)!==false){s(d,e).push(t(r))}}function m(e,r){var n=true;var a=false;var i=undefined;try{for(var o=t(r)[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){var s=u.value;g(s,e)}}catch(f){a=true;i=f}finally{try{if(!n&&o["return"]){o["return"]()}}finally{if(a){throw i}}}}var w=false;function b(){if(!w){return}w=false;var t;do{t=false;var n=true;var a=false;var i=undefined;try{for(var u=Object.keys(e.features)[Symbol.iterator](),s;!(n=(s=u.next()).done);n=true){var f=s.value;if(!o.get(f)){if(o.has(f)){o.set(f,false)}if((r.get(f)||[]).some(function(e){return e.every(function(e){return o.get(e)})})){o.set(f,true);t=true}}}}catch(l){a=true;i=l}finally{try{if(!n&&u["return"]){u["return"]()}}finally{if(a){throw i}}}}while(t);var c=true;var v=false;var h=undefined;try{for(var p=Object.keys(e.features)[Symbol.iterator](),g;!(c=(g=p.next()).done);c=true){var f=g.value;y.set(f,(d.get(f)||[]).every(function(e){return e.some(function(e){return o.get(e)})}))}}catch(l){v=true;h=l}finally{try{if(!c&&p["return"]){p["return"]()}}finally{if(v){throw h}}}}e.Feature=function(){function e(t){var r=arguments[1]===undefined?{}:arguments[1];i(this,e);this.name=t;this.options=r;var n=true;var a=false;var o=undefined;try{for(var u=Object.keys(r)[Symbol.iterator](),s;!(n=(s=u.next()).done);n=true){var f=s.value;this.addOption(f,r[f])}}catch(l){a=true;o=l}finally{try{if(!n&&u["return"]){u["return"]()}}finally{if(a){throw o}}}}a(e,{selected:{get:function(){b();if(o.get(this.name)&&!y.get(this.name)){throw new v(this)}return o.get(this.name)}},condition:{get:function(){return r.get(this.name)}},conditional:{get:function(){return s(r,this.name).length>0}},restricted:{get:function(){return s(d,this.name).length>0}},select:{value:function t(){this["if"](true)}}});return e}();var x=[["if",[h]],["onlyIf",[g]],["selects",[p]],["requiredBy",[m]],["iff",[h,g]]];e.Feature.prototype.addOption=function(e,t){var r=true;var a=false;var i=undefined;try{for(var o=x[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var s=n(u.value,2);var f=s[0];var l=s[1];if(e===f){var c=true;var v=false;var h=undefined;try{for(var p=l[Symbol.iterator](),d;!(c=(d=p.next()).done);c=true){var y=d.value;y(this.name,t)}}catch(g){v=true;h=g}finally{try{if(!c&&p["return"]){p["return"]()}}finally{if(v){throw h}}}}}}catch(g){a=true;i=g}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(a){throw i}}}};var P=true;var _=false;var E=undefined;try{for(var O=x[Symbol.iterator](),C;!(P=(C=O.next()).done);P=true){var A;(function(){A=n(C.value,1);var t=A[0];e.Feature.prototype[t]=function(e){this.addOption(t,e)}})()}}catch(k){_=true;E=k}finally{try{if(!P&&O["return"]){O["return"]()}}finally{if(_){throw E}}}e.features={}})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})};var i=r(4);var o=i.extend;var u=i.oncePer;var s=n(r(15));e.exports=u("variation points",function(e){u(e.constructor,"variation points",function(){s(e);o(e.constructor.prototype,{vp:function t(e,r){var n=a({},e,r);this._deltaModelProxy.delta().applyTo(n,{restrictToProperty:e});return n[e]},"do":function r(){var e;for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n]}return(e=this._deltaModelProxy)["do"].apply(e,[{feature:true}].concat(r))}})});e._deltaModelProxy=(new e.Delta.DeltaModel)["do"]()})},function(e,t,r){"use strict";var n=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var a=r(4);var i=a.extend;var o=a.isUndefined;var u=a.oncePer;e.exports=u("application conditions",function(e){u(e.constructor,"application conditions",function(){i(e.constructor.prototype,{select:function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}var a=true;var i=false;var o=undefined;try{for(var u=t[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var f=s.value;if(Array.isArray(f)){this.select.apply(this,n(f))}else{this.features[f].select()}}}catch(l){i=true;o=l}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}}})});i(e.Delta.prototype,Object.defineProperties({},{applicationCondition:{get:function(){return this._applicationCondition},set:function(e){this._applicationCondition=e},configurable:true,enumerable:true},selected:{get:function(){return o(this.applicationCondition)||this.applicationCondition.selected},configurable:true,enumerable:true}}))})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function w(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return w(a,t,r)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var u=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var s=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var f=n(r(22));var l=r(4);var c=l.extend;var v=l.a;var h=l.isUndefined;var p=l.oncePer;var d=n(r(7));var y=n(r(10));var g=n(r(24));var m=r(8).MultipleActiveProxiesError;e.exports=p("ContainerProxy",function(e){g(e);e.ContainerProxy=function(t){function r(){var e=arguments[0]===undefined?{}:arguments[0];s(this,r);o(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,e);this._doArgs=[];this._original=this;this._children=new Map}u(r,t);i(r,{deactivate:{value:function n(){var e=true;var t=false;var n=undefined;try{for(var a=this._children.keys()[Symbol.iterator](),i;!(e=(i=a.next()).done);e=true){var u=i.value;this.childProxy(u).deactivate()}}catch(s){t=true;n=s}finally{try{if(!e&&a["return"]){a["return"]()}}finally{if(t){throw n}}}o(Object.getPrototypeOf(r.prototype),"deactivate",this).call(this)}},addChildProxy:{value:function f(t,r){var n=this.childProxy(t);var a=r.constructor.Proxy||e.Proxy;var i=new a({delta:r,parent:this});if(n instanceof e.Delta.Modify.Proxy&&i instanceof e.Delta.Modify.Proxy){return n}if(n){n.deactivate()}this._children.get(t).push(i);return i}},childKeys:{value:function l(){return[].concat(a(this._children.keys()))}},childProxies:{value:function c(e){return v(this._children,e)}},childProxy:{value:function p(e){if(!this._children.has(e)){this._children.set(e,[])}return this._children.get(e)[this._children.get(e).length-1]}},childDelta:{value:function g(t){var r;var n=(r=e.Delta).composed.apply(r,a(this.childProxies(t).map(function(e){return e.delta()})));return n}},"do":{value:function w(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(!this.active){throw new m}var n=Object.create(this);n._doArgs=[].concat(a(this._doArgs),t);n._original=this._original;return n}},_do:{value:function b(t,r){if(!this.active){throw new m}var n=this.processProxyArguments.apply(this,a(this._doArgs).concat(a(r)));var i=n.options;var o=n.args;if(typeof i.path==="string"){i.path=new d(i.path)}var u=e.ContainerProxy._newDeltaByMethod(t,o);var s=this.addOperation(u,i);return s instanceof e.ContainerProxy?s:this}},processProxyArguments:{value:function x(){throw new Error("A 'ContainerProxy' subclass needs to implement the 'processProxyArguments' method.");

}},addOperation:{value:function P(){throw new Error("A 'ContainerProxy' subclass needs to implement the 'addOperation' method.")}}},{_newDeltaByMethod:{value:function _(t,r){var n=e.ContainerProxy._methodHandlers[t].map(function(e){return e.apply(undefined,a(r))});if(n.length===1){return n[0]}else{y(e);return new e.Delta.Overloaded(n)}}},newProxyMethod:{value:function E(t,r){if(h(e.ContainerProxy.prototype[t])){e.ContainerProxy.prototype[t]=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}return this._do(t,r)}}v(e.ContainerProxy,"_methodHandlers",t).push(r)}}});return r}(e.Proxy)})},function(e,t,r){!function(t,r,n){"use strict";var a="Object",i="Function",o="Array",u="String",s="Number",f="RegExp",l="Date",c="Map",v="Set",h="WeakMap",p="WeakSet",d="Symbol",y="Promise",g="Math",m="Arguments",w="prototype",b="constructor",x="toString",P=x+"Tag",_="toLocaleString",E="hasOwnProperty",O="forEach",C="iterator",A="@@"+C,k="process",S="createElement",D=t[i],T=t[a],j=t[o],M=t[u],F=t[s],R=t[f],I=t[l],V=t[c],N=t[v],L=t[h],U=t[p],q=t[d],W=t[g],z=t.TypeError,G=t.RangeError,Y=t.setTimeout,J=t.setImmediate,$=t.clearImmediate,H=t.parseInt,K=t.isFinite,B=t[k],X=B&&B.nextTick,Q=t.document,Z=Q&&Q.documentElement,ee=t.navigator,te=t.define,re=t.console||{},ne=j[w],ae=T[w],ie=D[w],oe=1/0,ue=".";function se(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function fe(e){return typeof e=="function"}var le=we(/./.test,/\[native code\]\s*\}\s*$/,1);var ce=ae[x];function ve(e,t,r){if(e&&!Te(e=r?e:e[w],jt))Ct(e,jt,t)}function he(e){return ce.call(e).slice(8,-1)}function pe(e){var t,r;return e==n?e===n?"Undefined":"Null":typeof(r=(t=T(e))[jt])=="string"?r:he(t)}var de=ie.call,ye=ie.apply,ge;function me(){var e=yt(this),t=arguments.length,r=j(t),n=0,a=Nt._,i=false;while(t>n)if((r[n]=arguments[n++])===a)i=true;return function(){var n=this,o=arguments.length,u=0,s=0,f;if(!i&&!o)return be(e,r,n);f=r.slice();if(i)for(;t>u;u++)if(f[u]===a)f[u]=arguments[s++];while(o>s)f.push(arguments[s++]);return be(e,f,n)}}function we(e,t,r){yt(e);if(~r&&t===n)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)}}return function(){return e.apply(t,arguments)}}function be(e,t,r){var a=r===n;switch(t.length|0){case 0:return a?e():e.call(r);case 1:return a?e(t[0]):e.call(r,t[0]);case 2:return a?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3]);case 5:return a?e(t[0],t[1],t[2],t[3],t[4]):e.call(r,t[0],t[1],t[2],t[3],t[4])}return e.apply(r,t)}var xe=T.create,Pe=T.getPrototypeOf,_e=T.setPrototypeOf,Ee=T.defineProperty,Oe=T.defineProperties,Ce=T.getOwnPropertyDescriptor,Ae=T.keys,ke=T.getOwnPropertyNames,Se=T.getOwnPropertySymbols,De=T.isFrozen,Te=we(de,ae[E],2),je=T,Me;function Fe(e){return je(dt(e))}function Re(e){return e}function Ie(){return this}function Ve(e,t){if(Te(e,t))return e[t]}function Ne(e){gt(e);return Se?ke(e).concat(Se(e)):ke(e)}var Le=T.assign||function(e,t){var r=T(dt(e)),n=arguments.length,a=1;while(n>a){var i=je(arguments[a++]),o=Ae(i),u=o.length,s=0,f;while(u>s)r[f=o[s++]]=i[f]}return r};function Ue(e,t){var r=Fe(e),n=Ae(r),a=n.length,i=0,o;while(a>i)if(r[o=n[i++]]===t)return o}function qe(e){return M(e).split(",")}var We=ne.push,ze=ne.unshift,Ge=ne.slice,Ye=ne.splice,Je=ne.indexOf,$e=ne[O];function He(e){var t=e==1,r=e==2,a=e==3,i=e==4,o=e==6,u=e==5||o;return function(s){var f=T(dt(this)),l=arguments[1],c=je(f),v=we(s,l,3),h=st(c.length),p=0,d=t?j(h):r?[]:n,y,g;for(;h>p;p++)if(u||p in c){y=c[p];g=v(y,p,f);if(e){if(t)d[p]=g;else if(g)switch(e){case 3:return true;case 5:return y;case 6:return p;case 2:d.push(y)}else if(i)return false}}return o?-1:a||i?i:d}}function Ke(e){return function(t){var r=Fe(this),n=st(r.length),a=ft(arguments[1],n);if(e&&t!=t){for(;n>a;a++)if(ot(r[a]))return e||a}else for(;n>a;a++)if(e||a in r){if(r[a]===t)return e||a}return!e&&-1}}function Be(e,t){return typeof e=="function"?e:t}var Xe=9007199254740991,Qe=W.pow,Ze=W.abs,et=W.ceil,tt=W.floor,rt=W.max,nt=W.min,at=W.random,it=W.trunc||function(e){return(e>0?tt:et)(e)};function ot(e){return e!=e}function ut(e){return isNaN(e)?0:it(e)}function st(e){return e>0?nt(ut(e),Xe):0}function ft(e,t){var e=ut(e);return e<0?rt(e+t,0):nt(e,t)}function lt(e){return e>9?e:"0"+e}function ct(e,t,r){var n=se(t)?function(e){return t[e]}:t;return function(t){return M(r?t:this).replace(e,n)}}function vt(e){return function(t){var r=M(dt(this)),a=ut(t),i=r.length,o,u;if(a<0||a>=i)return e?"":n;o=r.charCodeAt(a);return o<55296||o>56319||a+1===i||(u=r.charCodeAt(a+1))<56320||u>57343?e?r.charAt(a):o:e?r.slice(a,a+2):(o-55296<<10)+(u-56320)+65536}}var ht="Reduce of empty object with no initial value";function pt(e,t,r){if(!e)throw z(r?t+r:t)}function dt(e){if(e==n)throw z("Function called on null or undefined");return e}function yt(e){pt(fe(e),e," is not a function!");return e}function gt(e){pt(se(e),e," is not an object!");return e}function mt(e,t,r){pt(e instanceof t,r,": use the 'new' operator!")}function wt(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}function bt(e,t,r){e[t]=r;return e}function xt(e){return Et?function(t,r,n){return Ee(t,r,wt(e,n))}:bt}function Pt(e){return d+"("+e+")_"+(++Ot+at())[x](36)}function _t(e,t){return q&&q[e]||(t?q:kt)(d+ue+e)}var Et=!!function(){try{return Ee({},"a",{get:function(){return 2}}).a==2}catch(e){}}(),Ot=0,Ct=xt(1),At=q?bt:Ct,kt=q||Pt;function St(e,t){for(var r in t)Ct(e,r,t[r]);return e}var Dt=_t("unscopables"),Tt=ne[Dt]||{},jt=_t(P),Mt=_t("species"),Ft;function Rt(e){if(Et&&(r||!le(e)))Ee(e,Mt,{configurable:true,get:Ie})}var It=he(B)==k,Vt={},Nt=r?t:Vt,Lt=t.core,Ut,qt=1,Wt=2,zt=4,Gt=8,Yt=16,Jt=32;function $t(e,n,a){var i,o,u,s,f=e&Wt,l=f?t:e&zt?t[n]:(t[n]||ae)[w],c=f?Vt:Vt[n]||(Vt[n]={});if(f)a=n;for(i in a){o=!(e&qt)&&l&&i in l&&(!fe(l[i])||le(l[i]));u=(o?l:a)[i];if(!r&&f&&!fe(l[i]))s=a[i];else if(e&Yt&&o)s=we(u,t);else if(e&Jt&&!r&&l[i]==u){s=function(e){return this instanceof u?new u(e):u(e)};s[w]=u[w]}else s=e&Gt&&fe(u)?we(de,u):u;if(r&&l&&!o){if(f)l[i]=u;else delete l[i]&&Ct(l,i,u)}if(c[i]!=u)Ct(c,i,s)}}if(typeof e!="undefined"&&e.exports)e.exports=Vt;else if(fe(te)&&te.amd)te(function(){return Vt});else Ut=true;if(Ut||r){Vt.noConflict=function(){t.core=Lt;return Vt};t.core=Vt}Ft=_t(C);var Ht=kt("iter"),Kt=1,Bt=2,Xt={},Qt={},Zt="keys"in ne&&!("next"in[].keys());er(Qt,Ie);function er(e,t){Ct(e,Ft,t);A in ne&&Ct(e,A,t)}function tr(e,t,r,n){e[w]=xe(n||Qt,{next:wt(1,r)});ve(e,t+" Iterator")}function rr(e,t,n,a){var i=e[w],o=Ve(i,Ft)||Ve(i,A)||a&&Ve(i,a)||n;if(r){er(i,o);if(o!==n){var u=Pe(o.call(new e));ve(u,t+" Iterator",true);Te(i,A)&&er(u,Ie)}}Xt[t]=o;Xt[t+" Iterator"]=Ie;return o}function nr(e,t,r,n,a,i){function o(e){return function(){return new r(this,e)}}tr(r,t,n);var u=o(Kt+Bt),s=o(Bt);if(a==Bt)s=rr(e,t,s,"values");else u=rr(e,t,u,"entries");if(a){$t(Gt+qt*Zt,t,{entries:u,keys:i?s:o(Kt),values:s})}}function ar(e,t){return{value:t,done:!!e}}function ir(e){var r=T(e),n=t[d],a=(n&&n[C]||A)in r;return a||Ft in r||Te(Xt,pe(r))}function or(e){var r=t[d],n=e[r&&r[C]||A],a=n||e[Ft]||Xt[pe(e)];return gt(a.call(e))}function ur(e,t,r){return r?be(e,t):e(t)}function sr(e){var t=true;var r={next:function(){throw 1},"return":function(){t=false}};r[Ft]=Ie;try{e(r)}catch(n){}return t}function fr(e){var t=e["return"];if(t!==n)t.call(e)}function lr(e,t){try{e(t)}catch(r){fr(t);throw r}}function cr(e,t,r,n){lr(function(e){var a=we(r,n,t?2:1),i;while(!(i=e.next()).done)if(ur(a,i.value,t)===false){return fr(e)}},or(e))}!function(e,r,n,i){if(!le(q)){q=function(t){pt(!(this instanceof q),d+" is not a "+b);var r=Pt(t),a=At(xe(q[w]),e,r);n[r]=a;Et&&i&&Ee(ae,r,{configurable:true,set:function(e){Ct(this,r,e)}});return a};Ct(q[w],x,function(){return this[e]})}$t(Wt+Jt,{Symbol:q});var o={"for":function(e){return Te(r,e+="")?r[e]:r[e]=q(e)},iterator:Ft||_t(C),keyFor:me.call(Ue,r),species:Mt,toStringTag:jt=_t(P,true),unscopables:Dt,pure:kt,set:At,useSetter:function(){i=true},useSimple:function(){i=false}};$e.call(qe("hasInstance,isConcatSpreadable,match,replace,search,split,toPrimitive"),function(e){o[e]=_t(e)});$t(zt,d,o);ve(q,d);$t(zt+qt*!le(q),a,{getOwnPropertyNames:function(e){var t=ke(Fe(e)),r=[],a,i=0;while(t.length>i)Te(n,a=t[i++])||r.push(a);return r},getOwnPropertySymbols:function(e){var t=ke(Fe(e)),r=[],a,i=0;while(t.length>i)Te(n,a=t[i++])&&r.push(n[a]);return r}});ve(W,g,true);ve(t.JSON,"JSON",true)}(kt("tag"),{},{},true);!function(){var e={assign:Le,is:function(e,t){return e===t?e!==0||1/e===1/t:e!=e&&t!=t}};"__proto__"in ae&&function(t,r){try{r=we(de,Ce(ae,"__proto__").set,2);r({},ne)}catch(n){t=true}e.setPrototypeOf=_e=_e||function(e,n){gt(e);pt(n===null||se(n),n,": can't set as prototype!");if(t)e.__proto__=n;else r(e,n);return e}}();$t(zt,a,e)}();!function(e){e[jt]=ue;if(he(e)!=ue)Ct(ae,x,function(){return"[object "+pe(this)+"]"})}({});!function(){function e(e,t){var r=T[e],n=Vt[a][e],i=0,o={};if(!n||le(n)){o[e]=t==1?function(e){return se(e)?r(e):e}:t==2?function(e){return se(e)?r(e):true}:t==3?function(e){return se(e)?r(e):false}:t==4?function(e,t){return r(Fe(e),t)}:function(e){return r(Fe(e))};try{r(ue)}catch(u){i=1}$t(zt+qt*i,a,o)}}e("freeze",1);e("seal",1);e("preventExtensions",1);e("isFrozen",2);e("isSealed",2);e("isExtensible",3);e("getOwnPropertyDescriptor",4);e("getPrototypeOf");e("keys");e("getOwnPropertyNames")}();!function(e){e in ie||Et&&Ee(ie,e,{configurable:true,get:function(){var t=M(this).match(/^\s*function ([^ (]*)/),r=t?t[1]:"";Te(this,e)||Ee(this,e,wt(5,r));return r},set:function(t){Te(this,e)||Ee(this,e,wt(0,t))}})}("name");F("0o1")&&F("0b1")||function(e,r){function n(e){if(se(e))e=a(e);if(typeof e=="string"&&e.length>2&&e.charCodeAt(0)==48){var t=false;switch(e.charCodeAt(1)){case 66:case 98:t=true;case 79:case 111:return H(e.slice(2),t?2:8)}}return+e}function a(e){var t,r;if(fe(t=e.valueOf)&&!se(r=t.call(e)))return r;if(fe(t=e[x])&&!se(r=t.call(e)))return r;throw z("Can't convert object to number")}F=function i(t){return this instanceof i?new e(n(t)):n(t)};$e.call(Et?ke(e):qe("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY"),function(t){t in F||Ee(F,t,Ce(e,t))});F[w]=r;r[b]=F;Ct(t,s,F)}(F,F[w]);!function(e){$t(zt,s,{EPSILON:Qe(2,-52),isFinite:function(e){return typeof e=="number"&&K(e)},isInteger:e,isNaN:ot,isSafeInteger:function(t){return e(t)&&Ze(t)<=Xe},MAX_SAFE_INTEGER:Xe,MIN_SAFE_INTEGER:-Xe,parseFloat:parseFloat,parseInt:H})}(F.isInteger||function(e){return!se(e)&&K(e)&&tt(e)===e});!function(){var e=W.E,t=W.exp,r=W.log,n=W.sqrt,a=W.sign||function(e){return(e=+e)==0||e!=e?e:e<0?-1:1};function i(e){return!K(e=+e)||e==0?e:e<0?-i(-e):r(e+n(e*e+1))}function o(e){return(e=+e)==0?e:e>-1e-6&&e<1e-6?e+e*e/2:t(e)-1}$t(zt,g,{acosh:function(t){return(t=+t)<1?NaN:K(t)?r(t/e+n(t+1)*n(t-1)/e)+1:t},asinh:i,atanh:function(e){return(e=+e)==0?e:r((1+e)/(1-e))/2},cbrt:function(e){return a(e=+e)*Qe(Ze(e),1/3)},clz32:function(e){return(e>>>=0)?32-e[x](2).length:32},cosh:function(e){return(t(e=+e)+t(-e))/2},expm1:o,fround:function(e){return new Float32Array([e])[0]},hypot:function(e,t){var r=0,a=arguments.length,i=a,o=j(a),u=-oe,s;while(a--){s=o[a]=+arguments[a];if(s==oe||s==-oe)return oe;if(s>u)u=s}u=s||1;while(i--)r+=Qe(o[i]/u,2);return u*n(r)},imul:function(e,t){var r=65535,n=+e,a=+t,i=r&n,o=r&a;return 0|i*o+((r&n>>>16)*o+i*(r&a>>>16)<<16>>>0)},log1p:function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:r(1+e)},log10:function(e){return r(e)/W.LN10},log2:function(e){return r(e)/W.LN2},sign:a,sinh:function(r){return Ze(r=+r)<1?(o(r)-o(-r))/2:(t(r-1)-t(-r-1))*(e/2)},tanh:function(e){var r=o(e=+e),n=o(-e);return r==oe?1:n==oe?-1:(r-n)/(t(e)+t(-e))},trunc:it})}();!function(e){function t(e){if(he(e)==f)throw z()}$t(zt,u,{fromCodePoint:function(t){var r=[],n=arguments.length,a=0,i;while(n>a){i=+arguments[a++];if(ft(i,1114111)!==i)throw G(i+" is not a valid code point");r.push(i<65536?e(i):e(((i-=65536)>>10)+55296,i%1024+56320))}return r.join("")},raw:function(e){var t=Fe(e.raw),r=st(t.length),n=arguments.length,a=[],i=0;while(r>i){a.push(M(t[i++]));if(i<n)a.push(M(arguments[i]))}return a.join("")}});$t(Gt,u,{codePointAt:vt(false),endsWith:function(e){t(e);var r=M(dt(this)),a=arguments[1],i=st(r.length),o=a===n?i:nt(st(a),i);e+="";return r.slice(o-e.length,o)===e},includes:function(e){t(e);return!!~M(dt(this)).indexOf(e,arguments[1])},repeat:function(e){var t=M(dt(this)),r="",n=ut(e);if(0>n||n==oe)throw G("Count can't be negative");for(;n>0;(n>>>=1)&&(t+=t))if(n&1)r+=t;return r},startsWith:function(e){t(e);var r=M(dt(this)),n=st(nt(arguments[1],r.length));e+="";return r.slice(n,n+e.length)===e}})}(M.fromCharCode);!function(){$t(zt+qt*sr(j.from),o,{from:function(e){var t=T(dt(e)),r=arguments[1],a=r!==n,i=a?we(r,arguments[2],2):n,o=0,u,s,f;if(ir(t)){s=new(Be(this,j));lr(function(e){for(;!(f=e.next()).done;o++){s[o]=a?i(f.value,o):f.value}},or(t))}else{s=new(Be(this,j))(u=st(t.length));for(;u>o;o++){s[o]=a?i(t[o],o):t[o]}}s.length=o;return s}});$t(zt,o,{of:function(){var e=0,t=arguments.length,r=new(Be(this,j))(t);while(t>e)r[e]=arguments[e++];r.length=t;return r}});Rt(j)}();!function(){$t(Gt,o,{copyWithin:function(e,t){var r=T(dt(this)),a=st(r.length),i=ft(e,a),o=ft(t,a),u=arguments[2],s=u===n?a:ft(u,a),f=nt(s-o,a-i),l=1;if(o<i&&i<o+f){l=-1;o=o+f-1;i=i+f-1}while(f-->0){if(o in r)r[i]=r[o];else delete r[i];i+=l;o+=l}return r},fill:function(e){var t=T(dt(this)),r=st(t.length),a=ft(arguments[1],r),i=arguments[2],o=i===n?r:ft(i,r);while(o>a)t[a++]=e;return t},find:He(5),findIndex:He(6)});if(r){$e.call(qe("find,findIndex,fill,copyWithin,entries,keys,values"),function(e){Tt[e]=true});Dt in ne||Ct(ne,Dt,Tt)}}();!function(e){nr(j,o,function(e,t){At(this,Ht,{o:Fe(e),i:0,k:t})},function(){var e=this[Ht],t=e.o,r=e.k,a=e.i++;if(!t||a>=t.length){e.o=n;return ar(1)}if(r==Kt)return ar(0,a);if(r==Bt)return ar(0,t[a]);return ar(0,[a,t[a]])},Bt);Xt[m]=Xt[o];nr(M,u,function(e){At(this,Ht,{o:M(e),i:0})},function(){var t=this[Ht],r=t.o,n=t.i,a;if(n>=r.length)return ar(1);a=e.call(r,n);t.i+=a.length;return ar(0,a)})}(vt(true));Et&&!function(e,r){if(!function(){try{return R(/a/g,"i")=="/a/i"}catch(e){}}()){R=function a(e,t){return new r(he(e)==f&&t!==n?e.source:e,t)};$e.call(ke(r),function(e){e in R||Ee(R,e,{configurable:true,get:function(){return r[e]},set:function(t){r[e]=t}})});e[b]=R;R[w]=e;Ct(t,f,R)}if(/./g.flags!="g")Ee(e,"flags",{configurable:true,get:ct(/^.*\/(\w*)$/,"$1")});Rt(R)}(R[w],R);fe(J)&&fe($)||function(e){var r=t.postMessage,n=t.addEventListener,a=t.MessageChannel,i=0,o={},u,s,f;J=function(e){var t=[],r=1;while(arguments.length>r)t.push(arguments[r++]);o[++i]=function(){be(fe(e)?e:D(e),t)};u(i);return i};$=function(e){delete o[e]};function l(e){if(Te(o,e)){var t=o[e];delete o[e];t()}}function c(e){l(e.data)}if(It){u=function(e){X(me.call(l,e))}}else if(n&&fe(r)&&!t.importScripts){u=function(e){r(e,"*")};n("message",c,false)}else if(fe(a)){s=new a;f=s.port2;s.port1.onmessage=c;u=we(f.postMessage,f,1)}else if(Q&&e in Q[S]("script")){u=function(t){Z.appendChild(Q[S]("script"))[e]=function(){Z.removeChild(this);l(t)}}}else{u=function(e){Y(l,0,e)}}}("onreadystatechange");$t(Wt+Yt,{setImmediate:J,clearImmediate:$});!function(e,t){fe(e)&&fe(e.resolve)&&e.resolve(t=new e(function(){}))==t||function(t,r){function a(e){var t;if(se(e))t=e.then;return fe(t)?t:false}function i(e){var t=e[r],n=t.c,a=0,o;if(t.h)return true;while(n.length>a){o=n[a++];if(o.fail||i(o.P))return true}}function o(e,r){var n=e.c;if(r||n.length)t(function(){var t=e.p,o=e.v,u=e.s==1,s=0;if(r&&!i(t)){Y(function(){if(!i(t)){if(It){if(!B.emit("unhandledRejection",o,t)){}}else if(fe(re.error)){re.error("Unhandled promise rejection",o)}}},1e3)}else while(n.length>s)!function(t){var r=u?t.ok:t.fail,n,i;try{if(r){if(!u)e.h=true;n=r===true?o:r(o);if(n===t.P){t.rej(z(y+"-chain cycle"))}else if(i=a(n)){i.call(n,t.res,t.rej)}else t.res(n)}else t.rej(o)}catch(s){t.rej(s)}}(n[s++]);n.length=0})}function u(e){var t=this,r,n;if(t.d)return;t.d=true;t=t.r||t;try{if(r=a(e)){n={r:t,d:false};r.call(e,we(u,n,1),we(s,n,1))}else{t.v=e;t.s=1;o(t)}}catch(i){s.call(n||{r:t,d:false},i)}}function s(e){var t=this;if(t.d)return;t.d=true;t=t.r||t;t.v=e;t.s=2;o(t,true)}function f(e){var t=gt(e)[Mt];return t!=n?t:e}e=function(t){yt(t);mt(this,e,y);var a={p:this,c:[],s:0,d:false,v:n,h:false};Ct(this,r,a);try{t(we(u,a,1),we(s,a,1))}catch(i){s.call(a,i)}};St(e[w],{then:function(t,a){var i=gt(gt(this)[b])[Mt];var u={ok:fe(t)?t:true,fail:fe(a)?a:false},s=u.P=new(i!=n?i:e)(function(e,t){u.res=yt(e);u.rej=yt(t)}),f=this[r];f.c.push(u);f.s&&o(f);return s},"catch":function(e){return this.then(n,e)}});St(e,{all:function(e){var t=f(this),r=[];return new t(function(n,a){cr(e,false,We,r);var i=r.length,o=j(i);if(i)$e.call(r,function(e,r){t.resolve(e).then(function(e){o[r]=e;--i||n(o)},a)});else n(o)})},race:function(e){var t=f(this);return new t(function(r,n){cr(e,false,function(e){t.resolve(e).then(r,n)})})},reject:function(e){return new(f(this))(function(t,r){r(e)})},resolve:function(e){return se(e)&&r in e&&Pe(e)===this[w]?e:new(f(this))(function(t,r){t(e)})}})}(X||J,kt("record"));ve(e,y);Rt(e);$t(Wt+qt*!le(e),{Promise:e})}(t[y]);!function(){var e=kt("uid"),t=kt("O1"),a=kt("weak"),i=kt("leak"),o=kt("last"),u=kt("first"),s=Et?kt("size"):"size",f=0,l={};function d(a,i,l,c,v,h){var p=v?"set":"add",d=a&&a[w],y={};function g(e,t){if(t!=n)cr(t,v,e[p],e);return e}function m(e,t){var n=d[e];if(r)d[e]=function(e,r){var a=n.call(this,e===0?0:e,r);return t?this:a}}if(!le(a)||!(h||!Zt&&Te(d,O)&&Te(d,"entries"))){a=h?function(t){mt(this,a,i);At(this,e,f++);g(this,t)}:function(e){var r=this;mt(r,a,i);At(r,t,xe(null));At(r,s,0);At(r,o,n);At(r,u,n);g(r,e)};St(St(a[w],l),c);h||!Et||Ee(a[w],"size",{get:function(){return dt(this[s])}})}else{var x=a,P=new a,_=P[p](h?{}:-0,1),E;if(sr(function(e){new a(e)})){a=function(e){mt(this,a,i);return g(new x,e)};a[w]=d;if(r)d[b]=a}h||P[O](function(e,t){E=1/t===-oe});if(E){m("delete");m("has");v&&m("get")}if(E||_!==P)m(p,true)}ve(a,i);Rt(a);y[i]=a;$t(Wt+Jt+qt*!le(a),y);h||nr(a,i,function(e,t){At(this,Ht,{o:e,k:t})},function(){var e=this[Ht],t=e.k,r=e.l;while(r&&r.r)r=r.p;if(!e.o||!(e.l=r=r?r.n:e.o[u])){e.o=n;return ar(1)}if(t==Kt)return ar(0,r.k);if(t==Bt)return ar(0,r.v);return ar(0,[r.k,r.v])},v?Kt+Bt:Bt,!v);return a}function y(t,r){if(!se(t))return(typeof t=="string"?"S":"P")+t;if(De(t))return"F";if(!Te(t,e)){if(!r)return"E";Ct(t,e,++f)}return"O"+t[e]}function g(e,r){var n=y(r),a;if(n!="F")return e[t][n];for(a=e[u];a;a=a.n){if(a.k==r)return a}}function m(e,r,a){var i=g(e,r),f,l;if(i)i.v=a;else{e[o]=i={i:l=y(r,true),k:r,v:a,p:f=e[o],n:n,r:false};if(!e[u])e[u]=i;if(f)f.n=i;e[s]++;if(l!="F")e[t][l]=i}return e}var x={clear:function(){for(var e=this,r=e[t],a=e[u];a;a=a.n){a.r=true;if(a.p)a.p=a.p.n=n;delete r[a.i]}e[u]=e[o]=n;e[s]=0},"delete":function(e){var r=this,n=g(r,e);if(n){var a=n.n,i=n.p;delete r[t][n.i];n.r=true;if(i)i.n=a;if(a)a.p=i;if(r[u]==n)r[u]=a;if(r[o]==n)r[o]=i;r[s]--}return!!n},forEach:function(e){var t=we(e,arguments[1],3),r;while(r=r?r.n:this[u]){t(r.v,r.k,this);while(r&&r.r)r=r.p}},has:function(e){return!!g(this,e)}};V=d(V,c,{get:function(e){var t=g(this,e);return t&&t.v},set:function(e,t){return m(this,e===0?0:e,t)}},x,true);N=d(N,v,{add:function(e){return m(this,e=e===0?0:e,e)}},x);function P(t,r,n){if(De(gt(r)))_(t).set(r,n);else{Te(r,a)||Ct(r,a,{});r[a][t[e]]=n}return t}function _(e){return e[i]||Ct(e,i,new V)[i]}var E={"delete":function(t){if(!se(t))return false;if(De(t))return _(this)["delete"](t);return Te(t,a)&&Te(t[a],this[e])&&delete t[a][this[e]]},has:function(t){if(!se(t))return false;if(De(t))return _(this).has(t);return Te(t,a)&&Te(t[a],this[e])}};L=d(L,h,{get:function(t){if(se(t)){if(De(t))return _(this).get(t);if(Te(t,a))return t[a][this[e]]}},set:function(e,t){return P(this,e,t)}},E,true,true);if(r&&(new L).set(T.freeze(l),7).get(l)!=7){$e.call(qe("delete,has,get,set"),function(e){var t=L[w][e];L[w][e]=function(r,n){if(se(r)&&De(r)){var a=_(this)[e](r,n);return e=="set"?this:a}return t.call(this,r,n)}})}U=d(U,p,{add:function(e){return P(this,e,true)}},E,false,true)}();!function(){function e(e){var t=[],r;for(r in e)t.push(r);At(this,Ht,{o:e,a:t,i:0})}tr(e,a,function(){var e=this[Ht],t=e.a,r;do{if(e.i>=t.length)return ar(1)}while(!((r=t[e.i++])in e.o));return ar(0,r)});function t(e){return function(t){gt(t);try{return e.apply(n,arguments),true}catch(r){return false}}}function r(e,t){var a=arguments.length<3?e:arguments[2],i=Ce(gt(e),t),o;if(i)return Te(i,"value")?i.value:i.get===n?n:i.get.call(a);return se(o=Pe(e))?r(o,t,a):n}function i(e,t,r){var a=arguments.length<4?e:arguments[3],o=Ce(gt(e),t),u,s;if(!o){if(se(s=Pe(e))){return i(s,t,r,a)}o=wt(0)}if(Te(o,"value")){if(o.writable===false||!se(a))return false;u=Ce(a,t)||wt(0);u.value=r;return Ee(a,t,u),true}return o.set===n?false:(o.set.call(a,r),true)}var o=T.isExtensible||Re;var u={apply:we(de,ye,3),construct:function(e,t){var r=yt(arguments.length<3?e:arguments[2])[w],n=xe(se(r)?r:ae),a=ye.call(e,n,t);return se(a)?a:n},defineProperty:t(Ee),deleteProperty:function(e,t){var r=Ce(gt(e),t);return r&&!r.configurable?false:delete e[t]},enumerate:function(t){return new e(gt(t))},get:r,getOwnPropertyDescriptor:function(e,t){return Ce(gt(e),t)},getPrototypeOf:function(e){return Pe(gt(e))},has:function(e,t){return t in e},isExtensible:function(e){return!!o(gt(e))},ownKeys:Ne,preventExtensions:t(T.preventExtensions||Re),set:i};if(_e)u.setPrototypeOf=function(e,t){return _e(gt(e),t),true};$t(Wt,{Reflect:{}});$t(zt,"Reflect",u)}();!function(){$t(Gt,o,{includes:Ke(true)});$t(Gt,u,{at:vt(true)});function e(e){return function(t){var r=Fe(t),n=Ae(t),a=n.length,i=0,o=j(a),u;if(e)while(a>i)o[i]=[u=n[i++],r[u]];else while(a>i)o[i]=r[n[i++]];return o}}$t(zt,a,{getOwnPropertyDescriptors:function(e){var t=Fe(e),r={};$e.call(Ne(t),function(e){Ee(r,e,wt(0,Ce(t,e)))});return r},values:e(false),entries:e(true)});$t(zt,f,{escape:ct(/([\\\-[\]{}()*+?.,^$|])/g,"\\$1",true)})}();!function(e){ge=_t(e+"Get",true);var t=_t(e+v,true),r=_t(e+"Delete",true);$t(zt,d,{referenceGet:ge,referenceSet:t,referenceDelete:r});Ct(ie,ge,Ie);function n(e){if(e){var n=e[w];Ct(n,ge,n.get);Ct(n,t,n.set);Ct(n,r,n["delete"])}}n(V);n(L)}("reference");!function(e){function t(t,r){$e.call(qe(t),function(t){if(t in ne)e[t]=we(de,ne[t],r)})}t("pop,reverse,shift,keys,values,entries",1);t("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3);t("join,slice,concat,push,splice,unshift,sort,lastIndexOf,"+"reduce,reduceRight,copyWithin,fill,turn");$t(zt,o,e)}({});!function(e){if(r&&e&&!(Ft in e[w])){Ct(e[w],Ft,Xt[o])}Xt.NodeList=Xt[o]}(t.NodeList)}(typeof self!="undefined"&&self.Math===Math?self:Function("return this")(),true)},function(e,t,r){(function(t){!function(t){"use strict";var r=Object.prototype.hasOwnProperty;var n;var a=typeof Symbol==="function"&&Symbol.iterator||"@@iterator";var i=typeof e==="object";var o=t.regeneratorRuntime;if(o){if(i){e.exports=o}return}o=t.regeneratorRuntime=i?e.exports:{};function u(e,t,r,n){return new g(e,t,r||null,n||[])}o.wrap=u;function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}var f="suspendedStart";var l="suspendedYield";var c="executing";var v="completed";var h={};function p(){}function d(){}var y=d.prototype=g.prototype;p.prototype=y.constructor=d;d.constructor=p;p.displayName="GeneratorFunction";o.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor;return t?t===p||(t.displayName||t.name)==="GeneratorFunction":false};o.mark=function(e){e.__proto__=d;e.prototype=Object.create(y);return e};o.async=function(e,t,r,n){return new Promise(function(a,i){var o=u(e,t,r,n);var f=c.bind(o.next);var l=c.bind(o["throw"]);function c(e){var t=s(this,null,e);if(t.type==="throw"){i(t.arg);return}var r=t.arg;if(r.done){a(r.value)}else{Promise.resolve(r.value).then(f,l)}}f()})};function g(e,t,r,a){var i=t?Object.create(t.prototype):this;var o=new b(a);var u=f;function p(t,a){if(u===c){throw new Error("Generator is already running")}if(u===v){return P()}while(true){var i=o.delegate;if(i){var p=s(i.iterator[t],i.iterator,a);if(p.type==="throw"){o.delegate=null;t="throw";a=p.arg;continue}t="next";a=n;var d=p.arg;if(d.done){o[i.resultName]=d.value;o.next=i.nextLoc}else{u=l;return d}o.delegate=null}if(t==="next"){if(u===f&&typeof a!=="undefined"){throw new TypeError("attempt to send "+JSON.stringify(a)+" to newborn generator")}if(u===l){o.sent=a}else{delete o.sent}}else if(t==="throw"){if(u===f){u=v;throw a}if(o.dispatchException(a)){t="next";a=n}}else if(t==="return"){o.abrupt("return",a)}u=c;var p=s(e,r,o);if(p.type==="normal"){u=o.done?v:l;var d={value:p.arg,done:o.done};if(p.arg===h){if(o.delegate&&t==="next"){a=n}}else{return d}}else if(p.type==="throw"){u=v;if(t==="next"){o.dispatchException(p.arg)}else{a=p.arg}}}}i.next=p.bind(i,"next");i["throw"]=p.bind(i,"throw");i["return"]=p.bind(i,"return");return i}y[a]=function(){return this};y.toString=function(){return"[object Generator]"};function m(e){var t={tryLoc:e[0]};if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function b(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(m,this);this.reset()}o.keys=function(e){var t=[];for(var r in e){t.push(r)}t.reverse();return function n(){while(t.length){var r=t.pop();if(r in e){n.value=r;n.done=false;return n}}n.done=true;return n}};function x(e){if(e){var t=e[a];if(t){return t.call(e)}if(typeof e.next==="function"){return e}if(!isNaN(e.length)){var i=-1,o=function u(){while(++i<e.length){if(r.call(e,i)){u.value=e[i];u.done=false;return u}}u.value=n;u.done=true;return u};return o.next=o}}return{next:P}}o.values=x;function P(){return{value:n,done:true}}b.prototype={constructor:b,reset:function(){this.prev=0;this.next=0;this.sent=n;this.done=false;this.delegate=null;this.tryEntries.forEach(w);for(var e=0,t;r.call(this,t="t"+e)||e<20;++e){this[t]=null}},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(e){if(this.done){throw e}var t=this;function n(r,n){o.type="throw";o.arg=e;t.next=r;return!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];var o=i.completion;if(i.tryLoc==="root"){return n("end")}if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc");var s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc){return n(i.catchLoc,true)}else if(this.prev<i.finallyLoc){return n(i.finallyLoc)}}else if(u){if(this.prev<i.catchLoc){return n(i.catchLoc,true)}}else if(s){if(this.prev<i.finallyLoc){return n(i.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}if(i&&(e==="break"||e==="continue")&&i.tryLoc<=t&&t<i.finallyLoc){i=null}var o=i?i.completion:{};o.type=e;o.arg=t;if(i){this.next=i.finallyLoc}else{this.complete(o)}return h},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=e.arg;this.next="end"}else if(e.type==="normal"&&t){this.next=t}return h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){return this.complete(r.completion,r.afterLoc)}}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(n.type==="throw"){var a=n.arg;w(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:x(e),resultName:t,nextLoc:r};return h}}}(typeof t==="object"?t:typeof window==="object"?window:this)}).call(t,function(){return this}())},function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];for(var n=e[Symbol.iterator](),a;!(a=n.next()).done;){r.push(a.value);if(t&&r.length===t)break}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var a=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.configurable=true;if(n.value)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var s=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var f=function(){function e(){s(this,e);this._vertices=new Map;this._edges=new Map;this._reverseEdges=new Map;this._vertexCount=0;this._edgeCount=0}u(e,[{key:"addNewVertex",value:function t(r,n){if(this.hasVertex(r)){throw new e.VertexExistsError(r,this._vertices.get(r))}this._vertices.set(r,n);this._edges.set(r,new Map);this._reverseEdges.set(r,new Set);this._vertexCount+=1}},{key:"setVertex",value:function r(t,n){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}this._vertices.set(t,n)}},{key:"ensureVertex",value:function a(e,t){if(!this.hasVertex(e)){this.addNewVertex(e,t)}}},{key:"addVertex",value:function i(e,t){if(this.hasVertex(e)){this.setVertex(e,t)}else{this.addNewVertex(e,t)}}},{key:"removeExistingVertex",value:function o(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}if(this._edges.get(t).size>0||this._reverseEdges.get(t).size>0){throw new e.HasConnectedEdgesError(t)}this._vertices["delete"](t);this._vertexCount-=1}},{key:"destroyExistingVertex",value:function f(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}var r=true;var a=false;var i=undefined;try{for(var o=this.verticesFrom(t)[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var s=n(u.value,1);var f=s[0];this.removeEdge(t,f)}}catch(l){a=true;i=l}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(a){throw i}}}var c=true;var v=false;var h=undefined;try{for(var p=this.verticesTo(t)[Symbol.iterator](),d;!(c=(d=p.next()).done);c=true){var y=n(d.value,1);var g=y[0];this.removeEdge(g,t)}}catch(l){v=true;h=l}finally{try{if(!c&&p["return"]){p["return"]()}}finally{if(v){throw h}}}this.removeExistingVertex(t)}},{key:"removeVertex",value:function l(e){if(this.hasVertex(e)){this.removeExistingVertex(e)}}},{key:"destroyVertex",value:function c(e){if(this.hasVertex(e)){this.destroyExistingVertex(e)}}},{key:"vertexCount",value:function v(){return this._vertexCount}},{key:"hasVertex",value:function h(e){return this._vertices.has(e)}},{key:"vertexValue",value:function p(e){return this._vertices.get(e)}},{key:"addNewEdge",value:function d(t,r,n){if(this.hasEdge(t,r)){throw new e.EdgeExistsError(t,r,this.edgeValue(t,r))}if(!this.hasVertex(t)){if(this.hasVertex(r)){throw new e.VertexNotExistsError(t)}else{throw new e.VertexNotExistsError(t).v(r)}}else if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}this._edges.get(t).set(r,n);this._reverseEdges.get(r).add(t);this._edgeCount+=1}},{key:"createNewEdge",value:function y(t,r,n){if(this.hasEdge(t,r)){throw new e.EdgeExistsError(t,r,this.edgeValue(t,r))}this.ensureVertex(t);this.ensureVertex(r);this.addNewEdge(t,r,n)}},{key:"setEdge",value:function g(t,r,n){if(!this.hasEdge(t,r)){
throw new e.EdgeNotExistsError(t,r)}this._edges.get(t).set(r,n)}},{key:"spanEdge",value:function m(t,r,n){if(!this.hasVertex(t)){if(this.hasVertex(r)){throw new e.VertexNotExistsError(t)}else{throw new e.VertexNotExistsError(t).v(r)}}else if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}if(!this.hasEdge(t,r)){this.addNewEdge(t,r,n)}}},{key:"addEdge",value:function w(e,t,r){if(this.hasEdge(e,t)){this.setEdge(e,t,r)}else{this.addNewEdge(e,t,r)}}},{key:"ensureEdge",value:function b(e,t,r){if(!this.hasEdge(e,t)){this.createNewEdge(e,t,r)}}},{key:"createEdge",value:function x(e,t,r){if(this.hasEdge(e,t)){this.setEdge(e,t,r)}else{this.createNewEdge(e,t,r)}}},{key:"removeExistingEdge",value:function P(t,r){if(!this.hasEdge(t,r)){throw new e.EdgeNotExistsError(t,r)}this._edges.get(t)["delete"](r);this._reverseEdges.get(r)["delete"](t);this._edgeCount-=1}},{key:"removeEdge",value:function _(e,t){if(this.hasEdge(e,t)){this.removeExistingEdge(e,t)}}},{key:"edgeCount",value:function E(){return this._edgeCount}},{key:"hasEdge",value:function O(e,t){return this.hasVertex(e)&&this.hasVertex(t)&&this._edges.has(e)&&this._edges.get(e).has(t)}},{key:"edgeValue",value:function C(e,t){return this.hasEdge(e,t)?this._edges.get(e).get(t):undefined}},{key:"vertices",value:regeneratorRuntime.mark(function A(){var e=this;var t,r,a,i,o,u,s,f,l;return regeneratorRuntime.wrap(function c(v){while(1)switch(v.prev=v.next){case 0:t=new Set;r=true;a=false;i=undefined;v.prev=4;o=e._vertices[Symbol.iterator]();case 6:if(r=(u=o.next()).done){v.next=17;break}s=n(u.value,2);f=s[0];l=s[1];if(!(e.hasVertex(f)&&!t.has(f))){v.next=14;break}t.add(f);v.next=14;return[f,l];case 14:r=true;v.next=6;break;case 17:v.next=23;break;case 19:v.prev=19;v.t0=v["catch"](4);a=true;i=v.t0;case 23:v.prev=23;v.prev=24;if(!r&&o["return"]){o["return"]()}case 26:v.prev=26;if(!a){v.next=29;break}throw i;case 29:return v.finish(26);case 30:return v.finish(23);case 31:case"end":return v.stop()}},A,this,[[4,19,23,31],[24,,26,30]])})},{key:Symbol.iterator,value:function(){return this.vertices()}},{key:"edges",value:regeneratorRuntime.mark(function k(){var e=this;var t,r,n,a,i,o,u,s,f,l,c,v,h;return regeneratorRuntime.wrap(function p(d){while(1)switch(d.prev=d.next){case 0:t=new Map;r=true;n=false;a=undefined;d.prev=4;i=e._edges.keys()[Symbol.iterator]();case 6:if(r=(o=i.next()).done){d.next=40;break}u=o.value;if(!t.has(u)){t.set(u,new Set)}s=true;f=false;l=undefined;d.prev=12;c=e._edges.get(u).keys()[Symbol.iterator]();case 14:if(s=(v=c.next()).done){d.next=23;break}h=v.value;if(!(e.hasEdge(u,h)&&!t.get(u).has(h))){d.next=20;break}t.get(u).add(h);d.next=20;return[u,h,e._edges.get(u).get(h)];case 20:s=true;d.next=14;break;case 23:d.next=29;break;case 25:d.prev=25;d.t1=d["catch"](12);f=true;l=d.t1;case 29:d.prev=29;d.prev=30;if(!s&&c["return"]){c["return"]()}case 32:d.prev=32;if(!f){d.next=35;break}throw l;case 35:return d.finish(32);case 36:return d.finish(29);case 37:r=true;d.next=6;break;case 40:d.next=46;break;case 42:d.prev=42;d.t2=d["catch"](4);n=true;a=d.t2;case 46:d.prev=46;d.prev=47;if(!r&&i["return"]){i["return"]()}case 49:d.prev=49;if(!n){d.next=52;break}throw a;case 52:return d.finish(49);case 53:return d.finish(46);case 54:case"end":return d.stop()}},k,this,[[4,42,46,54],[12,25,29,37],[30,,32,36],[47,,49,53]])})},{key:"verticesFrom",value:function S(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return this._verticesFrom(t)}},{key:"_verticesFrom",value:regeneratorRuntime.mark(function D(e){var t=this;var r,n,a,i,o,u,s;return regeneratorRuntime.wrap(function f(l){while(1)switch(l.prev=l.next){case 0:r=new Set;n=true;a=false;i=undefined;l.prev=4;o=t._edges.get(e).keys()[Symbol.iterator]();case 6:if(n=(u=o.next()).done){l.next=15;break}s=u.value;if(!(t.hasEdge(e,s)&&!r.has(s))){l.next=12;break}r.add(s);l.next=12;return[s,t._vertices.get(s),t._edges.get(e).get(s)];case 12:n=true;l.next=6;break;case 15:l.next=21;break;case 17:l.prev=17;l.t3=l["catch"](4);a=true;i=l.t3;case 21:l.prev=21;l.prev=22;if(!n&&o["return"]){o["return"]()}case 24:l.prev=24;if(!a){l.next=27;break}throw i;case 27:return l.finish(24);case 28:return l.finish(21);case 29:case"end":return l.stop()}},D,this,[[4,17,21,29],[22,,24,28]])})},{key:"verticesTo",value:function T(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return this._verticesTo(t)}},{key:"_verticesTo",value:regeneratorRuntime.mark(function j(e){var t=this;var r,n,a,i,o,u,s;return regeneratorRuntime.wrap(function f(l){while(1)switch(l.prev=l.next){case 0:r=new Set;n=true;a=false;i=undefined;l.prev=4;o=t._reverseEdges.get(e)[Symbol.iterator]();case 6:if(n=(u=o.next()).done){l.next=15;break}s=u.value;if(!(t.hasEdge(s,e)&&!r.has(s))){l.next=12;break}r.add(s);l.next=12;return[s,t._vertices.get(s),t._edges.get(s).get(e)];case 12:n=true;l.next=6;break;case 15:l.next=21;break;case 17:l.prev=17;l.t4=l["catch"](4);a=true;i=l.t4;case 21:l.prev=21;l.prev=22;if(!n&&o["return"]){o["return"]()}case 24:l.prev=24;if(!a){l.next=27;break}throw i;case 27:return l.finish(24);case 28:return l.finish(21);case 29:case"end":return l.stop()}},j,this,[[4,17,21,29],[22,,24,28]])})},{key:"verticesWithPathFrom",value:function M(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return this._verticesWithPathFrom(t,new Set)}},{key:"_verticesWithPathFrom",value:regeneratorRuntime.mark(function F(e,t){var r=this;var n,a,i,o,u,s;return regeneratorRuntime.wrap(function f(l){while(1)switch(l.prev=l.next){case 0:n=true;a=false;i=undefined;l.prev=3;o=r._edges.get(e).keys()[Symbol.iterator]();case 5:if(n=(u=o.next()).done){l.next=15;break}s=u.value;if(!(r.hasEdge(e,s)&&!t.has(s))){l.next=12;break}t.add(s);l.next=11;return[s,r._vertices.get(s)];case 11:return l.delegateYield(r._verticesWithPathFrom(s,t),"t5",12);case 12:n=true;l.next=5;break;case 15:l.next=21;break;case 17:l.prev=17;l.t6=l["catch"](3);a=true;i=l.t6;case 21:l.prev=21;l.prev=22;if(!n&&o["return"]){o["return"]()}case 24:l.prev=24;if(!a){l.next=27;break}throw i;case 27:return l.finish(24);case 28:return l.finish(21);case 29:case"end":return l.stop()}},F,this,[[3,17,21,29],[22,,24,28]])})},{key:"verticesWithPathTo",value:function R(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return this._verticesWithPathTo(t,new Set)}},{key:"_verticesWithPathTo",value:regeneratorRuntime.mark(function I(e,t){var r=this;var n,a,i,o,u,s;return regeneratorRuntime.wrap(function f(l){while(1)switch(l.prev=l.next){case 0:n=true;a=false;i=undefined;l.prev=3;o=r._reverseEdges.get(e)[Symbol.iterator]();case 5:if(n=(u=o.next()).done){l.next=15;break}s=u.value;if(!(r.hasEdge(s,e)&&!t.has(s))){l.next=12;break}t.add(s);l.next=11;return[s,r._vertices.get(s)];case 11:return l.delegateYield(r._verticesWithPathTo(s,t),"t7",12);case 12:n=true;l.next=5;break;case 15:l.next=21;break;case 17:l.prev=17;l.t8=l["catch"](3);a=true;i=l.t8;case 21:l.prev=21;l.prev=22;if(!n&&o["return"]){o["return"]()}case 24:l.prev=24;if(!a){l.next=27;break}throw i;case 27:return l.finish(24);case 28:return l.finish(21);case 29:case"end":return l.stop()}},I,this,[[3,17,21,29],[22,,24,28]])})},{key:"vertices_topologically",value:regeneratorRuntime.mark(function V(){var t=this;var r=regeneratorRuntime.mark(function p(t){var r,u,s,f,l,c,v,h,d;return regeneratorRuntime.wrap(function y(g){while(1)switch(g.prev=g.next){case 0:a.push(t);r=a.indexOf(t);if(!(r!==a.length-1)){g.next=5;break}u=a.slice(r+1).reverse();throw new e.CycleError(u);case 5:if(i.has(t)){g.next=36;break}s=true;f=false;l=undefined;g.prev=9;c=o.verticesTo(t)[Symbol.iterator]();case 11:if(s=(v=c.next()).done){g.next=18;break}h=n(v.value,1);d=h[0];return g.delegateYield(p(d),"t9",15);case 15:s=true;g.next=11;break;case 18:g.next=24;break;case 20:g.prev=20;g.t10=g["catch"](9);f=true;l=g.t10;case 24:g.prev=24;g.prev=25;if(!s&&c["return"]){c["return"]()}case 27:g.prev=27;if(!f){g.next=30;break}throw l;case 30:return g.finish(27);case 31:return g.finish(24);case 32:if(!o.hasVertex(t)){g.next=35;break}g.next=35;return[t,o._vertices.get(t)];case 35:i.add(t);case 36:a.pop();case 37:case"end":return g.stop()}},p,this,[[9,20,24,32],[25,,27,31]])});var a,i,o,u,s,f,l,c,v,h;return regeneratorRuntime.wrap(function d(e){while(1)switch(e.prev=e.next){case 0:a=[];i=new Set;o=t;u=true;s=false;f=undefined;e.prev=6;l=t.vertices()[Symbol.iterator]();case 8:if(u=(c=l.next()).done){e.next=16;break}v=n(c.value,1);h=v[0];if(i.has(h)){e.next=13;break}return e.delegateYield(r(h),"t11",13);case 13:u=true;e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18;e.t12=e["catch"](6);s=true;f=e.t12;case 22:e.prev=22;e.prev=23;if(!u&&l["return"]){l["return"]()}case 25:e.prev=25;if(!s){e.next=28;break}throw f;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}},V,this,[[6,18,22,30],[23,,25,29]])})},{key:"clearEdges",value:function N(){var e=true;var t=false;var r=undefined;try{for(var a=this.edges()[Symbol.iterator](),i;!(e=(i=a.next()).done);e=true){var o=n(i.value,2);var u=o[0];var s=o[1];this.removeEdge(u,s)}}catch(f){t=true;r=f}finally{try{if(!e&&a["return"]){a["return"]()}}finally{if(t){throw r}}}}},{key:"clear",value:function L(){var e=true;var t=false;var r=undefined;try{for(var a=this.vertices()[Symbol.iterator](),i;!(e=(i=a.next()).done);e=true){var o=n(i.value,1);var u=o[0];this.destroyVertex(u)}}catch(s){t=true;r=s}finally{try{if(!e&&a["return"]){a["return"]()}}finally{if(t){throw r}}}}},{key:"equals",value:function U(){var t=arguments[0]===undefined?undefined:arguments[0];var r=arguments[1]===undefined?function(e,t,r,n){return e===t}:arguments[1];if(!(t instanceof e)){return false}if(this.vertexCount()!==t.vertexCount()){return false}if(this.edgeCount()!==t.edgeCount()){return false}var a=true;var i=false;var o=undefined;try{for(var u=this.vertices()[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var f=n(s.value,2);var l=f[0];var c=f[1];if(!t.hasVertex(l)){return false}if(!r(c,t.vertexValue(l),l)){return false}}}catch(v){i=true;o=v}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}var h=true;var p=false;var d=undefined;try{for(var y=this.edges()[Symbol.iterator](),g;!(h=(g=y.next()).done);h=true){var m=n(g.value,3);var w=m[0];var b=m[1];var c=m[2];if(!t.hasEdge(w,b)){return false}if(!r(c,t.edgeValue(w,b),w,b)){return false}}}catch(v){p=true;d=v}finally{try{if(!h&&y["return"]){y["return"]()}}finally{if(p){throw d}}}return true}},{key:"hasCycle",value:function q(){var e=this;var t=new Set;var r=new Set;var a=function(i){if(t.has(i)){return true}if(r.has(i)){return false}r.add(i);t.add(i);var o=true;var u=false;var s=undefined;try{for(var f=e.verticesFrom(i)[Symbol.iterator](),l;!(o=(l=f.next()).done);o=true){var c=n(l.value,1);var v=c[0];if(a(v)){return true}}}catch(h){u=true;s=h}finally{try{if(!o&&f["return"]){f["return"]()}}finally{if(u){throw s}}}t["delete"](i)};var i=true;var o=false;var u=undefined;try{for(var s=this.vertices()[Symbol.iterator](),f;!(i=(f=s.next()).done);i=true){var l=n(f.value,1);var c=l[0];if(a(c)){return true}}}catch(v){o=true;u=v}finally{try{if(!i&&s["return"]){s["return"]()}}finally{if(o){throw u}}}return false}},{key:"hasPath",value:function W(e,t){var r=this;if(!this.hasVertex(e)||!this.hasVertex(t)){return false}var a=new Set;var i=function(e){if(r.hasEdge(e,t)){return true}a.add(e);var o=true;var u=false;var s=undefined;try{for(var f=r.verticesFrom(e)[Symbol.iterator](),l;!(o=(l=f.next()).done);o=true){var c=n(l.value,1);var v=c[0];if(!a.has(v)&&i(v)){return true}}}catch(h){u=true;s=h}finally{try{if(!o&&f["return"]){f["return"]()}}finally{if(u){throw s}}}a["delete"](e);return false};return i(e)}},{key:"clone",value:function z(){var t=arguments[0]===undefined?function(e){return e}:arguments[0];var r=new e;var a=true;var i=false;var o=undefined;try{for(var u=this.vertices()[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var f=n(s.value,2);var l=f[0];var c=f[1];r.addVertex(l,t(c,l))}}catch(v){i=true;o=v}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}var h=true;var p=false;var d=undefined;try{for(var y=this.edges()[Symbol.iterator](),g;!(h=(g=y.next()).done);h=true){var m=n(g.value,3);var w=m[0];var b=m[1];var c=m[2];r.addEdge(w,b,t(c,w,b))}}catch(v){p=true;d=v}finally{try{if(!h&&y["return"]){y["return"]()}}finally{if(p){throw d}}}return r}},{key:"transitiveReduction",value:function G(){var e=arguments[0]===undefined?function(e){return e}:arguments[0];var t=this.clone(e);var r=true;var a=false;var i=undefined;try{for(var o=this.vertices()[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var s=n(u.value,1);var f=s[0];var l=true;var c=false;var v=undefined;try{for(var h=this.vertices()[Symbol.iterator](),p;!(l=(p=h.next()).done);l=true){var d=n(p.value,1);var y=d[0];if(t.hasEdge(f,y)){var g=true;var m=false;var w=undefined;try{for(var b=this.vertices()[Symbol.iterator](),x;!(g=(x=b.next()).done);g=true){var P=n(x.value,1);var _=P[0];if(t.hasPath(y,_)){t.removeEdge(f,_)}}}catch(E){m=true;w=E}finally{try{if(!g&&b["return"]){b["return"]()}}finally{if(m){throw w}}}}}}catch(E){c=true;v=E}finally{try{if(!l&&h["return"]){h["return"]()}}finally{if(c){throw v}}}}}catch(E){a=true;i=E}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(a){throw i}}}return t}}]);return e}();e.exports=f;f.VertexExistsError=function(e){function t(e,r){s(this,t);this.vertices=new Set;this.v(e,r)}o(t,e);i(t,{v:{value:function r(e,t){this.vertices.add({key:e,value:t});this._refreshMessage();return this}},_refreshMessage:{value:function n(){var e=this.vertices.size===1?"a vertex":"vertices";this.message="This graph has "+e+" '"+[].concat(a(this.vertices)).map(function(e){return e.key}).join("', '")+"'"}}});return t}(Error);f.VertexNotExistsError=function(e){function t(e){s(this,t);this.vertices=new Set;this.v(e)}o(t,e);i(t,{v:{value:function r(e){this.vertices.add({key:e});this._refreshMessage();return this}},_refreshMessage:{value:function n(){var e=this.vertices.size===1?"a vertex":"vertices";this.message="This graph does not have "+e+" '"+[].concat(a(this.vertices)).map(function(e){return e.key}).join("', '")+"'"}}});return t}(Error);f.EdgeExistsError=function(e){function t(e,r,n){s(this,t);this.edges=new Set;this.e(e,r,n)}o(t,e);i(t,{e:{value:function r(e,t,n){this.edges.add({from:e,to:t,value:n});this._refreshMessage();return this}},_refreshMessage:{value:function n(){var e=[];var t=true;var r=false;var n=undefined;try{for(var a=this.edges[Symbol.iterator](),i;!(t=(i=a.next()).done);t=true){var o=i.value;var u=o.from;var s=o.to;e.push("('"+u+"', '"+s+"')")}}catch(f){r=true;n=f}finally{try{if(!t&&a["return"]){a["return"]()}}finally{if(r){throw n}}}var l=e.length===1?"an edge":"edges";this.message="This graph has "+l+" "+e.join(", ")}}});return t}(Error);f.EdgeNotExistsError=function(e){function t(e,r){s(this,t);this.edges=new Set;this.e(e,r)}o(t,e);i(t,{e:{value:function r(e,t){this.edges.add({from:e,to:t});this._refreshMessage();return this}},_refreshMessage:{value:function n(){var e=[];var t=true;var r=false;var n=undefined;try{for(var a=this.edges[Symbol.iterator](),i;!(t=(i=a.next()).done);t=true){var o=i.value;var u=o.from;var s=o.to;e.push("('"+u+"', '"+s+"')")}}catch(f){r=true;n=f}finally{try{if(!t&&a["return"]){a["return"]()}}finally{if(r){throw n}}}var l=e.length===1?"an edge":"edges";this.message="This graph does not have "+l+" "+e.join(", ")}}});return t}(Error);f.HasConnectedEdgesError=function(e){function t(e){s(this,t);this.key=e;this.message="The '"+e+"' vertex has connected edges"}o(t,e);return t}(Error);f.CycleError=function(e){function t(e){s(this,t);this.cycle=e;this.message="This graph contains a cycle: "+e}o(t,e);return t}(Error)},function(e,t,r){"use strict";var n=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var a=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function h(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return h(a,t,r)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var o=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var u=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var s=r(4);var f=s.indent;var l=s.oncePer;var c=s.arraysEqual;var v=s.t;e.exports=l("Composed",function(e){e.newOperationType("Composed",function(t){function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}u(this,r);i(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,t);this._components=this.arg||[];this.options=t[1]||{}}o(r,t);a(r,{clone:{value:function s(){var e=i(Object.getPrototypeOf(r.prototype),"clone",this).call(this);e._components=this._components.map(function(e){return e.clone()});return e}},applyTo:{value:function l(e){var t=arguments[1]===undefined?{}:arguments[1];var r=true;var n=false;var a=undefined;try{for(var i=this._components[Symbol.iterator](),o;!(r=(o=i.next()).done);r=true){var u=o.value;u.applyTo(e,t)}}catch(s){n=true;a=s}finally{try{if(!r&&i["return"]){i["return"]()}}finally{if(n){throw a}}}}},toString:{value:function c(){var e=arguments[0]===undefined?{}:arguments[0];var t=i(Object.getPrototypeOf(r.prototype),"toString",this).call(this,e);if(this._components.length>0){var n="";var a=true;var o=false;var u=undefined;try{for(var s=this._components[Symbol.iterator](),l;!(a=(l=s.next()).done);a=true){var c=l.value;n+="• "+c.toString(e)+"\n"}}catch(v){o=true;u=v}finally{try{if(!a&&s["return"]){s["return"]()}}finally{if(o){throw u}}}t+="\n"+f(n,4)}return t}},precondition:{value:function v(e,t){if(this._components.length===0){return true}return this._components[0].precondition(e,t)}},_collapse:{value:function h(){var t=this;this._components=function(){var r=[];var a=true;var i=false;var o=undefined;try{for(var u=t._components[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var f=s.value;if(f instanceof e.Delta.Composed){f._collapse();r.push.apply(r,n(f._components))}else{r.push(f)}}}catch(l){i=true;o=l}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}return r}();var r=undefined;do{r=false;this._components=function(){var n=[];for(var a=0;a<t._components.length-1;a+=1){var i=t._components[a].composedWith(t._components[a+1],t.options);if(i instanceof e.Delta.Composed){n.push(t._components[a])}else{n.push(i);r=true;a+=1}}if(a===t._components.length-1){n.push(t._components[a])}return n}()}while(r)}},methods:{get:function(){return[]}}});return r}(e.Delta));e.newComposition(function(t,r){return t instanceof e.Delta.Composed||r instanceof e.Delta.Composed},function(t,r,a){var i=t instanceof e.Delta.Composed?t._components:[t];var o=r instanceof e.Delta.Composed?r._components:[r];var u=new e.Delta.Composed([].concat(n(i),n(o)),a);u._collapse();return u});e.newEquality(v("Composed","Composed"),function(e,t){return c(e._components,t._components,function(e,t){return e.equals(t)})})})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var o=n(r(22));var u=r(4);var s=u.extend;var f=u.oncePer;var l=n(r(9));e.exports=f("Proxy",function(e){l(e);e.Proxy=function(){function e(){var t=arguments[0]===undefined?{}:arguments[0];var r=t.parent;var n=t.delta;i(this,e);this._parent=r;this._active=true;this._delta=n}a(e,{delta:{value:function t(){return this._delta}},active:{get:function(){return this._active}},deactivate:{value:function r(){this._active=false}}});return e}();s(e.Delta.prototype,{"do":function t(){var e;for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n]}var a=this.constructor.Proxy;if(!a){throw new Error("Calling 'do' on delta type '"+this.type+"', which has no Proxy interface.")}return(e=new a({delta:this}))["do"].apply(e,r)}})})}])});
//# sourceMappingURL=dist/delta.full.min.js.map