(function e(t,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r();else if(typeof define==="function"&&define.amd)define(r);else if(typeof exports==="object")exports["DeltaJs"]=r();else t["DeltaJs"]=r()})(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:false};e[n].call(i.exports,i,i.exports,r);i.loaded=true;return i.exports}r.m=e;r.c=t;r.p="";return r(0)}([function(e,t,r){r(1);e.exports=r(2)},function(e,t,r){e.exports=r(3)},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var i=r(4).extend;var o=n(r(5));var a=r(6);var u=a.ReadableTarget;var s=a.WritableTarget;i(o,{ReadableTarget:u,WritableTarget:s});var c=n(r(7));i(o,{Path:c});var f=r(8);var l=f.ApplicationError;var h=f.PreconditionFailure;var v=f.MultipleOverloadsApplicationError;var p=f.NoOverloadsApplicationError;var d=f.CompositionError;var y=f.MultipleOverloadsCompositionError;var g=f.ConstraintFailure;var m=f.ApplicationOrderCycle;var w=f.UnresolvedDeltaConflict;var b=f.MultipleActiveProxiesError;i(o,{ApplicationError:l,PreconditionFailure:h,MultipleOverloadsApplicationError:v,NoOverloadsApplicationError:p,CompositionError:d,MultipleOverloadsCompositionError:y,ConstraintFailure:g,ApplicationOrderCycle:m,UnresolvedDeltaConflict:w,MultipleActiveProxiesError:b});e.exports=o},function(e,t,r){(function(e){"use strict";if(e._babelPolyfill){throw new Error("only one instance of babel/polyfill is allowed")}e._babelPolyfill=true;r(21);r(20)}).call(t,function(){return this}())},function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];for(var n=e[Symbol.iterator](),i;!(i=n.next()).done;){r.push(i.value);if(t&&r.length===t)break}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var i=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var o=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})};t.extend=a;t.o=s;t.a=c;t.assert=f;t.isUndefined=l;t.isDefined=h;t.repeat=v;t.indent=p;t.oncePer=d;t.customIndexOf=m;t.arraysEqual=w;t.arraysHaveSameElements=b;t.objectsEqual=x;t.graphDescendants=E;Object.defineProperty(t,"__esModule",{value:true});function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}r.forEach(function(t){for(var r in t){if(t.hasOwnProperty(r)){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}}});return e}function u(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}var o=r.slice(0,-1);var a=r[r.length-1];if(o.length===0){return e}var u=s.apply(undefined,[e].concat(i(o.slice(0,-1))));if(l(u[o[o.length-1]])){u[o[o.length-1]]=a}return u[o[o.length-1]]}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}return u.apply(undefined,[e].concat(r,[{}]))}function c(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}return u.apply(undefined,[e].concat(r,[[]]))}function f(e,t){if(!e){throw new Error(t||"Assertion failed")}}function l(e){return typeof e==="undefined"}function h(e){return typeof e!=="undefined"}function v(e,t){return new Array(e+1).join(t)}function p(e,t){var r=arguments[2]===undefined?" ":arguments[2];return e.replace(/^(?!\s*$)/gm,v(t,r))}function d(e,t,r){var i=function(e){var n="_once per: "+t;if(e[n]){return}e[n]=true;return r.call(e,e)};if(typeof e==="string"){var o=[e,t];var a=n(o,2);t=a[0];r=a[1];return i}else{return i(e)}}var y=function(e,t){return function(r,n){return r.type===e&&n.type===t}};t.t=y;var g=function(e){return function(t,r){if(typeof r==="string"){r=function(e){return function(t){return t[e]}}(r)}return function(n,i){return new e.Delta[t](r&&r({d1:n,d2:i,p1:n.arg,p2:i.arg}))}}};t.define_d=g;function m(e,t){var r=arguments[2]===undefined?function(e,t){return e===t}:arguments[2];for(var n=0;n<e.length;++n){if(r(e[n],t)){return n}}return-1}function w(e,t){var r=arguments[2]===undefined?function(e,t){return e===t}:arguments[2];if(e.length!==t.length){return false}for(var n=0;n<e.length;++n){if(!r(e[n],t[n])){return false}}return true}function b(e,t){var r=arguments[2]===undefined?function(e,t){return e===t}:arguments[2];if(e.length!==t.length){return false}var n=[].concat(i(t));for(var o=0;o<e.length;++o){var a=false;for(var u=0;u<n.length;++u){if(r(e[o],n[u])){n.splice(u,1);a=true;break}}if(!a){return false}}return true}function x(e,t){var r=arguments[2]===undefined?function(e,t){return e===t}:arguments[2];var n=Object.keys(e);var i=Object.keys(t);if(n.length!==i.length){return false}n.sort();i.sort();for(var o=0;o<n.length;++o){if(n[o]!==i[o]){return false}if(!r(e[n[o]],t[i[o]])){return false}}return true}function E(e,t){return Object.keys(function r(t){return a.apply(undefined,[o({},t,true)].concat(i(e.successors(t).map(function(e){return r(e)}))))}(t))}},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var i=function(e,t){var r=Object.create(e.prototype);var n=e.apply(r,t);return n!=null&&(typeof n=="object"||typeof n=="function")?n:r};var o=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var u=n(r(22));var s=r(4);var c=s.extend;var f=s.assert;var l=s.isUndefined;var h=s.isDefined;var v=s.arraysEqual;var p=n(r(7));var d=r(6);var y=d.ReadableTarget;var g=d.WritableTarget;var m=d.rt;var w=d.wt;var b=n(r(9));var x=n(r(10));var E=n(r(11));var _=n(r(12));var O=n(r(13));var P=n(r(14));var C=n(r(15));var k=n(r(16));var j=n(r(17));var A=n(r(18));var D=n(r(19));var T=function(){function e(){a(this,e);D(this);b(this);x(this);E(this);_(this);O(this);P(this);C(this);k(this);j(this);A(this)}o(e,{newOperationType:{value:function t(r,n,o){var a=this;f(r[0]===r[0].toUpperCase(),"Delta operation classes must have a name starting with a capital letter - '"+r+"' does not.");f(l(this.Delta[r]),"The '"+r+"' operation type already exists.");this.Delta[r]=n;n.Proxy=o;var u=n.prototype.applyTo||function(){};var s=n.prototype.refines;var p=n.prototype.equals;var d=n.prototype.commutesWith;var y=n.prototype.resolves;c(n.prototype,{applyTo:function m(t){var r=arguments[1]===undefined?{}:arguments[1];if(!this.selected){return}if(!(t instanceof e.ReadableTarget)){t=new e.ReadableTarget(t)}var n=this.evaluatePrecondition(t);if(n!==true){throw n}u.call(this,t,r)},refines:function w(e){if(this.type!==e.type){return false}if(h(s)){return s.call(this,e)}else{return this.equals(e)}},equals:function b(e){if(this.type!==e.type){return false}if(h(p)){return p.call(this,e)}else if(h(s)){return this.refines(e)&&e.refines(this)}else{return v(this.args,e.args)}},commutesWith:function x(e){if(h(d)){return d.call(this,e)}else{return this.composedWith(e).equals(e.composedWith(this))}},resolves:function E(e,t){if(h(y)){return y.call(this,e,t)}else{return e.composedWith(t).composedWith(this).equals(t.composedWith(e).composedWith(this))}},type:r});var g=r[0].toLowerCase()+r.slice(1);(n.prototype.methods||[g]).forEach(function(e){a.ContainerProxy.newProxyMethod(e,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i(n,t)})});return n}},newProxyMethod:{value:function r(e,t){this.ContainerProxy.newProxyMethod(e,t)}}});return e}();e.exports=T},function(e,t,r){"use strict";var n=function l(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var i=Object.getPrototypeOf(e);if(i===null){return undefined}else{return l(i,t,r)}}else if("value"in n&&n.writable){return n.value}else{var o=n.get;if(o===undefined){return undefined}return o.call(r)}};var i=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var o=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};t.wt=c;t.rt=f;Object.defineProperty(t,"__esModule",{value:true});var u=t.ReadableTarget=function(){function e(t){a(this,e);this._val=t}o(e,{getValue:{value:function t(){return this._val}},value:{get:function(){return this.getValue()},set:function(e){this.setValue(e)}}});return e}();var s=t.WritableTarget=function(e){function t(e,r){a(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._obj=e;this._prop=r}i(t,e);o(t,{getValue:{value:function r(){return this._obj[this._prop]}},setValue:{value:function u(e){this._obj[this._prop]=e}},"delete":{value:function s(){delete this._obj[this._prop]}}});return t}(u);function c(e,t){return new s(e,t)}function f(e,t){return new u(e,t)}},function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];for(var n=e[Symbol.iterator](),i;!(i=n.next()).done;){r.push(i.value);if(t&&r.length===t)break}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var a=r(4);var u=a.assert;var s=a.isDefined;var c=function(){function e(){var t=arguments[0]===undefined?"":arguments[0];o(this,e);var r=t.match(/^([.#]?)(\w*|\(\w+\))(.*)$/);u(r,"The path string '"+t+"' is not well formed.");var i=n(r,4);var a=i[1];var s=i[2];var c=i[3];if(a==="#"){this.set(new e(".(instance)."+s+""+c))}else if(s!==""){this._prop=s;if(c!==""){this._rest=new e(c)}}}i(e,{set:{value:function t(e){this._prop=e._prop;this._rest=e._rest}},prop:{get:function(){return this._prop}},rest:{get:function(){return this._rest}},toString:{value:function r(){var e="";if(s(this.prop)){e+=this.prop;if(s(this.rest)){e+="."+this.rest.toString()}}return e}}});return e}();e.exports=c},function(e,t,r){"use strict";var n=function y(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var i=Object.getPrototypeOf(e);if(i===null){return undefined}else{return y(i,t,r)}}else if("value"in n&&n.writable){return n.value}else{var o=n.get;if(o===undefined){return undefined}return o.call(r)}};var i=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};Object.defineProperty(t,"__esModule",{value:true});var a=t.ApplicationError=function(e){function t(){o(this,t);if(e!=null){e.apply(this,arguments)}}i(t,e);return t}(Error);var u=t.PreconditionFailure=function(e){function t(e,r){o(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="PreconditionFailure";this.message="This delta of type '"+e.type+"' cannot apply to this value of type '"+typeof r+"'.";this.delta=e;this.value=r}i(t,e);return t}(a);var s=t.MultipleOverloadsApplicationError=function(e){function t(e,r){var i=arguments[2]===undefined?[]:arguments[2];o(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r);this.name="MultipleOverloadsApplicationError";this.message="None of the delta-types "+e.overloads.map(function(e){return"'"+e.type+"'"}).join(",")+" can apply to this value of type '"+typeof r+"'."+i.map(function(e){return"\n-- "+e.message}).join("");this.errors=i}i(t,e);return t}(u);var c=t.NoOverloadsApplicationError=function(e){function t(e,r){o(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r);this.name="NoOverloadsApplicationError";this.message="This delta of type '"+e.type+"' has no specific deltas assigned to it, so it cannot apply to this value of type '"+typeof r+"."}i(t,e);return t}(u);var f=t.CompositionError=function(e){function t(e,r){o(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="CompositionError";this.message="This delta of type '"+e.type+"' cannot be composed with this other delta of type '"+r.type+"'.";this.delta1=e;this.delta2=r}i(t,e);return t}(Error);var l=t.MultipleOverloadsCompositionError=function(e){function t(e,r){var i=arguments[2]===undefined?[]:arguments[2];o(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r);this.name="MultipleOverloadsCompositionError";this.message="There are no overloads to compose this delta of type '"+e.type+"' with this other delta of type '"+r.type+"'."+i.map(function(e){return"\n-- "+e.message}).join("");this.errors=i}i(t,e);return t}(f);var h=t.ConstraintFailure=function(e){function t(e){o(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="ConstraintFailure";this.message="The feature '"+e.name+"' is both selected and excluded by its constraints.";this.feature=e}i(t,e);return t}(Error);var v=t.ApplicationOrderCycle=function(e){function t(e,r){o(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="ApplicationOrderCycle";this.message="The new application order between "+e+" and "+r+" created a cycle.";this.from=e;this.to=r}i(t,e);return t}(Error);var p=t.UnresolvedDeltaConflict=function(e){function t(e){o(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="UnresolvedDeltaConflict";var r=e.slice(0,-1).map(function(e){return"'"+e+"'"}).join(",");this.message="There is an unresolved conflict between deltas "+r+" and '"+e[e.length-1]+"'.";this.deltaNames=e}i(t,e);return t}(a);var d=t.MultipleActiveProxiesError=function(e){function t(){o(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="MultipleActiveProxiesError";this.message="Only one Proxy per path can be active at any given time."}i(t,e);return t}(Error)},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var a=r(4);var u=a.extend;var s=a.oncePer;var c=r(6);var f=c.ReadableTarget;var l=c.wt;var h=r(8);var v=h.PreconditionFailure;var p=h.CompositionError;var d=n(r(23));e.exports=s("Delta",function(e){s(e.constructor,"Delta",function(){u(e.constructor.prototype,{newComposition:function t(e,r){this.Delta.newComposition(e,r)}})});e.Delta=function(){function t(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}o(this,t);this.id=++e.Delta._nextID;this.args=n}i(t,{arg:{get:function(){return this.args[0]},set:function(e){this.args[0]=e}},clone:{value:function r(){return new this.constructor(this.arg)}},evaluatePrecondition:{value:function n(e){if(this.precondition){var t=this.precondition(e);if(t instanceof v){return t}else if(!t){return new v(this,e.value)}}return true}},appliedTo:{value:function a(e){var t=arguments[1]===undefined?{}:arguments[1];if(e instanceof f){e=e.value}if(typeof e.clone==="function"){e=e.clone()}var r={value:e};this.applyTo(l(r,"value"),t);return r.value}},composedWith:{value:function u(t){return e.Delta.composed(this,t)}},toString:{value:function s(){var e=arguments[0]===undefined?{}:arguments[0];var t=this.type;if(e.targetProp){t+=" ‹"+e.targetProp+"›"}if(this.args.length>0){t+=": "+this.args.map(function(e){return JSON.stringify(e)}).join(",")}if(e.debug){t+=" ("+this.id+")"}return t}}},{newComposition:{value:function c(t,r){e.Delta._compositions.push({precondition:t,compose:r})}},composed:{value:function h(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var o=new e.Delta.NoOp;n.forEach(function(r){var n=o,i=r||new e.Delta.NoOp;var a=function(){};var u=t._compositions.some(function(e){var t=e.precondition;var r=e.compose;if(t(n,i)){a=r;return true}});if(a===false||!u){throw new p(n,i)}if(a===true){a=function(t,r){return new e.Delta.Composed([t,r])}}o=a(n,i)});return o}}});return t}();e.Delta._nextID=0;e.Delta._compositions=[];d(e)})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function g(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var i=Object.getPrototypeOf(e);if(i===null){return undefined}else{return g(i,t,r)}}else if("value"in n&&n.writable){return n.value}else{var o=n.get;if(o===undefined){return undefined}return o.call(r)}};var a=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var u=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var s=n(r(9));var c=r(4);var f=c.indent;var l=c.oncePer;var h=c.arraysEqual;var v=r(8);var p=v.MultipleOverloadsApplicationError;var d=v.NoOverloadsApplicationError;var y=v.MultipleOverloadsCompositionError;e.exports=l("Overloaded",function(e){s(e);e.newOperationType("Overloaded",function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}u(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this.overloads=this.arg||[]}a(t,e);i(t,{clone:{value:function r(){var e=o(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.overloads=this.overloads.map(function(e){return e.clone()});return e}},equals:{value:function n(e){return h(this.overloads,e.overloads,function(e,t){return e.equals(t)})}},applyTo:{value:function s(e){var t=arguments[1]===undefined?{}:arguments[1];var r=[];var n=this.overloads.some(function(n){var i=n.evaluatePrecondition(e);if(i!==true){r.push(i);return false}n.applyTo(e,t);return true});if(!n){if(r.length===0){throw new d(this,e.value)}else if(r.length===1){throw r[0]}else{throw new p(this,e.value,r)}}}},toString:{value:function c(){var e=arguments[0]===undefined?{}:arguments[0];var r=o(Object.getPrototypeOf(t.prototype),"toString",this).call(this,e);var n=this.overloads.map(function(t){return t.toString(e)}).join("\n");r+="\n"+f(n,4);return r}}});return t}(e.Delta));e.newComposition(function(t,r){return t instanceof e.Delta.Overloaded||r instanceof e.Delta.Overloaded},function(t,r){var n=t instanceof e.Delta.Overloaded?t.overloads:[t];var i=r instanceof e.Delta.Overloaded?r.overloads:[r];var o=new e.Delta.Overloaded;var a=[];n.forEach(function(e){i.forEach(function(t){try{o.overloads.push(e.composedWith(t))}catch(r){a.push(r)}})});if(o.overloads.length===0){throw new y(t,r,a)}return o})})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function g(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var i=Object.getPrototypeOf(e);if(i===null){return undefined}else{return g(i,t,r)}}else if("value"in n&&n.writable){return n.value}else{var o=n.get;if(o===undefined){return undefined}return o.call(r)}};var a=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var u=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var s=r(4);var c=s.extend;var f=s.indent;var l=s.t;var h=s.oncePer;var v=s.objectsEqual;var p=n(r(7));var d=r(6).wt;var y=n(r(19));e.exports=h("Modify",function(e){y(e);e.newOperationType("Modify",function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}u(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this.subDeltas={};c(this.subDeltas,this.arg||{})}a(t,e);i(t,{clone:{value:function r(){var e=this;var r=o(Object.getPrototypeOf(t.prototype),"clone",this).call(this);Object.keys(this.subDeltas).forEach(function(t){r.subDeltas[t]=e.subDeltas[t].clone()});return r}},equals:{value:function n(e){return v(this.subDeltas,e.subDeltas,function(e,t){return e.equals(t)})}},precondition:{value:function s(e){return e.value instanceof Object}},applyTo:{value:function l(e){var t=this;var r=arguments[1]===undefined?{}:arguments[1];Object.keys(this.subDeltas).forEach(function(n){if(!r.restrictToProperty||r.restrictToProperty===n){t.subDeltas[n].applyTo(d(e.value,n),c({},r,{restrictToProperty:null}))}})}},toString:{value:function h(){var e=this;var r=arguments[0]===undefined?{}:arguments[0];var n=o(Object.getPrototypeOf(t.prototype),"toString",this).call(this,r);if(Object.keys(this.subDeltas).length>0){var i=Object.keys(this.subDeltas).map(function(t){return e.subDeltas[t].toString(c({},r,{targetProp:t}))}).join("\n");n+="\n"+f(i,4)}return n}}});return t}(e.Delta),function(t){function r(){u(this,r);if(t!=null){t.apply(this,arguments)}}a(r,t);i(r,{processProxyArguments:{value:function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n={};do{if(t.length===0){throw new Error("The argument list for this Modify.Proxy method is insufficient.")}var i=t.shift();if(typeof i==="string"){n.path=i}else{c(n,i)}}while(!n.path);return{options:n,args:t}}},addOperation:{value:function s(t,r){var n=r.path;if(!n.prop){throw new Error("Operations on a Modify.Proxy need to have a non-empty path.")}var i;if(n.rest){var o=c({},r,{path:n.rest});var a=this.addChildProxy(n.prop,new e.Delta.Modify);i=a.addOperation(t,o)}else{i=this.addChildProxy(n.prop,t)}return i}},delta:{value:function f(){var e=this;var t=o(Object.getPrototypeOf(r.prototype),"delta",this).call(this);t.subDeltas={};this.childKeys().forEach(function(r){t.subDeltas[r]=e.childDelta(r)});return t}}});return r}(e.ContainerProxy));e.newComposition(l("Modify","Modify"),function(t,r){var n=t.clone();Object.keys(r.subDeltas).forEach(function(t){n.subDeltas[t]=e.Delta.composed(n.subDeltas[t],r.subDeltas[t])});return n})})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var a=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var u=r(4);var s=u.isUndefined;var c=u.isDefined;var f=u.t;var l=u.define_d;var h=u.oncePer;var v=r(6);var p=v.WritableTarget;var d=v.ReadableTarget;var y=v.rt;var g=v.wt;var m=n(r(9));var w=n(r(11));e.exports=h("basic operations",function(e){m(e);w(e);e.newOperationType("NoOp",function(e){function t(){a(this,t);if(e!=null){e.apply(this,arguments)}}o(t,e);return t}(e.Delta));e.newOperationType("Add",function(e){function t(){a(this,t);if(e!=null){e.apply(this,arguments)}}o(t,e);i(t,{precondition:{value:function r(e){return e instanceof p&&s(e.value)}},applyTo:{value:function n(e){e.value=this.arg}}});return t}(e.Delta));e.newOperationType("Remove",function(e){function t(){a(this,t);if(e!=null){e.apply(this,arguments)}}o(t,e);i(t,{precondition:{value:function r(e){return e instanceof p&&c(e.value)}},applyTo:{value:function n(e){e["delete"]()}}});return t}(e.Delta));e.newOperationType("Forbid",function(e){function t(){a(this,t);if(e!=null){e.apply(this,arguments)}}o(t,e);i(t,{precondition:{value:function r(e){return s(e.value)}}});return t}(e.Delta));e.newOperationType("Replace",function(e){function t(){a(this,t);if(e!=null){e.apply(this,arguments)}}o(t,e);i(t,{precondition:{value:function r(e){return e instanceof p&&c(e.value)}},applyTo:{value:function n(e){e.value=this.arg}}});return t}(e.Delta));e.newOperationType("Update",function(e){function t(){a(this,t);if(e!=null){e.apply(this,arguments)}}o(t,e);i(t,{precondition:{value:function r(e){return e instanceof p&&c(e.value)}},applyTo:{value:function n(e){e.value=this.arg(e.value)}}});return t}(e.Delta));e.newComposition(function(t,r){return t instanceof e.Delta.NoOp},function(e,t){return t.clone()});e.newComposition(function(t,r){return r instanceof e.Delta.NoOp},function(e,t){return e.clone()});var t=l(e);e.newComposition(f("Add","Modify"),t("Add",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(f("Modify","Add"),false);e.newComposition(f("Add","Add"),false);e.newComposition(f("Modify","Remove"),t("Remove"));e.newComposition(f("Add","Remove"),t("Forbid"));e.newComposition(f("Remove","Modify"),false);e.newComposition(f("Remove","Add"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(f("Remove","Remove"),false);e.newComposition(f("Modify","Forbid"),false);e.newComposition(f("Add","Forbid"),false);e.newComposition(f("Remove","Forbid"),t("Remove"));e.newComposition(f("Forbid","Modify"),false);e.newComposition(f("Forbid","Add"),t("Add",function(e){var t=e.p2;return t}));e.newComposition(f("Forbid","Remove"),false);e.newComposition(f("Forbid","Forbid"),t("Forbid"));e.newComposition(f("Modify","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(f("Add","Replace"),t("Add",function(e){var t=e.p2;return t}));e.newComposition(f("Remove","Replace"),false);e.newComposition(f("Forbid","Replace"),false);e.newComposition(f("Replace","Modify"),t("Replace",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(f("Replace","Add"),false);e.newComposition(f("Replace","Remove"),t("Remove"));e.newComposition(f("Replace","Forbid"),false);e.newComposition(f("Replace","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(f("Modify","Update"),true);e.newComposition(f("Add","Update"),t("Add",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(f("Remove","Update"),true);e.newComposition(f("Forbid","Update"),true);e.newComposition(f("Replace","Update"),t("Replace",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(f("Update","Modify"),true);e.newComposition(f("Update","Add"),true);e.newComposition(f("Update","Remove"),t("Remove"));e.newComposition(f("Update","Forbid"),true);e.newComposition(f("Update","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(f("Update","Update"),t("Update",function(e){var t=e.p1;var r=e.p2;return function(e){return r(t(e))}}))})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var i=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var o=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a=function b(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var i=Object.getPrototypeOf(e);if(i===null){return undefined}else{return b(i,t,r)}}else if("value"in n&&n.writable){return n.value}else{var o=n.get;if(o===undefined){return undefined}return o.call(r)}};var u=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var s=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var c=r(4);var f=c.isDefined;var l=c.t;var h=c.define_d;var v=c.oncePer;var p=c.arraysEqual;var d=c.arraysHaveSameElements;var y=c.customIndexOf;var g=n(r(11));var m=n(r(12));var w=n(r(24));e.exports=v("PutIntoArray",function(e){g(e);m(e);w(e);e.newOperationType("PutIntoArray",function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}s(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this.values=this.arg?Array.isArray(this.arg)?this.arg:[this.arg]:[]}u(t,e);o(t,{clone:{value:function r(){var e=a(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.values=[].concat(i(this.values));return e}},refines:{value:function n(e){var t=function(e,t){return e.method===t.method&&e.value===t.value};if(!d(this.values,e.values,t)){return false}if(!p(this.values.filter(function(e){return e.method==="append"}),e.values.filter(function(e){return e.method==="append"}),t)){return false}if(!p(this.values.filter(function(e){return e.method==="prepend"}),e.values.filter(function(e){return e.method==="prepend"}),t)){return false}var r=[];for(var n=0;n<this.values.length;++n){if(this.values[n].method==="insert"){var i=y(e.values,this.values[n],t);var o=[].concat(r);for(var a=0;a<=i;++a){var u=y(o,e.values[a],t);if(u>-1){o.splice(u,1)}}if(o.length>0){return false}}else{r.push(this.values[n])}}return true}},precondition:{value:function c(e){return f(e.value)&&Array.isArray(e.value)}},applyTo:{value:function l(e){var t=e.value;this.values.forEach(function(e){var r=e.method;var n=e.value;switch(r){case"prepend":{t.unshift(n)}break;case"insert":{var i=Math.floor(Math.random()*(t.length+1));t.splice(i,0,n)}break;case"append":{t.push(n)}break}})}},methods:{get:function(){return[]}}});return t}(e.Delta));e.newProxyMethod("prepend",function(t){return new e.Delta.PutIntoArray({method:"prepend",value:t})});e.newProxyMethod("insert",function(t){return new e.Delta.PutIntoArray({method:"insert",value:t})});e.newProxyMethod("append",function(t){return new e.Delta.PutIntoArray({method:"append",value:t})});var t=h(e);e.newComposition(l("Modify","PutIntoArray"),false);e.newComposition(l("Add","PutIntoArray"),t("Add",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(l("Remove","PutIntoArray"),false);e.newComposition(l("Forbid","PutIntoArray"),false);e.newComposition(l("Replace","PutIntoArray"),t("Replace",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(l("Update","PutIntoArray"),true);e.newComposition(l("PutIntoArray","Modify"),false);e.newComposition(l("PutIntoArray","Add"),false);e.newComposition(l("PutIntoArray","Remove"),t("Remove"));e.newComposition(l("PutIntoArray","Forbid"),false);e.newComposition(l("PutIntoArray","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(l("PutIntoArray","Update"),true);e.newComposition(l("PutIntoArray","PutIntoArray"),function(t,r){return new e.Delta.PutIntoArray([].concat(i(t.values),i(r.values)))})})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var i=function(e){
if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var o=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a=function b(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var i=Object.getPrototypeOf(e);if(i===null){return undefined}else{return b(i,t,r)}}else if("value"in n&&n.writable){return n.value}else{var o=n.get;if(o===undefined){return undefined}return o.call(r)}};var u=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var s=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var c=r(4);var f=c.isUndefined;var l=c.isDefined;var h=c.t;var v=c.define_d;var p=c.oncePer;var d=c.arraysEqual;var y=r(6).WritableTarget;var g=n(r(11));var m=n(r(12));var w=n(r(24));e.exports=p("PutIntoFunction",function(e){g(e);m(e);w(e);e.newOperationType("PutIntoFunction",function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}s(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this.values=this.arg?Array.isArray(this.arg)?this.arg:[this.arg]:[]}u(t,e);o(t,{clone:{value:function r(){var e=a(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.values=[].concat(i(this.values));return e}},equals:{value:function n(e){return d(this.values,e.values,function(e,t){return e.method===t.method&&e.value&&t.value})}},precondition:{value:function c(e){return l(e.value)&&typeof e.value==="function"&&(l(e.value._DeltaJs_functions)||e instanceof y)}},applyTo:{value:function h(e){if(f(e.value._DeltaJs_functions)){var t=e.value;var r=function(e){var t=function r(t){return e.apply(this,arguments)};t.toString=function(){return e.toString()};return t}(function(){var e=this;for(var t=arguments.length,n=Array(t),i=0;i<t;i++){n[i]=arguments[i]}var o;r._DeltaJs_functions.forEach(function(t){o=t.apply(e,n)});return o});r._DeltaJs_functions=[function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}t.apply(this,r)}];e.value=r}var n=e.value._DeltaJs_functions;this.values.forEach(function(e){var t=e.method;var r=e.value;switch(t){case"prepend":{n.unshift(r)}break;case"insert":{var i=Math.floor(Math.random()*(n.length+1));n.splice(i,0,r)}break;case"append":{n.push(r)}break}})}},methods:{get:function(){return[]}}});return t}(e.Delta));e.newProxyMethod("prepend",function(t){return new e.Delta.PutIntoFunction({method:"prepend",value:t})});e.newProxyMethod("insert",function(t){return new e.Delta.PutIntoFunction({method:"insert",value:t})});e.newProxyMethod("append",function(t){return new e.Delta.PutIntoFunction({method:"append",value:t})});var t=v(e);e.newComposition(h("Modify","PutIntoFunction"),false);e.newComposition(h("Add","PutIntoFunction"),t("Add",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(h("Remove","PutIntoFunction"),false);e.newComposition(h("Forbid","PutIntoFunction"),false);e.newComposition(h("Replace","PutIntoFunction"),t("Replace",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(h("Update","PutIntoFunction"),true);e.newComposition(h("PutIntoFunction","Modify"),false);e.newComposition(h("PutIntoFunction","Add"),false);e.newComposition(h("PutIntoFunction","Remove"),t("Remove"));e.newComposition(h("PutIntoFunction","Forbid"),false);e.newComposition(h("PutIntoFunction","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(h("PutIntoFunction","Update"),true);e.newComposition(h("PutIntoFunction","PutIntoFunction"),function(t,r){return new e.Delta.PutIntoFunction([].concat(i(t.values),i(r.values)))})})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var i=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var o=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})};var a=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var u=function O(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var i=Object.getPrototypeOf(e);if(i===null){return undefined}else{return O(i,t,r)}}else if("value"in n&&n.writable){return n.value}else{var o=n.get;if(o===undefined){return undefined}return o.call(r)}};var s=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var c=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var f=n(r(22));var l=r(4);var h=l.extend;var v=l.isDefined;var p=l.indent;var d=l.oncePer;var y=l.o;var g=l.graphDescendants;var m=n(r(7));var w=n(r(11));var b=n(r(19));var x=r(8);var E=x.ApplicationOrderCycle;var _=x.UnresolvedDeltaConflict;e.exports=d("DeltaModel",function(e){b(e);e.newOperationType("DeltaModel",function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}c(this,t);u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this.graph=new f}s(t,e);a(t,{clone:{value:function r(){var e=u(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.graph=this.graph.clone();e.graph.eachVertex(function(t,r){e.graph.setVertex(t,r.clone())});return e}},equals:{value:function n(e){var t=this.graph.transitiveReduction();var r=e.graph.transitiveReduction();var n=true;t.eachVertex(function(e,t){if(r.vertexValue(e).equals(t)){n=false;return false}});if(!n){return false}r.eachVertex(function(e,r){if(t.vertexValue(e).equals(r)){n=false;return false}});if(!n){return false}t.eachEdge(function(e,t){if(r.hasEdge(e,t)){n=false;return false}});if(!n){return false}t.eachEdge(function(e,r){if(t.hasEdge(e,r)){n=false;return false}});return n}},_assertNoUnresolvedConflicts:{value:function l(){var e=this.conflicts();e.forEach(function(e){if(e.conflictResolvingDeltas.length===0){throw new _(e.conflictingDeltas)}})}},applyTo:{value:function v(e){var t=arguments[1]===undefined?{}:arguments[1];this._assertNoUnresolvedConflicts();this.graph.topologically(function(r,n){n.applyTo(e,t)})}},toString:{value:function d(){var e=arguments[0]===undefined?{}:arguments[0];var r=u(Object.getPrototypeOf(t.prototype),"toString",this).call(this,e);if(this.graph.vertexCount()>0){var n="";this.graph.topologically(function(t,r){n+="["+t+"] "+r.toString(e)+"\n"});r+="\n"+p(n,4)}return r}},conflicts:{value:function m(){var e=this;var t=this.graph.clone();var r="(sink)";while(t.hasVertex(r)){r=""+r+"'"}t.addNewVertex(r,null);t.eachVertex(function(e){t.setVertex(e,null);if(e!==r){t.ensureEdge(e,r)}});t=t.transitiveReduction();var n={};var a=function(e){if(t.vertexValue(e)){return}var r={};t.predecessors(e).forEach(function(e){a(e);r[e]=o({},e,true);var n=t.vertexValue(e);h.apply(undefined,[r[e]].concat(i(Object.keys(n).map(function(e){return n[e]}))))});t.setVertex(e,r);Object.keys(r).forEach(function(t){Object.keys(r).forEach(function(o){if(t>=o){return}var a=h({},r[t]);var u=h({},r[o]);Object.keys(a).forEach(function(e){Object.keys(u).forEach(function(t){if(e===t){delete a[e];delete u[t]}})});Object.keys(a).forEach(function(t){Object.keys(u).forEach(function(r){y.apply(undefined,[n].concat(i([t,r].sort())))[e]=true})})})})};a(r);var u=[];Object.keys(n).forEach(function(i){Object.keys(n[i]).forEach(function(o){var a=e.graph.vertexValue(i);var s=e.graph.vertexValue(o);if(!a.commutesWith(s)){var c={conflictingDeltas:[i,o],conflictResolvingDeltas:[]};Object.keys(n[i][o]).forEach(function(n){g(t,n).forEach(function(t){var n=e.graph.vertexValue(t);if(t!==r){if(n.resolves(a,s)){c.conflictResolvingDeltas.push(t)}}})});u.push(c)}})});return u}}});return t}(e.Delta),function(t){function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}c(this,r);u(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,t);this._childOptions={};this._childApplicationConditions={}}s(r,t);a(r,{processProxyArguments:{value:function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n={};do{if(t.length===0){throw new Error("The argument list for this Modify.DeltaModel method is insufficient.")}var i=t.shift();if(typeof i==="string"){if(!n.name){n.name=i}else{n.path=i}}else{h(n,i)}}while(!n.path||!n.name);return{options:n,args:t}}},addOperation:{value:function o(t,r){var n=r.path;var i=r.name;var o=r.feature;if(!this._childApplicationConditions[i]){var a=undefined;if(o){a=e.newFeature(i,r)}else{a=e.newFeature("delta__"+i,h({hidden:true},r))}if(v(r.resolves)){a["if"](r.resolves);r=h({},r,{feature:false})}if(v(r.requires)){a.selects(r.requires)}if(o||a.conditional){t.applicationCondition=a}this._childApplicationConditions[i]=a}var u;if(n.prop){var s=h({},r,{name:undefined});var c=this.addChildProxy(i,new e.Delta.Modify);u=c.addOperation(t,s)}else{u=this.addChildProxy(i,t)}if(!this._childOptions[i]){this._childOptions[i]=r}return u}},delta:{value:function f(){var e=this;var t=u(Object.getPrototypeOf(r.prototype),"delta",this).call(this);t.graph.clear();this.childKeys().forEach(function(r){var n=e._childOptions[r];var o=e.childDelta(r);t.graph.addVertex(r,o);[].concat(i(n.resolves||[]),i(n.after||[]),i(n.requires||[])).forEach(function(e){t.graph.createEdge(e,r);if(t.graph.hasCycle()){t.graph.removeExistingEdge(e,r);throw new E(e,r)}});if(n.feature||e._childApplicationConditions[r].conditional){o.applicationCondition=e._childApplicationConditions[r]}});return t}}});return r}(e.ContainerProxy));e.newComposition(function(t,r){return t instanceof e.Delta.DeltaModel||r instanceof e.Delta.DeltaModel},true)})},function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];for(var n=e[Symbol.iterator](),i;!(i=n.next()).done;){r.push(i.value);if(t&&r.length===t)break}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var a=r(4);var u=a.extend;var s=a.a;var c=a.assert;var f=a.isUndefined;var l=a.oncePer;var h=r(8).ConstraintFailure;e.exports=l("features",function(e){l(e.constructor,"features",function(){u(e.constructor.prototype,{newFeature:function t(e){var t=arguments[1]===undefined?{}:arguments[1];c(f(this.features[e]),"A feature with the name '"+e+"' already exists.");return this.features[e]=new this.Feature(e,t)}})});function t(t){t=Array.isArray(t)?t:[t];t=t.map(function(t){return t instanceof e.Feature?t.name:t});return t}var r={};var a={};function v(e){var n=arguments[1]===undefined?[]:arguments[1];w=true;if(n===true){a[e]=true}else if(n===false){}else if(r[e]!==true){s(r,e).push(t(n))}}function p(e,r){t(r).forEach(function(t){v(t,e)})}var d={};var y={};function g(e){var r=arguments[1]===undefined?[]:arguments[1];w=true;if(r===false){y[e]=false}else if(r===true){}else if(d[e]!==false){s(d,e).push(t(r))}}function m(e,r){t(r).forEach(function(t){g(t,e)})}var w=false;function b(){if(!w){return}w=false;var t;do{t=false;Object.keys(e.features).forEach(function(e){if(!a[e]){if(f(a[e])){a[e]=false}if((r[e]||[]).some(function(e){return e.every(function(e){return a[e]})})){a[e]=true;t=true}}})}while(t);Object.keys(e.features).forEach(function(e){y[e]=(d[e]||[]).every(function(e){return e.some(function(e){return a[e]})})})}e.Feature=function(){function e(t){var r=this;var n=arguments[1]===undefined?{}:arguments[1];o(this,e);this.name=t;this.options=n;Object.keys(n).forEach(function(e){r.addOption(e,n[e])})}i(e,{selected:{get:function(){b();if(a[this.name]&&!y[this.name]){throw new h(this)}return a[this.name]}},condition:{get:function(){return r[this.name]}},conditional:{get:function(){return s(r,this.name).length>0}},restricted:{get:function(){return s(d,this.name).length>0}},select:{value:function t(){this["if"](true)}}});return e}();var x=[["if",[v]],["onlyIf",[g]],["selects",[p]],["requiredBy",[m]],["iff",[v,g]]];e.Feature.prototype.addOption=function(e,t){var r=this;x.forEach(function(i){var o=n(i,2);var a=o[0];var u=o[1];if(e===a){u.forEach(function(e){e(r.name,t)})}})};x.forEach(function(t){var r=n(t,1);var i=r[0];e.Feature.prototype[i]=function(e){this.addOption(i,e)}});e.features={}})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var i=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})};var o=r(4);var a=o.extend;var u=o.oncePer;var s=n(r(15));e.exports=u("variation points",function(e){u(e.constructor,"variation points",function(){s(e);a(e.constructor.prototype,{vp:function t(e,r){var n=i({},e,r);this._deltaModelProxy.delta().applyTo(n,{restrictToProperty:e});return n[e]},"do":function r(){var e;for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n]}return(e=this._deltaModelProxy)["do"].apply(e,[{feature:true}].concat(r))}})});e._deltaModelProxy=(new e.Delta.DeltaModel)["do"]()})},function(e,t,r){"use strict";var n=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var i=r(4);var o=i.extend;var a=i.isUndefined;var u=i.oncePer;e.exports=u("application conditions",function(e){u(e.constructor,"application conditions",function(){o(e.constructor.prototype,{select:function t(){var e=this;for(var t=arguments.length,r=Array(t),i=0;i<t;i++){r[i]=arguments[i]}r.forEach(function(t){if(Array.isArray(t)){e.select.apply(e,n(t))}else{e.features[t].select()}})}})});o(e.Delta.prototype,Object.defineProperties({},{applicationCondition:{get:function(){return this._applicationCondition},set:function(e){this._applicationCondition=e},configurable:true,enumerable:true},selected:{get:function(){return a(this.applicationCondition)||this.applicationCondition.selected},configurable:true,enumerable:true}}))})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var i=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var o=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a=function w(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var i=Object.getPrototypeOf(e);if(i===null){return undefined}else{return w(i,t,r)}}else if("value"in n&&n.writable){return n.value}else{var o=n.get;if(o===undefined){return undefined}return o.call(r)}};var u=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var s=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var c=n(r(22));var f=r(4);var l=f.extend;var h=f.a;var v=f.isUndefined;var p=f.oncePer;var d=n(r(7));var y=n(r(10));var g=n(r(24));var m=r(8).MultipleActiveProxiesError;e.exports=p("ContainerProxy",function(e){g(e);e.ContainerProxy=function(t){function r(){var e=arguments[0]===undefined?{}:arguments[0];s(this,r);a(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,e);this._doArgs=[];this._original=this;this._children={};this._childOptions={}}u(r,t);o(r,{deactivate:{value:function n(){var e=this;Object.keys(this._children).forEach(function(t){e.childProxy(t).deactivate()});a(Object.getPrototypeOf(r.prototype),"deactivate",this).call(this)}},addChildProxy:{value:function c(t,r){var n=this.childProxy(t);var i=r.constructor.Proxy||e.Proxy;var o=new i({delta:r,parent:this});if(n instanceof e.Delta.Modify.Proxy&&o instanceof e.Delta.Modify.Proxy){return n}if(n){n.deactivate()}this._children[t].push(o);return o}},childKeys:{value:function f(){return Object.keys(this._children)}},childProxies:{value:function l(e){return h(this._children,e)}},childProxy:{value:function p(e){return h(this._children,e)[this._children[e].length-1]}},childDelta:{value:function g(t){var r;return(r=e.Delta).composed.apply(r,i(this.childProxies(t).map(function(e){return e.delta()})))}},"do":{value:function w(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(!this.active){throw new m}var n=Object.create(this);n._doArgs=[].concat(i(this._doArgs),t);n._original=this._original;return n}},_do:{value:function b(t,r){if(!this.active){throw new m}var n=this.processProxyArguments.apply(this,i(this._doArgs).concat(i(r)));var o=n.options;var a=n.args;if(typeof o.path==="string"){o.path=new d(o.path)}var u=e.ContainerProxy._newDeltaByMethod(t,a);var s=this.addOperation(u,o);return s instanceof e.ContainerProxy?s:this}},processProxyArguments:{value:function x(){throw new Error("A 'ContainerProxy' subclass needs to implement the 'processProxyArguments' method.")}},addOperation:{value:function E(){throw new Error("A 'ContainerProxy' subclass needs to implement the 'addOperation' method.")}}},{_newDeltaByMethod:{value:function _(t,r){var n=e.ContainerProxy._methodHandlers[t].map(function(e){return e.apply(undefined,i(r))});if(n.length===1){return n[0]}else{y(e);return new e.Delta.Overloaded(n)}}},newProxyMethod:{value:function O(t,r){if(v(e.ContainerProxy.prototype[t])){e.ContainerProxy.prototype[t]=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}return this._do(t,r)}}h(e.ContainerProxy,"_methodHandlers",t).push(r)}}});return r}(e.Proxy)})},function(e,t,r){(function(t){!function(t){"use strict";var r=Object.prototype.hasOwnProperty;var n;var i=typeof Symbol==="function"&&Symbol.iterator||"@@iterator";var o=typeof e==="object";var a=t.regeneratorRuntime;if(a){if(o){e.exports=a}return}a=t.regeneratorRuntime=o?e.exports:{};function u(e,t,r,n){return new g(e,t,r||null,n||[])}a.wrap=u;function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}var c="suspendedStart";var f="suspendedYield";var l="executing";var h="completed";var v={};function p(){}function d(){}var y=d.prototype=g.prototype;p.prototype=y.constructor=d;d.constructor=p;p.displayName="GeneratorFunction";a.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor;return t?t===p||(t.displayName||t.name)==="GeneratorFunction":false};a.mark=function(e){e.__proto__=d;e.prototype=Object.create(y);return e};a.async=function(e,t,r,n){return new Promise(function(i,o){var a=u(e,t,r,n);var c=l.bind(a.next);var f=l.bind(a["throw"]);function l(e){var t=s(this,null,e);if(t.type==="throw"){o(t.arg);return}var r=t.arg;if(r.done){i(r.value)}else{Promise.resolve(r.value).then(c,f)}}c()})};function g(e,t,r,i){var o=t?Object.create(t.prototype):this;var a=new b(i);var u=c;function p(t,i){if(u===l){throw new Error("Generator is already running")}if(u===h){return E()}while(true){var o=a.delegate;if(o){var p=s(o.iterator[t],o.iterator,i);if(p.type==="throw"){a.delegate=null;t="throw";i=p.arg;continue}t="next";i=n;var d=p.arg;if(d.done){a[o.resultName]=d.value;a.next=o.nextLoc}else{u=f;return d}a.delegate=null}if(t==="next"){if(u===c&&typeof i!=="undefined"){throw new TypeError("attempt to send "+JSON.stringify(i)+" to newborn generator")}if(u===f){a.sent=i}else{delete a.sent}}else if(t==="throw"){if(u===c){u=h;throw i}if(a.dispatchException(i)){t="next";i=n}}else if(t==="return"){a.abrupt("return",i)}u=l;var p=s(e,r,a);if(p.type==="normal"){u=a.done?h:f;var d={value:p.arg,done:a.done};if(p.arg===v){if(a.delegate&&t==="next"){i=n}}else{return d}}else if(p.type==="throw"){u=h;if(t==="next"){a.dispatchException(p.arg)}else{i=p.arg}}}}o.next=p.bind(o,"next");o["throw"]=p.bind(o,"throw");o["return"]=p.bind(o,"return");return o}y[i]=function(){return this};y.toString=function(){return"[object Generator]"};function m(e){var t={tryLoc:e[0]};if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function b(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(m,this);this.reset()}a.keys=function(e){var t=[];for(var r in e){t.push(r)}t.reverse();return function n(){while(t.length){var r=t.pop();if(r in e){n.value=r;n.done=false;return n}}n.done=true;return n}};function x(e){if(e){var t=e[i];if(t){return t.call(e)}if(typeof e.next==="function"){return e}if(!isNaN(e.length)){var o=-1,a=function u(){while(++o<e.length){if(r.call(e,o)){u.value=e[o];u.done=false;return u}}u.value=n;u.done=true;return u};return a.next=a}}return{next:E}}a.values=x;function E(){return{value:n,done:true}}b.prototype={constructor:b,reset:function(){this.prev=0;this.next=0;this.sent=n;this.done=false;this.delegate=null;this.tryEntries.forEach(w);for(var e=0,t;r.call(this,t="t"+e)||e<20;++e){this[t]=null}},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(e){if(this.done){throw e}var t=this;function n(r,n){a.type="throw";a.arg=e;t.next=r;return!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];var a=o.completion;if(o.tryLoc==="root"){return n("end")}if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc");var s=r.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc){return n(o.catchLoc,true)}else if(this.prev<o.finallyLoc){return n(o.finallyLoc)}}else if(u){if(this.prev<o.catchLoc){return n(o.catchLoc,true)}}else if(s){if(this.prev<o.finallyLoc){return n(o.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}if(o&&(e==="break"||e==="continue")&&o.tryLoc<=t&&t<o.finallyLoc){o=null}var a=o?o.completion:{};a.type=e;a.arg=t;if(o){this.next=o.finallyLoc}else{this.complete(a)}return v},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=e.arg;this.next="end"}else if(e.type==="normal"&&t){this.next=t}return v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){return this.complete(r.completion,r.afterLoc)}}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(n.type==="throw"){var i=n.arg;w(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:x(e),resultName:t,nextLoc:r};return v}}}(typeof t==="object"?t:typeof window==="object"?window:this)}).call(t,function(){return this}())},function(e,t,r){!function(t,r,n){"use strict";var i="Object",o="Function",a="Array",u="String",s="Number",c="RegExp",f="Date",l="Map",h="Set",v="WeakMap",p="WeakSet",d="Symbol",y="Promise",g="Math",m="Arguments",w="prototype",b="constructor",x="toString",E=x+"Tag",_="toLocaleString",O="hasOwnProperty",P="forEach",C="iterator",k="@@"+C,j="process",A="createElement",D=t[o],T=t[i],V=t[a],M=t[u],R=t[s],F=t[c],N=t[f],I=t[l],S=t[h],L=t[v],U=t[p],q=t[d],W=t[g],J=t.TypeError,G=t.RangeError,z=t.setTimeout,H=t.setImmediate,$=t.clearImmediate,Y=t.parseInt,K=t.isFinite,B=t[j],X=B&&B.nextTick,Q=t.document,Z=Q&&Q.documentElement,ee=t.navigator,te=t.define,re=t.console||{},ne=V[w],ie=T[w],oe=D[w],ae=1/0,ue=".";function se(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function ce(e){return typeof e=="function"}var fe=we(/./.test,/\[native code\]\s*\}\s*$/,1);var le=ie[x];function he(e,t,r){if(e&&!Te(e=r?e:e[w],Vt))Ct(e,Vt,t)}function ve(e){return le.call(e).slice(8,-1)}function pe(e){var t,r;return e==n?e===n?"Undefined":"Null":typeof(r=(t=T(e))[Vt])=="string"?r:ve(t)}var de=oe.call,ye=oe.apply,ge;function me(){var e=yt(this),t=arguments.length,r=V(t),n=0,i=St._,o=false;while(t>n)if((r[n]=arguments[n++])===i)o=true;return function(){var n=this,a=arguments.length,u=0,s=0,c;if(!o&&!a)return be(e,r,n);c=r.slice();if(o)for(;t>u;u++)if(c[u]===i)c[u]=arguments[s++];while(a>s)c.push(arguments[s++]);return be(e,c,n)}}function we(e,t,r){yt(e);if(~r&&t===n)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}function be(e,t,r){var i=r===n;switch(t.length|0){case 0:return i?e():e.call(r);case 1:return i?e(t[0]):e.call(r,t[0]);case 2:return i?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3]);case 5:return i?e(t[0],t[1],t[2],t[3],t[4]):e.call(r,t[0],t[1],t[2],t[3],t[4])}return e.apply(r,t)}var xe=T.create,Ee=T.getPrototypeOf,_e=T.setPrototypeOf,Oe=T.defineProperty,Pe=T.defineProperties,Ce=T.getOwnPropertyDescriptor,ke=T.keys,je=T.getOwnPropertyNames,Ae=T.getOwnPropertySymbols,De=T.isFrozen,Te=we(de,ie[O],2),Ve=T,Me;function Re(e){return Ve(dt(e))}function Fe(e){return e}function Ne(){return this}function Ie(e,t){if(Te(e,t))return e[t]}function Se(e){gt(e);return Ae?je(e).concat(Ae(e)):je(e)}var Le=T.assign||function(e,t){var r=T(dt(e)),n=arguments.length,i=1;while(n>i){var o=Ve(arguments[i++]),a=ke(o),u=a.length,s=0,c;while(u>s)r[c=a[s++]]=o[c]}return r};function Ue(e,t){var r=Re(e),n=ke(r),i=n.length,o=0,a;while(i>o)if(r[a=n[o++]]===t)return a}function qe(e){return M(e).split(",")}var We=ne.push,Je=ne.unshift,Ge=ne.slice,ze=ne.splice,He=ne.indexOf,$e=ne[P];function Ye(e){var t=e==1,r=e==2,i=e==3,o=e==4,a=e==6,u=e==5||a;return function(s){var c=T(dt(this)),f=arguments[1],l=Ve(c),h=we(s,f,3),v=st(l.length),p=0,d=t?V(v):r?[]:n,y,g;for(;v>p;p++)if(u||p in l){y=l[p];g=h(y,p,c);if(e){if(t)d[p]=g;else if(g)switch(e){case 3:return true;case 5:return y;case 6:return p;case 2:d.push(y)}else if(o)return false}}return a?-1:i||o?o:d}}function Ke(e){return function(t){var r=Re(this),n=st(r.length),i=ct(arguments[1],n);if(e&&t!=t){for(;n>i;i++)if(at(r[i]))return e||i}else for(;n>i;i++)if(e||i in r){if(r[i]===t)return e||i}return!e&&-1}}function Be(e,t){return typeof e=="function"?e:t}var Xe=9007199254740991,Qe=W.pow,Ze=W.abs,et=W.ceil,tt=W.floor,rt=W.max,nt=W.min,it=W.random,ot=W.trunc||function(e){return(e>0?tt:et)(e)};function at(e){return e!=e}function ut(e){return isNaN(e)?0:ot(e)}function st(e){return e>0?nt(ut(e),Xe):0}function ct(e,t){var e=ut(e);return e<0?rt(e+t,0):nt(e,t)}function ft(e){return e>9?e:"0"+e}function lt(e,t,r){var n=se(t)?function(e){return t[e]}:t;return function(t){return M(r?t:this).replace(e,n)}}function ht(e){return function(t){var r=M(dt(this)),i=ut(t),o=r.length,a,u;if(i<0||i>=o)return e?"":n;a=r.charCodeAt(i);return a<55296||a>56319||i+1===o||(u=r.charCodeAt(i+1))<56320||u>57343?e?r.charAt(i):a:e?r.slice(i,i+2):(a-55296<<10)+(u-56320)+65536}}var vt="Reduce of empty object with no initial value";function pt(e,t,r){if(!e)throw J(r?t+r:t)}function dt(e){if(e==n)throw J("Function called on null or undefined");return e}function yt(e){pt(ce(e),e," is not a function!");return e}function gt(e){pt(se(e),e," is not an object!");return e}function mt(e,t,r){pt(e instanceof t,r,": use the 'new' operator!")}function wt(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}function bt(e,t,r){e[t]=r;return e}function xt(e){return Ot?function(t,r,n){return Oe(t,r,wt(e,n))}:bt}function Et(e){return d+"("+e+")_"+(++Pt+it())[x](36)}function _t(e,t){return q&&q[e]||(t?q:jt)(d+ue+e)}var Ot=!!function(){try{return Oe({},"a",{get:function(){return 2}}).a==2}catch(e){}}(),Pt=0,Ct=xt(1),kt=q?bt:Ct,jt=q||Et;function At(e,t){for(var r in t)Ct(e,r,t[r]);return e}var Dt=_t("unscopables"),Tt=ne[Dt]||{},Vt=_t(E),Mt=_t("species"),Rt;function Ft(e){if(Ot&&(r||!fe(e)))Oe(e,Mt,{configurable:true,get:Ne})}var Nt=ve(B)==j,It={},St=r?t:It,Lt=t.core,Ut,qt=1,Wt=2,Jt=4,Gt=8,zt=16,Ht=32;function $t(e,n,i){var o,a,u,s,c=e&Wt,f=c?t:e&Jt?t[n]:(t[n]||ie)[w],l=c?It:It[n]||(It[n]={});if(c)i=n;for(o in i){a=!(e&qt)&&f&&o in f&&(!ce(f[o])||fe(f[o]));u=(a?f:i)[o];if(!r&&c&&!ce(f[o]))s=i[o];else if(e&zt&&a)s=we(u,t);else if(e&Ht&&!r&&f[o]==u){s=function(e){return this instanceof u?new u(e):u(e)};s[w]=u[w]}else s=e&Gt&&ce(u)?we(de,u):u;if(r&&f&&!a){if(c)f[o]=u;else delete f[o]&&Ct(f,o,u)}if(l[o]!=u)Ct(l,o,s)}}if(typeof e!="undefined"&&e.exports)e.exports=It;else if(ce(te)&&te.amd)te(function(){return It});else Ut=true;if(Ut||r){It.noConflict=function(){t.core=Lt;return It};t.core=It}Rt=_t(C);var Yt=jt("iter"),Kt=1,Bt=2,Xt={},Qt={},Zt="keys"in ne&&!("next"in[].keys());er(Qt,Ne);function er(e,t){Ct(e,Rt,t);k in ne&&Ct(e,k,t)}function tr(e,t,r,n){e[w]=xe(n||Qt,{next:wt(1,r)});he(e,t+" Iterator")}function rr(e,t,n,i){var o=e[w],a=Ie(o,Rt)||Ie(o,k)||i&&Ie(o,i)||n;if(r){er(o,a);if(a!==n){var u=Ee(a.call(new e));he(u,t+" Iterator",true);Te(o,k)&&er(u,Ne)}}Xt[t]=a;Xt[t+" Iterator"]=Ne;return a}function nr(e,t,r,n,i,o){function a(e){return function(){return new r(this,e)}}tr(r,t,n);var u=a(Kt+Bt),s=a(Bt);if(i==Bt)s=rr(e,t,s,"values");else u=rr(e,t,u,"entries");if(i){$t(Gt+qt*Zt,t,{entries:u,keys:o?s:a(Kt),values:s})}}function ir(e,t){return{value:t,done:!!e}}function or(e){var r=T(e),n=t[d],i=(n&&n[C]||k)in r;return i||Rt in r||Te(Xt,pe(r))}function ar(e){var r=t[d],n=e[r&&r[C]||k],i=n||e[Rt]||Xt[pe(e)];return gt(i.call(e))}function ur(e,t,r){return r?be(e,t):e(t)}function sr(e){var t=true;var r={next:function(){throw 1},"return":function(){t=false}};r[Rt]=Ne;try{e(r)}catch(n){}return t}function cr(e){var t=e["return"];if(t!==n)t.call(e)}function fr(e,t){try{e(t)}catch(r){cr(t);throw r}}function lr(e,t,r,n){fr(function(e){var i=we(r,n,t?2:1),o;while(!(o=e.next()).done)if(ur(i,o.value,t)===false){return cr(e)}},ar(e))}!function(e,r,n,o){if(!fe(q)){q=function(t){pt(!(this instanceof q),d+" is not a "+b);var r=Et(t),i=kt(xe(q[w]),e,r);n[r]=i;Ot&&o&&Oe(ie,r,{configurable:true,set:function(e){Ct(this,r,e)}});return i};Ct(q[w],x,function(){return this[e]})}$t(Wt+Ht,{Symbol:q});var a={"for":function(e){return Te(r,e+="")?r[e]:r[e]=q(e)},iterator:Rt||_t(C),keyFor:me.call(Ue,r),species:Mt,toStringTag:Vt=_t(E,true),unscopables:Dt,pure:jt,set:kt,useSetter:function(){o=true},useSimple:function(){o=false}};$e.call(qe("hasInstance,isConcatSpreadable,match,replace,search,split,toPrimitive"),function(e){a[e]=_t(e)});$t(Jt,d,a);he(q,d);$t(Jt+qt*!fe(q),i,{getOwnPropertyNames:function(e){var t=je(Re(e)),r=[],i,o=0;while(t.length>o)Te(n,i=t[o++])||r.push(i);return r},getOwnPropertySymbols:function(e){var t=je(Re(e)),r=[],i,o=0;while(t.length>o)Te(n,i=t[o++])&&r.push(n[i]);return r}});he(W,g,true);he(t.JSON,"JSON",true)}(jt("tag"),{},{},true);!function(){var e={assign:Le,is:function(e,t){return e===t?e!==0||1/e===1/t:e!=e&&t!=t}};"__proto__"in ie&&function(t,r){try{r=we(de,Ce(ie,"__proto__").set,2);r({},ne)}catch(n){t=true}e.setPrototypeOf=_e=_e||function(e,n){gt(e);pt(n===null||se(n),n,": can't set as prototype!");if(t)e.__proto__=n;else r(e,n);return e}}();$t(Jt,i,e)}();!function(e){e[Vt]=ue;if(ve(e)!=ue)Ct(ie,x,function(){return"[object "+pe(this)+"]";

})}({});!function(){function e(e,t){var r=T[e],n=It[i][e],o=0,a={};if(!n||fe(n)){a[e]=t==1?function(e){return se(e)?r(e):e}:t==2?function(e){return se(e)?r(e):true}:t==3?function(e){return se(e)?r(e):false}:t==4?function(e,t){return r(Re(e),t)}:function(e){return r(Re(e))};try{r(ue)}catch(u){o=1}$t(Jt+qt*o,i,a)}}e("freeze",1);e("seal",1);e("preventExtensions",1);e("isFrozen",2);e("isSealed",2);e("isExtensible",3);e("getOwnPropertyDescriptor",4);e("getPrototypeOf");e("keys");e("getOwnPropertyNames")}();!function(e){e in oe||Ot&&Oe(oe,e,{configurable:true,get:function(){var t=M(this).match(/^\s*function ([^ (]*)/),r=t?t[1]:"";Te(this,e)||Oe(this,e,wt(5,r));return r},set:function(t){Te(this,e)||Oe(this,e,wt(0,t))}})}("name");R("0o1")&&R("0b1")||function(e,r){function n(e){if(se(e))e=i(e);if(typeof e=="string"&&e.length>2&&e.charCodeAt(0)==48){var t=false;switch(e.charCodeAt(1)){case 66:case 98:t=true;case 79:case 111:return Y(e.slice(2),t?2:8)}}return+e}function i(e){var t,r;if(ce(t=e.valueOf)&&!se(r=t.call(e)))return r;if(ce(t=e[x])&&!se(r=t.call(e)))return r;throw J("Can't convert object to number")}R=function o(t){return this instanceof o?new e(n(t)):n(t)};$e.call(Ot?je(e):qe("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY"),function(t){t in R||Oe(R,t,Ce(e,t))});R[w]=r;r[b]=R;Ct(t,s,R)}(R,R[w]);!function(e){$t(Jt,s,{EPSILON:Qe(2,-52),isFinite:function(e){return typeof e=="number"&&K(e)},isInteger:e,isNaN:at,isSafeInteger:function(t){return e(t)&&Ze(t)<=Xe},MAX_SAFE_INTEGER:Xe,MIN_SAFE_INTEGER:-Xe,parseFloat:parseFloat,parseInt:Y})}(R.isInteger||function(e){return!se(e)&&K(e)&&tt(e)===e});!function(){var e=W.E,t=W.exp,r=W.log,n=W.sqrt,i=W.sign||function(e){return(e=+e)==0||e!=e?e:e<0?-1:1};function o(e){return!K(e=+e)||e==0?e:e<0?-o(-e):r(e+n(e*e+1))}function a(e){return(e=+e)==0?e:e>-1e-6&&e<1e-6?e+e*e/2:t(e)-1}$t(Jt,g,{acosh:function(t){return(t=+t)<1?NaN:K(t)?r(t/e+n(t+1)*n(t-1)/e)+1:t},asinh:o,atanh:function(e){return(e=+e)==0?e:r((1+e)/(1-e))/2},cbrt:function(e){return i(e=+e)*Qe(Ze(e),1/3)},clz32:function(e){return(e>>>=0)?32-e[x](2).length:32},cosh:function(e){return(t(e=+e)+t(-e))/2},expm1:a,fround:function(e){return new Float32Array([e])[0]},hypot:function(e,t){var r=0,i=arguments.length,o=i,a=V(i),u=-ae,s;while(i--){s=a[i]=+arguments[i];if(s==ae||s==-ae)return ae;if(s>u)u=s}u=s||1;while(o--)r+=Qe(a[o]/u,2);return u*n(r)},imul:function(e,t){var r=65535,n=+e,i=+t,o=r&n,a=r&i;return 0|o*a+((r&n>>>16)*a+o*(r&i>>>16)<<16>>>0)},log1p:function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:r(1+e)},log10:function(e){return r(e)/W.LN10},log2:function(e){return r(e)/W.LN2},sign:i,sinh:function(r){return Ze(r=+r)<1?(a(r)-a(-r))/2:(t(r-1)-t(-r-1))*(e/2)},tanh:function(e){var r=a(e=+e),n=a(-e);return r==ae?1:n==ae?-1:(r-n)/(t(e)+t(-e))},trunc:ot})}();!function(e){function t(e){if(ve(e)==c)throw J()}$t(Jt,u,{fromCodePoint:function(t){var r=[],n=arguments.length,i=0,o;while(n>i){o=+arguments[i++];if(ct(o,1114111)!==o)throw G(o+" is not a valid code point");r.push(o<65536?e(o):e(((o-=65536)>>10)+55296,o%1024+56320))}return r.join("")},raw:function(e){var t=Re(e.raw),r=st(t.length),n=arguments.length,i=[],o=0;while(r>o){i.push(M(t[o++]));if(o<n)i.push(M(arguments[o]))}return i.join("")}});$t(Gt,u,{codePointAt:ht(false),endsWith:function(e){t(e);var r=M(dt(this)),i=arguments[1],o=st(r.length),a=i===n?o:nt(st(i),o);e+="";return r.slice(a-e.length,a)===e},includes:function(e){t(e);return!!~M(dt(this)).indexOf(e,arguments[1])},repeat:function(e){var t=M(dt(this)),r="",n=ut(e);if(0>n||n==ae)throw G("Count can't be negative");for(;n>0;(n>>>=1)&&(t+=t))if(n&1)r+=t;return r},startsWith:function(e){t(e);var r=M(dt(this)),n=st(nt(arguments[1],r.length));e+="";return r.slice(n,n+e.length)===e}})}(M.fromCharCode);!function(){$t(Jt+qt*sr(V.from),a,{from:function(e){var t=T(dt(e)),r=arguments[1],i=r!==n,o=i?we(r,arguments[2],2):n,a=0,u,s,c;if(or(t)){s=new(Be(this,V));fr(function(e){for(;!(c=e.next()).done;a++){s[a]=i?o(c.value,a):c.value}},ar(t))}else{s=new(Be(this,V))(u=st(t.length));for(;u>a;a++){s[a]=i?o(t[a],a):t[a]}}s.length=a;return s}});$t(Jt,a,{of:function(){var e=0,t=arguments.length,r=new(Be(this,V))(t);while(t>e)r[e]=arguments[e++];r.length=t;return r}});Ft(V)}();!function(){$t(Gt,a,{copyWithin:function(e,t){var r=T(dt(this)),i=st(r.length),o=ct(e,i),a=ct(t,i),u=arguments[2],s=u===n?i:ct(u,i),c=nt(s-a,i-o),f=1;if(a<o&&o<a+c){f=-1;a=a+c-1;o=o+c-1}while(c-->0){if(a in r)r[o]=r[a];else delete r[o];o+=f;a+=f}return r},fill:function(e){var t=T(dt(this)),r=st(t.length),i=ct(arguments[1],r),o=arguments[2],a=o===n?r:ct(o,r);while(a>i)t[i++]=e;return t},find:Ye(5),findIndex:Ye(6)});if(r){$e.call(qe("find,findIndex,fill,copyWithin,entries,keys,values"),function(e){Tt[e]=true});Dt in ne||Ct(ne,Dt,Tt)}}();!function(e){nr(V,a,function(e,t){kt(this,Yt,{o:Re(e),i:0,k:t})},function(){var e=this[Yt],t=e.o,r=e.k,i=e.i++;if(!t||i>=t.length){e.o=n;return ir(1)}if(r==Kt)return ir(0,i);if(r==Bt)return ir(0,t[i]);return ir(0,[i,t[i]])},Bt);Xt[m]=Xt[a];nr(M,u,function(e){kt(this,Yt,{o:M(e),i:0})},function(){var t=this[Yt],r=t.o,n=t.i,i;if(n>=r.length)return ir(1);i=e.call(r,n);t.i+=i.length;return ir(0,i)})}(ht(true));Ot&&!function(e,r){if(!function(){try{return F(/a/g,"i")=="/a/i"}catch(e){}}()){F=function i(e,t){return new r(ve(e)==c&&t!==n?e.source:e,t)};$e.call(je(r),function(e){e in F||Oe(F,e,{configurable:true,get:function(){return r[e]},set:function(t){r[e]=t}})});e[b]=F;F[w]=e;Ct(t,c,F)}if(/./g.flags!="g")Oe(e,"flags",{configurable:true,get:lt(/^.*\/(\w*)$/,"$1")});Ft(F)}(F[w],F);ce(H)&&ce($)||function(e){var r=t.postMessage,n=t.addEventListener,i=t.MessageChannel,o=0,a={},u,s,c;H=function(e){var t=[],r=1;while(arguments.length>r)t.push(arguments[r++]);a[++o]=function(){be(ce(e)?e:D(e),t)};u(o);return o};$=function(e){delete a[e]};function f(e){if(Te(a,e)){var t=a[e];delete a[e];t()}}function l(e){f(e.data)}if(Nt){u=function(e){X(me.call(f,e))}}else if(n&&ce(r)&&!t.importScripts){u=function(e){r(e,"*")};n("message",l,false)}else if(ce(i)){s=new i;c=s.port2;s.port1.onmessage=l;u=we(c.postMessage,c,1)}else if(Q&&e in Q[A]("script")){u=function(t){Z.appendChild(Q[A]("script"))[e]=function(){Z.removeChild(this);f(t)}}}else{u=function(e){z(f,0,e)}}}("onreadystatechange");$t(Wt+zt,{setImmediate:H,clearImmediate:$});!function(e,t){ce(e)&&ce(e.resolve)&&e.resolve(t=new e(function(){}))==t||function(t,r){function i(e){var t;if(se(e))t=e.then;return ce(t)?t:false}function o(e){var t=e[r],n=t.c,i=0,a;if(t.h)return true;while(n.length>i){a=n[i++];if(a.fail||o(a.P))return true}}function a(e,r){var n=e.c;if(r||n.length)t(function(){var t=e.p,a=e.v,u=e.s==1,s=0;if(r&&!o(t)){z(function(){if(!o(t)){if(Nt){if(!B.emit("unhandledRejection",a,t)){}}else if(ce(re.error)){re.error("Unhandled promise rejection",a)}}},1e3)}else while(n.length>s)!function(t){var r=u?t.ok:t.fail,n,o;try{if(r){if(!u)e.h=true;n=r===true?a:r(a);if(n===t.P){t.rej(J(y+"-chain cycle"))}else if(o=i(n)){o.call(n,t.res,t.rej)}else t.res(n)}else t.rej(a)}catch(s){t.rej(s)}}(n[s++]);n.length=0})}function u(e){var t=this,r,n;if(t.d)return;t.d=true;t=t.r||t;try{if(r=i(e)){n={r:t,d:false};r.call(e,we(u,n,1),we(s,n,1))}else{t.v=e;t.s=1;a(t)}}catch(o){s.call(n||{r:t,d:false},o)}}function s(e){var t=this;if(t.d)return;t.d=true;t=t.r||t;t.v=e;t.s=2;a(t,true)}function c(e){var t=gt(e)[Mt];return t!=n?t:e}e=function(t){yt(t);mt(this,e,y);var i={p:this,c:[],s:0,d:false,v:n,h:false};Ct(this,r,i);try{t(we(u,i,1),we(s,i,1))}catch(o){s.call(i,o)}};At(e[w],{then:function(t,i){var o=gt(gt(this)[b])[Mt];var u={ok:ce(t)?t:true,fail:ce(i)?i:false},s=u.P=new(o!=n?o:e)(function(e,t){u.res=yt(e);u.rej=yt(t)}),c=this[r];c.c.push(u);c.s&&a(c);return s},"catch":function(e){return this.then(n,e)}});At(e,{all:function(e){var t=c(this),r=[];return new t(function(n,i){lr(e,false,We,r);var o=r.length,a=V(o);if(o)$e.call(r,function(e,r){t.resolve(e).then(function(e){a[r]=e;--o||n(a)},i)});else n(a)})},race:function(e){var t=c(this);return new t(function(r,n){lr(e,false,function(e){t.resolve(e).then(r,n)})})},reject:function(e){return new(c(this))(function(t,r){r(e)})},resolve:function(e){return se(e)&&r in e&&Ee(e)===this[w]?e:new(c(this))(function(t,r){t(e)})}})}(X||H,jt("record"));he(e,y);Ft(e);$t(Wt+qt*!fe(e),{Promise:e})}(t[y]);!function(){var e=jt("uid"),t=jt("O1"),i=jt("weak"),o=jt("leak"),a=jt("last"),u=jt("first"),s=Ot?jt("size"):"size",c=0,f={};function d(i,o,f,l,h,v){var p=h?"set":"add",d=i&&i[w],y={};function g(e,t){if(t!=n)lr(t,h,e[p],e);return e}function m(e,t){var n=d[e];if(r)d[e]=function(e,r){var i=n.call(this,e===0?0:e,r);return t?this:i}}if(!fe(i)||!(v||!Zt&&Te(d,P)&&Te(d,"entries"))){i=v?function(t){mt(this,i,o);kt(this,e,c++);g(this,t)}:function(e){var r=this;mt(r,i,o);kt(r,t,xe(null));kt(r,s,0);kt(r,a,n);kt(r,u,n);g(r,e)};At(At(i[w],f),l);v||!Ot||Oe(i[w],"size",{get:function(){return dt(this[s])}})}else{var x=i,E=new i,_=E[p](v?{}:-0,1),O;if(sr(function(e){new i(e)})){i=function(e){mt(this,i,o);return g(new x,e)};i[w]=d;if(r)d[b]=i}v||E[P](function(e,t){O=1/t===-ae});if(O){m("delete");m("has");h&&m("get")}if(O||_!==E)m(p,true)}he(i,o);Ft(i);y[o]=i;$t(Wt+Ht+qt*!fe(i),y);v||nr(i,o,function(e,t){kt(this,Yt,{o:e,k:t})},function(){var e=this[Yt],t=e.k,r=e.l;while(r&&r.r)r=r.p;if(!e.o||!(e.l=r=r?r.n:e.o[u])){e.o=n;return ir(1)}if(t==Kt)return ir(0,r.k);if(t==Bt)return ir(0,r.v);return ir(0,[r.k,r.v])},h?Kt+Bt:Bt,!h);return i}function y(t,r){if(!se(t))return(typeof t=="string"?"S":"P")+t;if(De(t))return"F";if(!Te(t,e)){if(!r)return"E";Ct(t,e,++c)}return"O"+t[e]}function g(e,r){var n=y(r),i;if(n!="F")return e[t][n];for(i=e[u];i;i=i.n){if(i.k==r)return i}}function m(e,r,i){var o=g(e,r),c,f;if(o)o.v=i;else{e[a]=o={i:f=y(r,true),k:r,v:i,p:c=e[a],n:n,r:false};if(!e[u])e[u]=o;if(c)c.n=o;e[s]++;if(f!="F")e[t][f]=o}return e}var x={clear:function(){for(var e=this,r=e[t],i=e[u];i;i=i.n){i.r=true;if(i.p)i.p=i.p.n=n;delete r[i.i]}e[u]=e[a]=n;e[s]=0},"delete":function(e){var r=this,n=g(r,e);if(n){var i=n.n,o=n.p;delete r[t][n.i];n.r=true;if(o)o.n=i;if(i)i.p=o;if(r[u]==n)r[u]=i;if(r[a]==n)r[a]=o;r[s]--}return!!n},forEach:function(e){var t=we(e,arguments[1],3),r;while(r=r?r.n:this[u]){t(r.v,r.k,this);while(r&&r.r)r=r.p}},has:function(e){return!!g(this,e)}};I=d(I,l,{get:function(e){var t=g(this,e);return t&&t.v},set:function(e,t){return m(this,e===0?0:e,t)}},x,true);S=d(S,h,{add:function(e){return m(this,e=e===0?0:e,e)}},x);function E(t,r,n){if(De(gt(r)))_(t).set(r,n);else{Te(r,i)||Ct(r,i,{});r[i][t[e]]=n}return t}function _(e){return e[o]||Ct(e,o,new I)[o]}var O={"delete":function(t){if(!se(t))return false;if(De(t))return _(this)["delete"](t);return Te(t,i)&&Te(t[i],this[e])&&delete t[i][this[e]]},has:function(t){if(!se(t))return false;if(De(t))return _(this).has(t);return Te(t,i)&&Te(t[i],this[e])}};L=d(L,v,{get:function(t){if(se(t)){if(De(t))return _(this).get(t);if(Te(t,i))return t[i][this[e]]}},set:function(e,t){return E(this,e,t)}},O,true,true);if(r&&(new L).set(T.freeze(f),7).get(f)!=7){$e.call(qe("delete,has,get,set"),function(e){var t=L[w][e];L[w][e]=function(r,n){if(se(r)&&De(r)){var i=_(this)[e](r,n);return e=="set"?this:i}return t.call(this,r,n)}})}U=d(U,p,{add:function(e){return E(this,e,true)}},O,false,true)}();!function(){function e(e){var t=[],r;for(r in e)t.push(r);kt(this,Yt,{o:e,a:t,i:0})}tr(e,i,function(){var e=this[Yt],t=e.a,r;do{if(e.i>=t.length)return ir(1)}while(!((r=t[e.i++])in e.o));return ir(0,r)});function t(e){return function(t){gt(t);try{return e.apply(n,arguments),true}catch(r){return false}}}function r(e,t){var i=arguments.length<3?e:arguments[2],o=Ce(gt(e),t),a;if(o)return Te(o,"value")?o.value:o.get===n?n:o.get.call(i);return se(a=Ee(e))?r(a,t,i):n}function o(e,t,r){var i=arguments.length<4?e:arguments[3],a=Ce(gt(e),t),u,s;if(!a){if(se(s=Ee(e))){return o(s,t,r,i)}a=wt(0)}if(Te(a,"value")){if(a.writable===false||!se(i))return false;u=Ce(i,t)||wt(0);u.value=r;return Oe(i,t,u),true}return a.set===n?false:(a.set.call(i,r),true)}var a=T.isExtensible||Fe;var u={apply:we(de,ye,3),construct:function(e,t){var r=yt(arguments.length<3?e:arguments[2])[w],n=xe(se(r)?r:ie),i=ye.call(e,n,t);return se(i)?i:n},defineProperty:t(Oe),deleteProperty:function(e,t){var r=Ce(gt(e),t);return r&&!r.configurable?false:delete e[t]},enumerate:function(t){return new e(gt(t))},get:r,getOwnPropertyDescriptor:function(e,t){return Ce(gt(e),t)},getPrototypeOf:function(e){return Ee(gt(e))},has:function(e,t){return t in e},isExtensible:function(e){return!!a(gt(e))},ownKeys:Se,preventExtensions:t(T.preventExtensions||Fe),set:o};if(_e)u.setPrototypeOf=function(e,t){return _e(gt(e),t),true};$t(Wt,{Reflect:{}});$t(Jt,"Reflect",u)}();!function(){$t(Gt,a,{includes:Ke(true)});$t(Gt,u,{at:ht(true)});function e(e){return function(t){var r=Re(t),n=ke(t),i=n.length,o=0,a=V(i),u;if(e)while(i>o)a[o]=[u=n[o++],r[u]];else while(i>o)a[o]=r[n[o++]];return a}}$t(Jt,i,{getOwnPropertyDescriptors:function(e){var t=Re(e),r={};$e.call(Se(t),function(e){Oe(r,e,wt(0,Ce(t,e)))});return r},values:e(false),entries:e(true)});$t(Jt,c,{escape:lt(/([\\\-[\]{}()*+?.,^$|])/g,"\\$1",true)})}();!function(e){ge=_t(e+"Get",true);var t=_t(e+h,true),r=_t(e+"Delete",true);$t(Jt,d,{referenceGet:ge,referenceSet:t,referenceDelete:r});Ct(oe,ge,Ne);function n(e){if(e){var n=e[w];Ct(n,ge,n.get);Ct(n,t,n.set);Ct(n,r,n["delete"])}}n(I);n(L)}("reference");!function(e){function t(t,r){$e.call(qe(t),function(t){if(t in ne)e[t]=we(de,ne[t],r)})}t("pop,reverse,shift,keys,values,entries",1);t("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3);t("join,slice,concat,push,splice,unshift,sort,lastIndexOf,"+"reduce,reduceRight,copyWithin,fill,turn");$t(Jt,a,e)}({});!function(e){if(r&&e&&!(Rt in e[w])){Ct(e[w],Rt,Xt[a])}Xt.NodeList=Xt[a]}(t.NodeList)}(typeof self!="undefined"&&self.Math===Math?self:Function("return this")(),true)},function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];for(var n=e[Symbol.iterator](),i;!(i=n.next()).done;){r.push(i.value);if(t&&r.length===t)break}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var i=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})};var o=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.configurable=true;if(n.value)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var u=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var s=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var c=function(){function e(){s(this,e);this._callbacks=[]}u(e,{add:{value:function t(e){var t=this;if(this._callbacks.indexOf(e)===-1){this._callbacks.push(e)}return function(){var r=t._callbacks.indexOf(e);if(r!==-1){t._callbacks.splice(r,1)}}}},fire:{value:function r(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}this._callbacks.forEach(function(e){e.apply(undefined,t)})}}});return e}();var f=function(){function e(){s(this,e);this._vertices={};this._edges={};this._reverseEdges={};this._vertexCount=0;this._edgeCount=0;this._addVertexCallbacks=new c;this._removeVertexCallbacks=new c;this._addEdgeCallbacks=new c;this._removeEdgeCallbacks=new c}a(e,[{key:"onAddVertex",value:function t(e){return this._addVertexCallbacks.add(e)}},{key:"onRemoveVertex",value:function r(e){return this._removeVertexCallbacks.add(e)}},{key:"addNewVertex",value:function i(t,r){if(this.hasVertex(t)){throw new e.VertexExistsError(t,this._vertices[t])}this._vertices[t]=r;this._edges[t]={};this._reverseEdges[t]={};this._vertexCount+=1;this._addVertexCallbacks.fire(t,r)}},{key:"setVertex",value:function o(t,r){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}this._vertices[t]=r}},{key:"ensureVertex",value:function u(e,t){if(!this.hasVertex(e)){this.addNewVertex(e,t)}}},{key:"addVertex",value:function f(e,t){if(this.hasVertex(e)){this.setVertex(e,t)}else{this.addNewVertex(e,t)}}},{key:"removeExistingVertex",value:function l(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}if(Object.keys(this._edges[t]).length){throw new e.HasConnectedEdgesError(t)}if(Object.keys(this._reverseEdges[t]).length){throw new e.HasConnectedEdgesError(t)}var r=this._vertices[t];delete this._vertices[t];this._vertexCount-=1;this._removeVertexCallbacks.fire(t,r)}},{key:"destroyExistingVertex",value:function h(t){var r=this;if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}this.eachVertexFrom(t,function(e){r.removeEdge(t,e)});this.eachVertexTo(t,function(e){r.removeEdge(e,t)});this.removeExistingVertex(t)}},{key:"removeVertex",value:function v(e){if(this.hasVertex(e)){this.removeExistingVertex(e)}}},{key:"destroyVertex",value:function p(e){if(this.hasVertex(e)){this.destroyExistingVertex(e)}}},{key:"vertexCount",value:function d(){return this._vertexCount}},{key:"hasVertex",value:function y(e){return e in this._vertices}},{key:"vertexValue",value:function g(e){return this._vertices[e]}},{key:"onAddEdge",value:function m(e){return this._addEdgeCallbacks.add(e)}},{key:"onRemoveEdge",value:function w(e){return this._removeEdgeCallbacks.add(e)}},{key:"addNewEdge",value:function b(t,r,n){if(this.hasEdge(t,r)){throw new e.EdgeExistsError(t,r,this.edgeValue(t,r))}if(!this.hasVertex(t)){if(this.hasVertex(r)){throw new e.VertexNotExistsError(t)}else{throw new e.VertexNotExistsError(t).v(r)}}else if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}this._edges[t][r]=n;this._reverseEdges[r][t]=null;this._edgeCount+=1;this._addEdgeCallbacks.fire(t,r,n)}},{key:"createNewEdge",value:function x(t,r,n){if(this.hasEdge(t,r)){throw new e.EdgeExistsError(t,r,this.edgeValue(t,r))}this.ensureVertex(t);this.ensureVertex(r);this.addNewEdge(t,r,n)}},{key:"setEdge",value:function E(t,r,n){if(!this.hasEdge(t,r)){throw new e.EdgeNotExistsError(t,r)}this._edges[t][r]=n}},{key:"spanEdge",value:function _(t,r,n){if(!this.hasVertex(t)){if(this.hasVertex(r)){throw new e.VertexNotExistsError(t)}else{throw new e.VertexNotExistsError(t).v(r)}}else if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}if(!this.hasEdge(t,r)){this.addNewEdge(t,r,n)}}},{key:"addEdge",value:function O(e,t,r){if(this.hasEdge(e,t)){this.setEdge(e,t,r)}else{this.addNewEdge(e,t,r)}}},{key:"ensureEdge",value:function P(e,t,r){if(!this.hasEdge(e,t)){this.createNewEdge(e,t,r)}}},{key:"createEdge",value:function C(e,t,r){if(this.hasEdge(e,t)){this.setEdge(e,t,r)}else{this.createNewEdge(e,t,r)}}},{key:"removeExistingEdge",value:function k(t,r){if(!this.hasEdge(t,r)){throw new e.EdgeNotExistsError(t,r)}var n=this._edges[t][r];delete this._edges[t][r];delete this._reverseEdges[r][t];this._edgeCount-=1;this._removeEdgeCallbacks.fire(t,r,n)}},{key:"removeEdge",value:function j(e,t){if(this.hasEdge(e,t)){this.removeExistingEdge(e,t)}}},{key:"edgeCount",value:function A(){return this._edgeCount}},{key:"hasEdge",value:function D(e,t){return this.hasVertex(e)&&this.hasVertex(t)&&e in this._edges&&t in this._edges[e]}},{key:"edgeValue",value:function T(e,t){return this.hasEdge(e,t)?this._edges[e][t]:undefined}},{key:"successors",value:function V(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return Object.keys(this._edges[t])}},{key:"predecessors",value:function M(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return Object.keys(this._reverseEdges[t])}},{key:"eachVertex",value:function R(e){var t=this;Object.keys(this._vertices).every(function(r){var n=e(r,t._vertices[r]);return n!==false})}},{key:"eachVertexFrom",value:function F(t,r){var n=this;if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}Object.keys(this._edges[t]).every(function(e){var i=r(e,n.vertexValue(e),n.edgeValue(t,e));return i!==false})}},{key:"eachVertexTo",value:function N(t,r){var n=this;if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}Object.keys(this._reverseEdges[t]).every(function(e){var i=r(e,n.vertexValue(e),n.edgeValue(e,t));return i!==false})}},{key:"eachEdge",value:function I(e){var t=this;Object.keys(this._edges).every(function(r){return Object.keys(t._edges[r]).every(function(n){var i=e(r,n,t._edges[r][n]);return i!==false})})}},{key:"topologically",value:function S(t){var r=this;var n=[];var i={};var o=function(a){n.push(a);var u=n.indexOf(a);if(u!==n.length-1){var s=n.slice(u+1).reverse();throw new e.CycleError(s)}if(!i[a]){r.eachVertexTo(a,o);i[a]={returned:t(a,r.vertexValue(a))}}n.pop()};this.eachVertex(function(e){if(!i[e]){o(e)}})}},{key:Symbol.iterator,value:function(){return this.vertices()}},{key:"vertices",value:regeneratorRuntime.mark(function L(){var e=this;var t,r,n,i,o,a;return regeneratorRuntime.wrap(function u(s){while(1)switch(s.prev=s.next){case 0:t=true;r=false;n=undefined;s.prev=3;i=Object.keys(e._vertices)[Symbol.iterator]();case 5:if(t=(o=i.next()).done){s.next=13;break}a=o.value;if(!e.hasVertex(a)){s.next=10;break}s.next=10;return[a,e._vertices[a]];case 10:t=true;s.next=5;break;case 13:s.next=19;break;case 15:s.prev=15;s.t0=s["catch"](3);r=true;n=s.t0;case 19:s.prev=19;s.prev=20;if(!t&&i["return"]){i["return"]()}case 22:s.prev=22;if(!r){s.next=25;break}throw n;case 25:return s.finish(22);case 26:return s.finish(19);case 27:case"end":return s.stop()}},L,this,[[3,15,19,27],[20,,22,26]])})},{key:"edges",value:regeneratorRuntime.mark(function U(){var e=this;var t,r,n,i,o,a,u,s,c,f,l,h;return regeneratorRuntime.wrap(function v(p){while(1)switch(p.prev=p.next){case 0:t=true;r=false;n=undefined;p.prev=3;i=Object.keys(e._edges)[Symbol.iterator]();case 5:if(t=(o=i.next()).done){p.next=37;break}a=o.value;u=true;s=false;c=undefined;p.prev=10;f=Object.keys(e._edges[a])[Symbol.iterator]();case 12:if(u=(l=f.next()).done){p.next=20;break}h=l.value;if(!e.hasEdge(a,h)){p.next=17;break}p.next=17;return[a,h,e._edges[a][h]];case 17:u=true;p.next=12;break;case 20:p.next=26;break;case 22:p.prev=22;p.t1=p["catch"](10);s=true;c=p.t1;case 26:p.prev=26;p.prev=27;if(!u&&f["return"]){f["return"]()}case 29:p.prev=29;if(!s){p.next=32;break}throw c;case 32:return p.finish(29);case 33:return p.finish(26);case 34:t=true;p.next=5;break;case 37:p.next=43;break;case 39:p.prev=39;p.t2=p["catch"](3);r=true;n=p.t2;case 43:p.prev=43;p.prev=44;if(!t&&i["return"]){i["return"]()}case 46:p.prev=46;if(!r){p.next=49;break}throw n;case 49:return p.finish(46);case 50:return p.finish(43);case 51:case"end":return p.stop()}},U,this,[[3,39,43,51],[10,22,26,34],[27,,29,33],[44,,46,50]])})},{key:"verticesFrom",value:function q(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return this._verticesFrom(t)}},{key:"_verticesFrom",value:regeneratorRuntime.mark(function W(e){var t=this;var r,n,i,o,a,u;return regeneratorRuntime.wrap(function s(c){while(1)switch(c.prev=c.next){case 0:r=true;n=false;i=undefined;c.prev=3;o=Object.keys(t._edges[e])[Symbol.iterator]();case 5:if(r=(a=o.next()).done){c.next=13;break}u=a.value;if(!t.hasEdge(e,u)){c.next=10;break}c.next=10;return[u,t._vertices[u],t._edges[e][u]];case 10:r=true;c.next=5;break;case 13:c.next=19;break;case 15:c.prev=15;c.t3=c["catch"](3);n=true;i=c.t3;case 19:c.prev=19;c.prev=20;if(!r&&o["return"]){o["return"]()}case 22:c.prev=22;if(!n){c.next=25;break}throw i;case 25:return c.finish(22);case 26:return c.finish(19);case 27:case"end":return c.stop()}},W,this,[[3,15,19,27],[20,,22,26]])})},{key:"verticesTo",value:function J(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return this._verticesTo(t)}},{key:"_verticesTo",value:regeneratorRuntime.mark(function G(e){var t=this;var r,n,i,o,a,u;return regeneratorRuntime.wrap(function s(c){while(1)switch(c.prev=c.next){case 0:r=true;n=false;i=undefined;c.prev=3;o=Object.keys(t._reverseEdges[e])[Symbol.iterator]();case 5:if(r=(a=o.next()).done){c.next=13;break}u=a.value;if(!t.hasEdge(u,e)){c.next=10;break}c.next=10;return[u,t._vertices[u],t._edges[u][e]];case 10:r=true;c.next=5;break;case 13:c.next=19;break;case 15:c.prev=15;c.t4=c["catch"](3);n=true;i=c.t4;case 19:c.prev=19;c.prev=20;if(!r&&o["return"]){o["return"]()}case 22:c.prev=22;if(!n){c.next=25;break}throw i;case 25:return c.finish(22);case 26:return c.finish(19);case 27:case"end":return c.stop()}},G,this,[[3,15,19,27],[20,,22,26]])})},{key:"vertices_topologically",value:regeneratorRuntime.mark(function z(){var t=this;var r=regeneratorRuntime.mark(function p(t){var r,u,s,c,f,l,h,v,d;return regeneratorRuntime.wrap(function y(g){while(1)switch(g.prev=g.next){case 0:i.push(t);r=i.indexOf(t);if(!(r!==i.length-1)){g.next=5;break}u=i.slice(r+1).reverse();throw new e.CycleError(u);case 5:if(o[t]){g.next=36;break}s=true;c=false;f=undefined;g.prev=9;l=a.verticesTo(t)[Symbol.iterator]();case 11:if(s=(h=l.next()).done){g.next=18;break}v=n(h.value,1);d=v[0];return g.delegateYield(p(d),"t5",15);case 15:s=true;g.next=11;break;case 18:g.next=24;break;case 20:g.prev=20;g.t6=g["catch"](9);c=true;f=g.t6;case 24:g.prev=24;g.prev=25;if(!s&&l["return"]){l["return"]()}case 27:g.prev=27;if(!c){g.next=30;break}throw f;case 30:return g.finish(27);case 31:return g.finish(24);case 32:if(!a.hasVertex(t)){g.next=35;break}g.next=35;return[t,a._vertices[t]];case 35:o[t]=true;case 36:i.pop();case 37:case"end":return g.stop()}},p,this,[[9,20,24,32],[25,,27,31]])});var i,o,a,u,s,c,f,l,h,v;return regeneratorRuntime.wrap(function d(e){while(1)switch(e.prev=e.next){case 0:i=[];o={};a=t;u=true;s=false;c=undefined;e.prev=6;f=t.vertices()[Symbol.iterator]();case 8:if(u=(l=f.next()).done){e.next=16;break}h=n(l.value,1);v=h[0];if(o[v]){e.next=13;break}return e.delegateYield(r(v),"t7",13);case 13:u=true;e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18;e.t8=e["catch"](6);s=true;c=e.t8;case 22:e.prev=22;e.prev=23;if(!u&&f["return"]){f["return"]()}case 25:e.prev=25;if(!s){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}},z,this,[[6,18,22,30],[23,,25,29]])})},{key:"clearEdges",value:function H(){var e=this;this.eachEdge(function(t,r){e.removeEdge(t,r)})}},{key:"clear",value:function $(){var e=this;this.eachVertex(function(t){e.destroyVertex(t)})}},{key:"hasCycle",value:function Y(){var e=this;var t={};var r={};var n=false;var i=function(o){if(t[o]){n=true;return}if(r[o]){return}r[o]=true;t[o]=true;e.eachVertexFrom(o,function(e){i(e);if(n){return false}});t[o]=false};this.eachVertex(function(e){i(e);if(n){return false}});return n}},{key:"hasPath",value:function K(e,t){var r=this;if(!this.hasVertex(e)||!this.hasVertex(t)){return false}var n={};var i=function(e){if(r.hasEdge(e,t)){return true}n[e]=true;var o=false;r.eachVertexFrom(e,function(e){if(!o&&!n[e]&&i(e)){o=true}});delete n[e];return o};return i(e)}},{key:"clone",value:function B(){var t=new e;this.eachVertex(function(e,r){t.addVertex(e,r)});this.eachEdge(function(e,r,n){t.addEdge(e,r,n)});return t}},{key:"transitiveReduction",value:function X(){var e=this.clone();e.eachVertex(function(t){e.eachVertex(function(r){if(e.hasEdge(t,r)){e.eachVertex(function(n){if(e.hasPath(r,n)){e.removeEdge(t,n)}})}})});return e}}]);return e}();e.exports=f;f.VertexExistsError=function(e){function t(e,r){s(this,t);this.vertices={};this.v(e,r)}o(t,e);u(t,{v:{value:function r(e,t){this.vertices[e]=t;this._refreshMessage();return this}},_refreshMessage:{value:function n(){var e=this.vertices===1?"a vertex":"vertices";this.message="This graph has "+e+" '"+Object.keys(this.vertices).join("', '")+"'"}}});return t}(Error);f.VertexNotExistsError=function(e){function t(e){s(this,t);this.vertices={};this.v(e)}o(t,e);u(t,{v:{value:function r(e){this.vertices[e]=undefined;this._refreshMessage();return this}},_refreshMessage:{value:function n(){var e=this.vertices===1?"a vertex":"vertices";this.message="This graph does not have "+e+" '"+Object.keys(this.vertices).join("', '")+"'"}}});return t}(Error);f.EdgeExistsError=function(e){function t(e,r,n){s(this,t);this.edges={};this.e(e,r,n)}o(t,e);u(t,{e:{value:function r(e,t,n){this.edges[e]=i({},t,n);this._refreshMessage();return this}},_refreshMessage:{value:function n(){var e=this;var t=[];Object.keys(this.edges).forEach(function(r){Object.keys(e.edges[r]).forEach(function(e){t.push("('"+r+"', '"+e+"')")})});var r=t.length===1?"an edge":"edges";this.message="This graph has "+r+" "+t.join(", ")}}});return t}(Error);f.EdgeNotExistsError=function(e){function t(e,r){s(this,t);this.edges={};this.e(e,r)}o(t,e);u(t,{e:{value:function r(e,t){this.edges[e]=i({},t,undefined);this._refreshMessage();return this}},_refreshMessage:{value:function n(){var e=this;var t=[];Object.keys(this.edges).forEach(function(r){Object.keys(e.edges[r]).forEach(function(e){t.push("('"+r+"', '"+e+"')")})});var r=t.length===1?"an edge":"edges";this.message="This graph does not have "+r+" "+t.join(", ")}}});return t}(Error);f.HasConnectedEdgesError=function(e){function t(e){s(this,t);this.message="The '"+e+"' vertex has connected edges";this.key=e}o(t,e);return t}(Error);f.CycleError=function(e){function t(e){s(this,t);this.message="This graph contains a cycle: "+e;this.cycle=e}o(t,e);return t}(Error)},function(e,t,r){"use strict";var n=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function h(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var i=Object.getPrototypeOf(e);if(i===null){return undefined}else{return h(i,t,r)}}else if("value"in n&&n.writable){return n.value}else{var o=n.get;if(o===undefined){return undefined}return o.call(r)}};var a=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var u=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var s=r(4);var c=s.indent;var f=s.oncePer;var l=s.arraysEqual;e.exports=f("Composed",function(e){e.newOperationType("Composed",function(t){function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}u(this,r);o(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,t);this._components=this.arg||[]}a(r,t);i(r,{clone:{value:function s(){var e=o(Object.getPrototypeOf(r.prototype),"clone",this).call(this);e._components=this._components.map(function(e){return e.clone()});return e}},equals:{value:function f(e){return l(this._components,e._components,function(e,t){return e.equals(t)})}},applyTo:{value:function h(e){var t=arguments[1]===undefined?{}:arguments[1];this._components.forEach(function(r){r.applyTo(e,t)})}},toString:{value:function v(){var e=arguments[0]===undefined?{}:arguments[0];var t=o(Object.getPrototypeOf(r.prototype),"toString",this).call(this,e);if(this._components.length>0){var n="";this._components.forEach(function(t){n+="• "+t.toString(e)+"\n"});t+="\n"+c(n,4)}return t}},precondition:{value:function p(e){if(this._components.length===0){return true}return this._components[0].precondition(e)}},_collapse:{value:function d(){var t=this;this._components=function(){var r=[];t._components.forEach(function(t){if(t instanceof e.Delta.Composed){t._collapse();r.push.apply(r,n(t._components))}else{r.push(t)}});return r}();var r=undefined;do{r=false;this._components=function(){var n=[];

for(var i=0;i<t._components.length-1;i+=1){var o=t._components[i].composedWith(t._components[i+1]);if(o instanceof e.Delta.Composed){n.push(t._components[i])}else{n.push(o);r=true;i+=1}}if(i===t._components.length-1){n.push(t._components[i])}return n}()}while(r)}},methods:{get:function(){return[]}}});return r}(e.Delta));e.newComposition(function(t,r){return t instanceof e.Delta.Composed||r instanceof e.Delta.Composed},function(t,r){var i=t instanceof e.Delta.Composed?t._components:[t];var o=r instanceof e.Delta.Composed?r._components:[r];var a=new e.Delta.Composed([].concat(n(i),n(o)));a._collapse();return a})})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,t)}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var a=n(r(22));var u=r(4);var s=u.extend;var c=u.oncePer;var f=n(r(9));e.exports=c("Proxy",function(e){f(e);e.Proxy=function(){function e(){var t=arguments[0]===undefined?{}:arguments[0];var r=t.parent;var n=t.delta;o(this,e);this._parent=r;this._active=true;this._delta=n}i(e,{delta:{value:function t(){return this._delta}},active:{get:function(){return this._active}},deactivate:{value:function r(){this._active=false}}});return e}();s(e.Delta.prototype,{"do":function t(){var e;for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n]}var i=this.constructor.Proxy;if(!i){throw new Error("Calling 'do' on delta type '"+this.type+"', which has no Proxy interface.")}return(e=new i({delta:this}))["do"].apply(e,r)}})})}])});
//# sourceMappingURL=dist/delta.full.min.js.map