!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("js-graph")):"function"==typeof define&&define.amd?define(["js-graph"],e):"object"==typeof exports?exports.DeltaJs=e(require("js-graph")):t.DeltaJs=e(t.JsGraph)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=r(n(1)),i=r(n(2)),a=n(3),u=a.ReadableTarget,s=a.WritableTarget;o.extend(i,{ReadableTarget:u,WritableTarget:s});var l=r(n(4));o.extend(i,{Path:l});var c=n(5),f=c.ApplicationError,p=c.MultipleOverloadsApplicationError,d=c.NoOverloadsApplicationError,h=c.CompositionError,v=c.MultipleOverloadsCompositionError,y=c.ConstraintFailure,g=c.ApplicationOrderCycle,b=c.UnresolvedDeltaConflict,m=c.MultipleActiveProxiesError;o.extend(i,{ApplicationError:f,MultipleOverloadsApplicationError:p,NoOverloadsApplicationError:d,CompositionError:h,MultipleOverloadsCompositionError:v,ConstraintFailure:y,ApplicationOrderCycle:g,UnresolvedDeltaConflict:b,MultipleActiveProxiesError:m}),t.exports=i},function(t){"use strict";var e=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},n={newClass:function(){var t=void 0===arguments[0]?{}:arguments[0],e=void 0===arguments[1]?{}:arguments[1];"function"!=typeof t&&(e=t,t=function(){});var n=t;return n.prototype=e,n.prototype.constructor=n,n},newSubclass:function(t){var e=void 0===arguments[1]?{}:arguments[1],r=void 0===arguments[2]?{}:arguments[2];"function"!=typeof e&&(r=e,e=function(t){return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.apply(this,n)}});var o=e(t.prototype.constructor);return o.prototype=Object.create(t.prototype),n.extend(o.prototype,r),o.prototype.constructor=o,o},extend:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return n.forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t},"default":function(t){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;r>i;i++)o[i-1]=arguments[i];var a=o.slice(0,-1),u=o[o.length-1];if(0===a.length)return t;var s=n.o.apply(n,[t].concat(e(a.slice(0,-1))));return n.isUndefined(s[a[a.length-1]])&&(s[a[a.length-1]]=u),s[a[a.length-1]]},o:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;e>o;o++)r[o-1]=arguments[o];return n["default"].apply(n,[t].concat(r,[{}]))},a:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;e>o;o++)r[o-1]=arguments[o];return n["default"].apply(n,[t].concat(r,[[]]))},assert:function(t,e){if(!t)throw new Error(e||"Assertion failed")},isUndefined:function(t){return"undefined"==typeof t},isDefined:function(t){return"undefined"!=typeof t},repeat:function(t,e){return new Array(t+1).join(e)},indent:function(t,e){var r=void 0===arguments[2]?" ":arguments[2];return t.replace(/^(?!\s*$)/gm,n.repeat(e,r))}};t.exports=n},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t,e){var n=Object.create(t.prototype),r=t.apply(n,e);return null==r||"object"!=typeof r&&"function"!=typeof r?n:r},i=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=(r(n(6)),r(n(1))),s=(r(n(4)),n(3)),l=(s.ReadableTarget,s.WritableTarget,s.rt,s.wt,r(n(7))),c=r(n(8)),f=r(n(9)),p=r(n(10)),d=r(n(11)),h=r(n(12)),v=r(n(13)),y=r(n(14)),g=r(n(15)),b=r(n(16)),m=r(n(17)),w=function(){function t(){a(this,t),l(this),m(this),c(this),f(this),p(this),d(this),h(this),v(this),y(this),g(this),b(this)}return i(t,null,{newOperationType:{value:function(e,n,r){var i=this;u.assert(e[0]===e[0].toUpperCase(),"Delta operation classes must have a name starting with a capital letter - '"+e+"' does not."),u.assert(u.isUndefined(this.Delta[e]),"The '"+e+"' operation type already exists.");this.Delta[e]=n,n.Proxy=r;var a=n.prototype.applyTo||function(){};u.extend(n.prototype,{applyTo:function(e){var n=void 0===arguments[1]?{}:arguments[1];if(this.selected){e instanceof t.ReadableTarget||(e=new t.ReadableTarget(e));var r=this.evaluatePrecondition(e);if(r!==!0)throw r;a.call(this,e,n)}},type:e});var s=e[0].toLowerCase()+e.slice(1);return(n.prototype.methods||[s]).forEach(function(t){i.ContainerProxy.newProxyMethod(t,function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return o(n,e)})}),n},writable:!0,configurable:!0},newProxyMethod:{value:function(t,e){this.ContainerProxy.newProxyMethod(t,e)},writable:!0,configurable:!0},newComposition:{value:function(t,e){this.Delta.newComposition(t,e)},writable:!0,configurable:!0}}),t}();t.exports=w},function(t,e,n){"use strict";function r(t,e){return new s(t,e)}function o(t,e){return new u(t,e)}var i=function(t){return t&&t.__esModule?t["default"]:t};e.wt=r,e.rt=o;var a=i(n(1)),u=e.ReadableTarget=a.newClass(function(t){this._val=t},Object.defineProperties({getValue:function(){return this._val}},{value:{get:function(){return this.getValue()},set:function(t){this.setValue(t)},enumerable:!0,configurable:!0}})),s=e.WritableTarget=a.newSubclass(u,function(){return function(t,e){this._obj=t,this._prop=e}},{getValue:function(){return this._obj[this._prop]},setValue:function(t){this._obj[this._prop]=t},"delete":function(){delete this._obj[this._prop]}});u.prototype.chain=function(t){return a.assert(this.value instanceof Object,"The ReadableTarget.prototype.chain method expects the target value to be an Object."),new s(this.value,t)},Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var n,r=[],o=t[Symbol.iterator]();!(n=o.next()).done&&(r.push(n.value),!e||r.length!==e););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(n(1)),a=i.newClass(function(){var t=void 0===arguments[0]?"":arguments[0],e=t.match(/^([.#]?)(\w*|\(\w+\))(.*)$/);i.assert(e,"The path string '"+t+"' is not well formed.");var n=o(e,4),r=n[1],u=n[2],s=n[3];"#"===r?this.set(new a(".(instance)."+u+s)):""!==u&&(this._prop=u,""!==s&&(this._rest=new a(s)))},Object.defineProperties({set:function(t){this._prop=t._prop,this._rest=t._rest},toString:function(){var t="";return i.isDefined(this.prop)&&(t+=this.prop,i.isDefined(this.rest)&&(t+="."+this.rest.toString())),t}},{prop:{get:function(){return this._prop},enumerable:!0,configurable:!0},rest:{get:function(){return this._rest},enumerable:!0,configurable:!0}}));t.exports=a},function(t,e){"use strict";{var n=function u(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:u(o,e,n)}if("value"in r&&r.writable)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=e.ApplicationError=function(t){function e(t,r){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.name="ApplicationError",this.message="This delta of type '"+t.type+"' cannot apply to this value of type '"+typeof r+"'.",this.delta=t,this.value=r}return r(e,t),e}(Error),a=(e.MultipleOverloadsApplicationError=function(t){function e(t,r){var i=void 0===arguments[2]?[]:arguments[2];o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,r),this.name="MultipleOverloadsApplicationError",this.message="None of the delta-types "+t.overloads.map(function(t){return"'"+t.type+"'"}).join(",")+" can apply to this value of type '"+typeof r+"'."+i.map(function(t){return"\n-- "+t.message}).join(""),this.errors=i}return r(e,t),e}(i),e.NoOverloadsApplicationError=function(t){function e(t,r){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,r),this.name="NoOverloadsApplicationError",this.message="This delta of type '"+t.type+"' has no spcific deltas assigned to it, so it cannot apply to this value of type '"+typeof r+"."}return r(e,t),e}(i),e.CompositionError=function(t){function e(t,r){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.name="CompositionError",this.message="This delta of type '"+t.type+"' cannot be composed with this other delta of type '"+r.type+"'.",this.delta1=t,this.delta2=r}return r(e,t),e}(Error));e.MultipleOverloadsCompositionError=function(t){function e(t,r){var i=void 0===arguments[2]?[]:arguments[2];o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,r),this.name="MultipleOverloadsCompositionError",this.message="There are no overloads to compose this delta of type '"+t.type+"' with this other delta of type '"+r.type+"'."+i.map(function(t){return"\n-- "+t.message}).join(""),this.errors=i}return r(e,t),e}(a),e.ConstraintFailure=function(t){function e(t){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.name="ConstraintFailure",this.message="The feature '"+t.name+"' is both selected and excluded by its constraints.",this.feature=t}return r(e,t),e}(Error),e.ApplicationOrderCycle=function(t){function e(t,r){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.name="ApplicationOrderCycle",this.message="The new application order between "+t+" and "+r+" created a cycle.",this.from=t,this.to=r}return r(e,t),e}(Error),e.UnresolvedDeltaConflict=function(t){function e(t){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.name="UnresolvedDeltaConflict";var r=t.map(function(t){return"'"+t.name+"'"}).join(",");this.message="There is an unresolved conflict between deltas "+r+".",this.deltas=t}return r(e,t),e}(Error),e.MultipleActiveProxiesError=function(t){function e(){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.name="MultipleActiveProxiesError",this.message="Only one Proxy per path can be active at any given time."}return r(e,t),e}(Error)}Object.defineProperty(e,"__esModule",{value:!0})},function(e){e.exports=t},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=r(n(1)),u=n(3),s=u.ReadableTarget,l=u.wt,c=(r(n(16)),n(5)),f=c.ApplicationError,p=c.CompositionError;t.exports=function(t){if(!a.isDefined(t.Delta)){var e=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];i(this,e),this.id=++e._nextID,this.args=n}return o(e,{newComposition:{value:function(e,n){t.Delta._compositions.push({precondition:e,compose:n})},writable:!0,configurable:!0},composed:{value:function(){for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=new t.Delta.NoOp;return r.forEach(function(n){var r=i,o=n||new t.Delta.NoOp,a=function(){},u=e._compositions.some(function(t){var e=t.precondition,n=t.compose;return e(r,o)?(a=n,!0):void 0});if(!u)throw new p(r,o);i=a(r,o)}),i},writable:!0,configurable:!0}},{arg:{get:function(){return this.args[0]},set:function(t){this.args[0]=t},configurable:!0},clone:{value:function(){return new this.constructor(this.arg)},writable:!0,configurable:!0},evaluatePrecondition:{value:function(t){if(this.precondition){var e=this.precondition(t);if(e instanceof f)return e;if(!e)return new f(this,t.value)}return!0},writable:!0,configurable:!0},appliedTo:{value:function(t){var e=void 0===arguments[1]?{}:arguments[1];t instanceof s&&(t=t.value),"function"==typeof t.clone&&(t=t.clone());var n={value:t};return this.applyTo(l(n,"value"),e),n.value},writable:!0,configurable:!0},composedWith:{value:function(e){return t.Delta.composed(this,e)},writable:!0,configurable:!0},toString:{value:function(){var t=void 0===arguments[0]?{}:arguments[0],e=this.type;return t.targetProp&&(e+=" ‹"+t.targetProp+"›"),this.args.length>0&&(e+=": "+this.args.map(function(t){return JSON.stringify(t)}).join(",")),t.debug&&(e+=" ("+this.id+")"),e},writable:!0,configurable:!0}}),e}();e._nextID=0,e._compositions=[],t.Delta=e}}},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},i=function h(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:h(o,e,n)}if("value"in r&&r.writable)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=r(n(1)),l=r(n(7)),c=n(5),f=c.MultipleOverloadsApplicationError,p=c.NoOverloadsApplicationError,d=c.MultipleOverloadsCompositionError;t.exports=function(t){s.isDefined(t.Delta.Overloaded)||(l(t),t.newOperationType("Overloaded",function(t){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];u(this,e),i(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,n),this.overloads=this.arg||[]}return a(e,t),o(e,null,{clone:{value:function(){var t=i(Object.getPrototypeOf(e.prototype),"clone",this).call(this);return t.overloads=this.overloads.map(function(t){return t.clone()}),t},writable:!0,configurable:!0},applyTo:{value:function(t){var e=void 0===arguments[1]?{}:arguments[1],n=[],r=this.overloads.some(function(r){var o=r.evaluatePrecondition(t);return o!==!0?(n.push(o),!1):(r.applyTo(t,e),!0)});if(!r)throw 0===n.length?new p(this,t.value):1===n.length?n[0]:new f(this,t.value,n)},writable:!0,configurable:!0},toString:{value:function(){var t=void 0===arguments[0]?{}:arguments[0],n=i(Object.getPrototypeOf(e.prototype),"toString",this).call(this,t),r=this.overloads.map(function(e){return e.toString(t)}).join("\n");return n+="\n"+s.indent(r,4)},writable:!0,configurable:!0}}),e}(t.Delta)),t.newComposition(function(e,n){return e instanceof t.Delta.Overloaded||n instanceof t.Delta.Overloaded},function(e,n){var r=e instanceof t.Delta.Overloaded?e.overloads:[e],o=n instanceof t.Delta.Overloaded?n.overloads:[n],i=new t.Delta.Overloaded,a=[];if(r.forEach(function(t){o.forEach(function(e){try{i.overloads.push(t.composedWith(e))}catch(n){a.push(n)}})}),0===i.overloads.length)throw new d(e,n,a);return i}))}},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},i=function f(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:f(o,e,n)}if("value"in r&&r.writable)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=r(n(1)),l=(r(n(4)),n(3).wt),c=r(n(17));t.exports=function(t){function e(t,e){return function(n,r){return n.type===t&&r.type===e}}s.isDefined(t.Delta.Modify)||(c(t),t.newOperationType("Modify",function(e){function n(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];u(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,e),this.subDeltas={},s.extend(this.subDeltas,this.arg||{})}return a(n,e),o(n,null,{clone:{value:function(){var t=this,e=i(Object.getPrototypeOf(n.prototype),"clone",this).call(this);return Object.keys(this.subDeltas).forEach(function(n){e.subDeltas[n]=t.subDeltas[n].clone()}),e},writable:!0,configurable:!0},precondition:{value:function(t){return t.value instanceof Object},writable:!0,configurable:!0},applyTo:{value:function(t){var e=this,n=void 0===arguments[1]?{}:arguments[1];Object.keys(this.subDeltas).forEach(function(r){n.restrictToProperty&&n.restrictToProperty!==r||e.subDeltas[r].applyTo(l(t.value,r),s.extend({},n,{restrictToProperty:null}))})},writable:!0,configurable:!0},toString:{value:function(){var t=this,e=void 0===arguments[0]?{}:arguments[0],r=i(Object.getPrototypeOf(n.prototype),"toString",this).call(this,e);if(Object.keys(this.subDeltas).length>0){var o=Object.keys(this.subDeltas).map(function(n){return t.subDeltas[n].toString(s.extend({},e,{targetProp:n}))}).join("\n");r+="\n"+s.indent(o,4)}return r},writable:!0,configurable:!0},"do":{value:function(){for(var e,n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];return(e=new t.Delta.Modify.Proxy({delta:this}))["do"].apply(e,r)},writable:!0,configurable:!0}}),n}(t.Delta),function(e){function n(){u(this,n),null!=e&&e.apply(this,arguments)}return a(n,e),o(n,null,{processProxyArguments:{value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var r,o={};do{if(0===e.length)return null;var i=e.shift();"string"==typeof i?r=i:s.extend(o,i)}while(!r);return{options:o,path:r,args:e}},writable:!0,configurable:!0},addOperation:{value:function(e,n,r){if(!e.prop)throw new Error("Operations on a Modify.Proxy need to have a non-empty path.");var o,i;return e.rest?(i=this.addChildProxy(e.prop,new t.Delta.Modify),o=i.addOperation(e.rest,n,r)):i=o=this.addChildProxy(e.prop,n),o},writable:!0,configurable:!0},delta:{value:function(){var t=this,e=i(Object.getPrototypeOf(n.prototype),"delta",this).call(this);return e.subDeltas={},this.childKeys().forEach(function(n){e.subDeltas[n]=t.childDelta(n)}),e},writable:!0,configurable:!0}}),n}(t.ContainerProxy)),t.newComposition(e("Modify","Modify"),function(e,n){var r=e.clone();return Object.keys(n.subDeltas).forEach(function(e){r.subDeltas[e]=t.Delta.composed(r.subDeltas[e],n.subDeltas[e])}),r}))}},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},i=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=r(n(1)),s=n(3),l=s.WritableTarget,c=(s.ReadableTarget,s.rt,s.wt,r(n(7))),f=r(n(9));t.exports=function(t){function e(t,e){return function(n,r){return n.type===t&&r.type===e}}function n(e,n){return"string"==typeof n&&(n=function(t){return function(e){return e[t]}}(n)),function(r,o){return new t.Delta[e](n&&n({d1:r,d2:o,p1:r.arg,p2:o.arg}))}}u.isDefined(t._basicOperationsDefined)||(t._basicOperationsDefined=!0,c(t),f(t),t.newOperationType("NoOp",function(t){function e(){a(this,e),null!=t&&t.apply(this,arguments)}return i(e,t),e}(t.Delta)),t.newOperationType("Add",function(t){function e(){a(this,e),null!=t&&t.apply(this,arguments)}return i(e,t),o(e,null,{precondition:{value:function(t){return t instanceof l&&u.isUndefined(t.value)},writable:!0,configurable:!0},applyTo:{value:function(t){t.value=this.arg},writable:!0,configurable:!0}}),e}(t.Delta)),t.newOperationType("Replace",function(t){function e(){a(this,e),null!=t&&t.apply(this,arguments)}return i(e,t),o(e,null,{precondition:{value:function(t){return t instanceof l&&u.isDefined(t.value)},writable:!0,configurable:!0},applyTo:{value:function(t){t.value=this.arg},writable:!0,configurable:!0}}),e}(t.Delta)),t.newOperationType("Remove",function(t){function e(){a(this,e),null!=t&&t.apply(this,arguments)}return i(e,t),o(e,null,{precondition:{value:function(t){return t instanceof l&&u.isDefined(t.value)},writable:!0,configurable:!0},applyTo:{value:function(t){t["delete"]()},writable:!0,configurable:!0}}),e}(t.Delta)),t.newOperationType("Forbid",function(t){function e(){a(this,e),null!=t&&t.apply(this,arguments)}return i(e,t),o(e,null,{precondition:{value:function(t){return u.isUndefined(t.value)},writable:!0,configurable:!0}}),e}(t.Delta)),t.newComposition(function(e){return e instanceof t.Delta.NoOp},function(t,e){return e.clone()}),t.newComposition(function(e,n){return n instanceof t.Delta.NoOp},function(t){return t.clone()}),t.newComposition(e("Add","Modify"),n("Add",function(t){var e=t.d2,n=t.p1;return e.appliedTo(n)})),t.newComposition(e("Modify","Remove"),n("Remove")),t.newComposition(e("Add","Remove"),n("Forbid")),t.newComposition(e("Remove","Add"),n("Replace",function(t){var e=t.p2;return e})),t.newComposition(e("Remove","Forbid"),n("Remove")),t.newComposition(e("Forbid","Add"),n("Add",function(t){var e=t.p2;return e})),t.newComposition(e("Forbid","Forbid"),n("Forbid")),t.newComposition(e("Modify","Replace"),n("Replace",function(t){var e=t.p2;return e})),t.newComposition(e("Add","Replace"),n("Add",function(t){var e=t.p2;return e})),t.newComposition(e("Replace","Modify"),n("Replace",function(t){var e=t.d2,n=t.p1;return e.appliedTo(n)})),t.newComposition(e("Replace","Remove"),n("Remove")),t.newComposition(e("Replace","Replace"),n("Replace",function(t){var e=t.p2;return e})))}},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},i=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},a=function d(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:d(o,e,n)}if("value"in r&&r.writable)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},u=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},l=r(n(1)),c=n(3),f=(c.WritableTarget,c.ReadableTarget,c.rt,c.wt,r(n(10))),p=r(n(17));t.exports=function(t){function e(t,e){return function(n,r){return n.type===t&&r.type===e}}function n(e,n){return"string"==typeof n&&(n=function(t){return function(e){return e[t]}}(n)),function(r,o){return new t.Delta[e](n&&n({d1:r,d2:o,p1:r.arg,p2:o.arg}))}}l.isDefined(t.Delta.PutIntoArray)||(f(t),p(t),t.newOperationType("PutIntoArray",function(t){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];s(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,n),this.values=this.arg?Array.isArray(this.arg)?this.arg:[this.arg]:[]}return u(e,t),i(e,null,{clone:{value:function(){var t=a(Object.getPrototypeOf(e.prototype),"clone",this).call(this);return t.values=[].concat(o(this.values)),t},writable:!0,configurable:!0},precondition:{value:function(t){return l.isDefined(t.value)&&Array.isArray(t.value)},writable:!0,configurable:!0},applyTo:{value:function(t){var e=t.value;this.values.forEach(function(t){var n=t.method,r=t.value;switch(n){case"prepend":e.unshift(r);break;case"insert":var o=Math.floor(Math.random()*(e.length+1));e.splice(o,0,r);break;case"append":e.push(r)}})},writable:!0,configurable:!0},methods:{get:function(){return[]},configurable:!0}}),e}(t.Delta)),t.newProxyMethod("prepend",function(e){return new t.Delta.PutIntoArray({method:"prepend",value:e})}),t.newProxyMethod("insert",function(e){return new t.Delta.PutIntoArray({method:"insert",value:e})}),t.newProxyMethod("append",function(e){return new t.Delta.PutIntoArray({method:"append",value:e})}),t.newComposition(e("Add","PutIntoArray"),n("Add",function(t){var e=t.d2,n=t.p1;return e.appliedTo(n)})),t.newComposition(e("Replace","PutIntoArray"),n("Replace",function(t){var e=t.d2,n=t.p1;return e.appliedTo(n)})),t.newComposition(e("PutIntoArray","Remove"),n("Remove")),t.newComposition(e("PutIntoArray","Replace"),n("Replace",function(t){var e=t.p2;return e})),t.newComposition(e("PutIntoArray","PutIntoArray"),function(e,n){return new t.Delta.PutIntoArray([].concat(o(e.values),o(n.values)))}))}},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},i=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},a=function d(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:d(o,e,n)}if("value"in r&&r.writable)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},u=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},l=r(n(1)),c=n(3).WritableTarget,f=r(n(10)),p=r(n(17));t.exports=function(t){function e(t,e){return function(n,r){return n.type===t&&r.type===e}}function n(e,n){return"string"==typeof n&&(n=function(t){return function(e){return e[t]}}(n)),function(r,o){return new t.Delta[e](n&&n({d1:r,d2:o,p1:r.arg,p2:o.arg}))}}l.isDefined(t.Delta.PutIntoFunction)||(f(t),p(t),t.newOperationType("PutIntoFunction",function(t){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];s(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,n),this.values=this.arg?Array.isArray(this.arg)?this.arg:[this.arg]:[]}return u(e,t),i(e,null,{clone:{value:function(){var t=a(Object.getPrototypeOf(e.prototype),"clone",this).call(this);return t.values=[].concat(o(this.values)),t},writable:!0,configurable:!0},precondition:{value:function(t){return l.isDefined(t.value)&&"function"==typeof t.value&&(l.isDefined(t.value._DeltaJs_functions)||t instanceof c)},writable:!0,configurable:!0},applyTo:{value:function(t){if(l.isUndefined(t.value._DeltaJs_functions)){var e=t.value,n=function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){for(var t=this,e=arguments.length,r=Array(e),o=0;e>o;o++)r[o]=arguments[o];var i;return n._DeltaJs_functions.forEach(function(e){i=e.apply(t,r)}),i});n._DeltaJs_functions=[function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];e.apply(this,n)}],t.value=n}var r=t.value._DeltaJs_functions;this.values.forEach(function(t){var e=t.method,n=t.value;switch(e){case"prepend":r.unshift(n);break;case"insert":var o=Math.floor(Math.random()*(r.length+1));r.splice(o,0,n);break;case"append":r.push(n)}})},writable:!0,configurable:!0},methods:{get:function(){return[]},configurable:!0}}),e}(t.Delta)),t.newProxyMethod("prepend",function(e){return new t.Delta.PutIntoFunction({method:"prepend",value:e})}),t.newProxyMethod("insert",function(e){return new t.Delta.PutIntoFunction({method:"insert",value:e})}),t.newProxyMethod("append",function(e){return new t.Delta.PutIntoFunction({method:"append",value:e})}),t.newComposition(e("Add","PutIntoFunction"),n("Add",function(t){var e=t.d2,n=t.p1;return e.appliedTo(n)})),t.newComposition(e("Replace","PutIntoFunction"),n("Replace",function(t){var e=t.d2,n=t.p1;return e.appliedTo(n)})),t.newComposition(e("PutIntoFunction","Remove"),n("Remove")),t.newComposition(e("PutIntoFunction","Replace"),n("Replace",function(t){var e=t.p2;return e})),t.newComposition(e("PutIntoFunction","PutIntoFunction"),function(e,n){return new t.Delta.PutIntoFunction([].concat(o(e.values),o(n.values)))}))}},function(t,e,n){"use strict";{var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},i=function p(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,n)}if("value"in r&&r.writable)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=r(n(6)),l=r(n(1)),c=(r(n(4)),r(n(9))),f=r(n(17));n(5).ApplicationOrderCycle}t.exports=function(t){l.isDefined(t.Delta.DeltaModel)||(c(t),f(t),t.newOperationType("DeltaModel",function(t){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];u(this,e),i(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,n),this.graph=new s}return a(e,t),o(e,null,{clone:{value:function(){var t=i(Object.getPrototypeOf(e.prototype),"clone",this).call(this);return t.graph=this.graph.clone(),t.graph.eachVertex(function(e,n){t.graph.setVertex(e,n.clone())}),t},writable:!0,configurable:!0},applyTo:{value:function(t){var e=void 0===arguments[1]?{}:arguments[1];this.graph.topologically(function(n,r){r.applyTo(t,e)})},writable:!0,configurable:!0},toString:{value:function(){var t=void 0===arguments[0]?{}:arguments[0],n=i(Object.getPrototypeOf(e.prototype),"toString",this).call(this,t);if(this.graph.vertexCount()>0){var r="";this.graph.topologically(function(e,n){r+="["+e+"] "+n.toString(t)+"\n"}),n+="\n"+l.indent(r,4)}return n},writable:!0,configurable:!0}}),e}(t.Delta),function(e){function n(){u(this,n),null!=e&&e.apply(this,arguments)}return a(n,e),o(n,null,{processProxyArguments:{value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var r,o={};do{if(0===e.length)return null;var i=e.shift();"string"==typeof i?o.name?r=i:o.name=i:l.extend(o,i)}while(!r);return{options:o,path:r,args:e}},writable:!0,configurable:!0},addOperation:{value:function(e,n,r){var o;if(e.prop){var i=l.extend({},r,{name:void 0});o=this.addChildProxy(r.name,new t.Delta.Modify).addOperation(e,n,i)}else o=this.addChildProxy(r.name,n);return o},writable:!0,configurable:!0},delta:{value:function(){},writable:!0,configurable:!0}}),n}(t.ContainerProxy)),t.newComposition(function(e,n){return e instanceof t.Delta.DeltaModel||n instanceof t.Delta.DeltaModel},function(e,n){var r=new t.Delta.DeltaModel;return r.graph.addNewVertex(1,e),r.graph.addNewVertex(2,n),r.graph.addNewEdge(1,2),r}))}},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var n,r=[],o=t[Symbol.iterator]();!(n=o.next()).done&&(r.push(n.value),!e||r.length!==e););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(n(1)),a=n(5).ConstraintFailure;t.exports=function(t){function e(e){return e=Array.isArray(e)?e:[e],e=e.map(function(e){return e instanceof t.Feature?e.name:e})}function n(t){var n=void 0===arguments[1]?[]:arguments[1];h=!0,n===!0?f[t]=!0:n===!1||c[t]!==!0&&i.a(c,t).push(e(n))}function r(t,r){e(r).forEach(function(e){n(e,t)})}function u(t){var n=void 0===arguments[1]?[]:arguments[1];
h=!0,n===!1?d[t]=!1:n===!0||p[t]!==!1&&i.a(p,t).push(e(n))}function s(t,n){e(n).forEach(function(e){u(e,t)})}function l(){if(h){h=!1;var e;do e=!1,Object.keys(t.features).forEach(function(t){f[t]||(i.isUndefined(f[t])&&(f[t]=!1),(c[t]||[]).some(function(t){return t.every(function(t){return f[t]})})&&(f[t]=!0,e=!0))});while(e);Object.keys(t.features).forEach(function(t){d[t]=(p[t]||[]).every(function(t){return t.some(function(t){return f[t]})})})}}if(!t._featuresImplemented){t._featuresImplemented=!0;var c={},f={},p={},d={},h=!1;t.Feature=i.newClass(function(t){var e=this,n=void 0===arguments[1]?{}:arguments[1];this.name=t,this.options=n,Object.keys(n).forEach(function(t){e.addOption(t,n[t])})},Object.defineProperties({select:function(){this["if"](!0)}},{selected:{get:function(){if(l(),f[this.name]&&!d[this.name])throw new a(this);return f[this.name]},enumerable:!0,configurable:!0},condition:{get:function(){return c[this.name]},enumerable:!0,configurable:!0},conditional:{get:function(){return i.a(c,this.name).length>0},enumerable:!0,configurable:!0},restricted:{get:function(){return i.a(p,this.name).length>0},enumerable:!0,configurable:!0}}));var v=[["if",[n,s]],["onlyIf",[u]],["selects",[r,u]],["requiredBy",[s]],["iff",[n,s,u]]];t.Feature.prototype.addOption=function(t,e){var n=this;v.forEach(function(r){var i=o(r,2),a=i[0],u=i[1];t===a&&u.forEach(function(t){t(n.name,e)})})},v.forEach(function(e){var n=o(e,1),r=n[0];t.Feature.prototype[r]=function(t){this.addOption(r,t)}}),t.features={},i.isDefined(t.constructor._featuresImplemented)||(t.constructor._featuresImplemented=!0,i.extend(t.constructor.prototype,{newFeature:function(t){var e=void 0===arguments[1]?{}:arguments[1];return i.assert(i.isUndefined(this.features[t]),"A feature with the name '"+t+"' already exists."),this.features[t]=new this.Feature(t,e)}}))}}},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0})},i=r(n(1)),a=n(3).rt,u=r(n(13));t.exports=function(t){u(t),t._variationPointsImplemented||(t._variationPointsImplemented=!0,t._deltaModel=new t.Delta.DeltaModel,i.isDefined(t.constructor._variationPointsImplemented)||(t.constructor._variationPointsImplemented=!0,i.extend(t.constructor.prototype,{vp:function(t,e){var n=o({},t,e);return this._deltaModel.applyTo(a(n),{restrictToProperty:t}),n[t]},operation:function(){var t;return(t=this._deltaModel).operation.apply(t,arguments)},"do":function(){for(var t,e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];return(t=this._deltaModel)["do"].apply(t,[{feature:!0}].concat(n))}})))}},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},i=r(n(1));t.exports=function(t){t._applicationConditionsImplemented||(t._applicationConditionsImplemented=!0,i.extend(t.Delta.prototype,Object.defineProperties({},{applicationCondition:{get:function(){return this._applicationCondition},set:function(t){this._applicationCondition=t},enumerable:!0,configurable:!0},selected:{get:function(){return i.isUndefined(this.applicationCondition)||this.applicationCondition.selected},enumerable:!0,configurable:!0}})),i.isDefined(t.constructor._applicationConditionsImplemented)||(t.constructor._applicationConditionsImplemented=!0,i.extend(t.constructor.prototype,{select:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];n.forEach(function(e){if(Array.isArray(e)){var n;(n=t).select.apply(n,o(e))}else t.features[e].select()})}})))}},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},o=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},i=function h(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:h(o,e,n)}if("value"in r&&r.writable)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},u=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},l=(r(n(6)),r(n(1))),c=r(n(4)),f=r(n(7)),p=r(n(8)),d=n(5).MultipleActiveProxiesError;t.exports=function(t){if(!l.isDefined(t.Proxy)){f(t),t.Proxy=function(){function t(){var e=void 0===arguments[0]?{}:arguments[0],n=e.parent,r=e.delta;s(this,t),this._parent=n,this._active=!0,this._delta=r}return u(t,null,{delta:{value:function(){return this._delta},writable:!0,configurable:!0},active:{get:function(){return this._active},configurable:!0},deactivate:{value:function(){this._active=!1},writable:!0,configurable:!0}}),t}();var e=function(t){function e(){s(this,e),null!=t&&t.apply(this,arguments)}return a(e,t),e}(t.Proxy);t.BasicProxy=e,t.ContainerProxy=function(e){function n(){var t=void 0===arguments[0]?{}:arguments[0];s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,t),this._doArgs=[],this._original=this,this._children={}}return a(n,e),u(n,{_newDeltaByMethod:{value:function(e,n){p(t);var r=t.ContainerProxy._methodHandlers[e].map(function(t){return t.apply(void 0,o(n))});return 1===r.length?r[0]:new t.Delta.Overloaded(r)},writable:!0,configurable:!0},newProxyMethod:{value:function(e,n){l.isUndefined(t.ContainerProxy.prototype[e])&&(t.ContainerProxy.prototype[e]=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return this._do(e,n)}),l.a(t.ContainerProxy,"_methodHandlers",e).push(n)},writable:!0,configurable:!0}},{deactivate:{value:function(){var t=this;Object.keys(this._children).forEach(function(e){t.childProxy(e).deactivate()}),i(Object.getPrototypeOf(n.prototype),"deactivate",this).call(this)},writable:!0,configurable:!0},addChildProxy:{value:function(e,n){var r=this.childProxy(e),o=n.constructor.Proxy||t.BasicProxy,i=new o({delta:n,parent:this});return r instanceof t.Delta.Modify.Proxy&&i instanceof t.Delta.Modify.Proxy?r:(r&&r.deactivate(),this._children[e].push(i),i)},writable:!0,configurable:!0},childKeys:{value:function(){return Object.keys(this._children)},writable:!0,configurable:!0},childProxies:{value:function(t){return l.a(this._children,t)},writable:!0,configurable:!0},childProxy:{value:function(t){return l.a(this._children,t)[this._children[t].length-1]},writable:!0,configurable:!0},childDelta:{value:function(e){var n;return(n=t.Delta).composed.apply(n,o(this.childProxies(e).map(function(t){return t.delta()})))},writable:!0,configurable:!0},"do":{value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];if(!this.active)throw new d;var r=Object.create(this);return r._doArgs=[].concat(o(this._doArgs),e),r._original=this._original,r},writable:!0,configurable:!0},_do:{value:function(e,n){var r;if(!this.active)throw new d;var i=(r=this).processProxyArguments.apply(r,o(this._doArgs).concat(o(n))),a=i.options,u=i.path,s=i.args,l=t.ContainerProxy._newDeltaByMethod(e,s),f=(l.constructor.Proxy||t.BasicProxy,this.addOperation(new c(u),l,a));return f instanceof t.ContainerProxy?f:this},writable:!0,configurable:!0},processProxyArguments:{value:function(){throw new Error("A 'ContainerProxy' subclass needs to implement the 'processProxyArguments' method.")},writable:!0,configurable:!0},addOperation:{value:function(){throw new Error("A 'ContainerProxy' subclass needs to implement the 'addOperation' method.")},writable:!0,configurable:!0}}),n}(t.Proxy)}}}])});