(function e(t,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r();else if(typeof define==="function"&&define.amd)define(r);else if(typeof exports==="object")exports["DeltaJs"]=r();else t["DeltaJs"]=r()})(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:false};e[n].call(a.exports,a,a.exports,r);a.loaded=true;return a.exports}r.m=e;r.c=t;r.p="";return r(0)}([function(e,t,r){e.exports=r(2)},,function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:true});var a=r(3);var i=r(4);var o=n(i);var u=r(5);var s=r(6);var l=n(s);var f=r(7);a.extend(o["default"],{ReadableTarget:u.ReadableTarget,WritableTarget:u.WritableTarget});a.extend(o["default"],{Path:l["default"]});a.extend(o["default"],{ApplicationError:f.ApplicationError,PreconditionFailure:f.PreconditionFailure,MultipleOverloadsApplicationError:f.MultipleOverloadsApplicationError,NoOverloadsApplicationError:f.NoOverloadsApplicationError,CompositionError:f.CompositionError,MultipleOverloadsCompositionError:f.MultipleOverloadsCompositionError,ConstraintFailure:f.ConstraintFailure,ApplicationOrderCycle:f.ApplicationOrderCycle,UnresolvedDeltaConflict:f.UnresolvedDeltaConflict,MultipleActiveProxiesError:f.MultipleActiveProxiesError});t["default"]=o["default"];e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};Object.defineProperty(t,"__esModule",{value:true});t.extend=a;t.o=o;t.a=u;t.m=s;t.s=l;t.assert=f;t.isUndefined=c;t.isDefined=v;t.repeat=d;t.indent=p;t.oncePer=y;t.mapEqual=w;t.customIndexOf=b;t.arraysEqual=x;t.arraysHaveSameElements=_;t.swapLastTwo=k;function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}var a=true;var i=false;var o=undefined;try{for(var u=r[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var l=s.value;var f=true;var c=false;var v=undefined;try{for(var d=Object.keys(l)[Symbol.iterator](),p;!(f=(p=d.next()).done);f=true){var h=p.value;Object.defineProperty(e,h,Object.getOwnPropertyDescriptor(l,h))}}catch(y){c=true;v=y}finally{try{if(!f&&d["return"]){d["return"]()}}finally{if(c){throw v}}}}}catch(y){i=true;o=y}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}return e}var i=function P(e){return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++){a[i-1]=arguments[i]}var o=a.slice(0,-1);var u=a[a.length-1];if(o.length===0){return t}var s=e.apply(undefined,[t].concat(n(o.slice(0,-1))));if(s instanceof Map){if(c(s.get(o[o.length-1]))){s.set(o[o.length-1],u)}return s.get(o[o.length-1])}else{if(c(s[o[o.length-1]])){s[o[o.length-1]]=u}return s[o[o.length-1]]}}};function o(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}return i(o).apply(undefined,[e].concat(r,[{}]))}function u(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}return i(o).apply(undefined,[e].concat(r,[[]]))}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}return i(s).apply(undefined,[e].concat(r,[new Map]))}function l(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}return i(s).apply(undefined,[e].concat(r,[new Set]))}function f(e,t){if(!e){throw new Error(t||"Assertion failed")}}function c(e){return typeof e==="undefined"}function v(e){return typeof e!=="undefined"}function d(e,t){return new Array(e+1).join(t)}function p(e,t){var r=arguments[2]===undefined?" ":arguments[2];return e.replace(/^(?!\s*$)/gm,d(t,r))}var h={};function y(e,t,r){var n=function i(e){if(!h[t]){h[t]=Symbol("once per:"+t)}if(e[h[t]]){return}e[h[t]]=true;return r.call(e,e)};if(typeof e==="string"){var a=[e,t];t=a[0];r=a[1];return n}else{return n(e)}}var g=function O(e,t){return function(r,n){return r.type===e&&n.type===t}};t.t=g;var m=function E(e){return function(t,r){if(typeof r==="string"){r=function(e){return function(t){return t[e]}}(r)}return function(n,a){return new e.Delta[t](r&&r({d1:n,d2:a,p1:n.arg,p2:a.arg}))}}};t.define_d=m;function w(e,t){var r=arguments[2]===undefined?function(e,t){return e===t}:arguments[2];if(e.size!==t.size){return false}var a=[].concat(n(e.keys())).sort();var i=[].concat(n(t.keys())).sort();for(var o=0;o<a.length;++o){if(a[o]!==i[o]){return false}if(!r(e.get(a[o]),t.get(i[o]))){return false}}return true}function b(e,t){var r=arguments[2]===undefined?function(e,t){return e===t}:arguments[2];for(var n=0;n<e.length;++n){if(r(e[n],t)){return n}}return-1}function x(e,t){var r=arguments[2]===undefined?function(e,t){return e===t}:arguments[2];if(e.length!==t.length){return false}for(var n=0;n<e.length;++n){if(!r(e[n],t[n])){return false}}return true}function _(e,t){var r=arguments[2]===undefined?function(e,t){return e===t}:arguments[2];if(e.length!==t.length){return false}var a=[].concat(n(t));for(var i=0;i<e.length;++i){var o=false;for(var u=0;u<a.length;++u){if(r(e[i],a[u])){a.splice(u,1);o=true;break}}if(!o){return false}}return true}function k(e){return e.slice(0,-2).concat([e[e.length-1],e[e.length-2]])}},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}};var a=Function.prototype.bind;var i=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();Object.defineProperty(t,"__esModule",{value:true});var u=r(3);var s=r(6);var l=n(s);var f=r(5);var c=r(9);var v=n(c);var d=r(10);var p=n(d);var h=r(11);var y=n(h);var g=r(12);var m=n(g);var w=r(13);var b=n(w);var x=r(14);var _=n(x);var k=r(15);var P=n(k);var O=r(16);var E=n(O);var C=r(17);var A=n(C);var D=r(18);var S=n(D);var T=r(19);var M=n(T);var j=function(){function e(){i(this,e);M["default"](this);v["default"](this);p["default"](this);y["default"](this);m["default"](this);b["default"](this);_["default"](this);P["default"](this);E["default"](this);A["default"](this);S["default"](this)}o(e,[{key:"newOperationType",value:function t(r,n){var i=arguments[2]===undefined?null:arguments[2];u.assert(r[0]===r[0].toUpperCase(),"Delta operation classes must have a name starting with a capital letter - '"+r+"' does not.");u.assert(u.isUndefined(this.Delta[r]),"The '"+r+"' operation type already exists.");this.Delta[r]=n;n.Proxy=i;var o=n.prototype.applyTo||function(){};u.extend(n.prototype,{applyTo:function y(t){var r=arguments[1]===undefined?{}:arguments[1];if(!this.selected){return}if(!(t instanceof e.ReadableTarget)){t=new e.ReadableTarget(t)}if(u.isUndefined(r.weak)){r.weak=false}var n=this.evaluatePrecondition(t,r);if(n!==true){throw n}o.call(this,t,r)},type:r});var s=r[0].toLowerCase()+r.slice(1);var l=true;var f=false;var c=undefined;try{for(var v=(n.prototype.methods||[s])[Symbol.iterator](),d;!(l=(d=v.next()).done);l=true){var p=d.value;this.ContainerProxy.newProxyMethod(p,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}return new(a.apply(n,[null].concat(t)))})}}catch(h){f=true;c=h}finally{try{if(!l&&v["return"]){v["return"]()}}finally{if(f){throw c}}}return n}},{key:"newProxyMethod",value:function r(e,t){this.ContainerProxy.newProxyMethod(e,t)}}]);return e}();t["default"]=j;e.exports=t["default"]},function(e,t,r){"use strict";var n=function c(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return c(a,t,r)}}else if("value"in n){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var a=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var i=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();Object.defineProperty(t,"__esModule",{value:true});t.wt=l;t.rt=f;var u=function(){function e(t){i(this,e);this._val=t}o(e,[{key:"getValue",value:function t(){return this._val}},{key:"value",get:function(){return this.getValue()},set:function(e){this.setValue(e)}}]);return e}();t.ReadableTarget=u;var s=function(e){function t(e,r){i(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._obj=e;this._prop=r}a(t,e);o(t,[{key:"getValue",value:function r(){return this._obj[this._prop]}},{key:"setValue",value:function u(e){this._obj[this._prop]=e}},{key:"delete",value:function s(){delete this._obj[this._prop]}}]);return t}(u);t.WritableTarget=s;function l(e,t){return new s(e,t)}function f(e,t){return new u(e,t)}},function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];var n=true;var a=false;var i=undefined;try{for(var o=e[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){r.push(u.value);if(t&&r.length===t)break}}catch(s){a=true;i=s}finally{try{if(!n&&o["return"])o["return"]()}finally{if(a)throw i}}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var a=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();Object.defineProperty(t,"__esModule",{value:true});var o=r(3);var u=function(){function e(){var t=arguments[0]===undefined?"":arguments[0];a(this,e);var r=t.match(/^([.#]?)(\w*|\(\w+\))(.*)$/);o.assert(r,"The path string '"+t+"' is not well formed.");var i=n(r,4);var u=i[1];var s=i[2];var l=i[3];if(u==="#"){this.set(new e(".(instance)."+s+""+l))}else if(s!==""){this._prop=s;if(l!==""){this._rest=new e(l)}}}i(e,[{key:"set",value:function t(e){this._prop=e._prop;this._rest=e._rest}},{key:"prop",get:function(){return this._prop}},{key:"rest",get:function(){return this._rest}},{key:"toString",value:function r(){var e="";if(o.isDefined(this.prop)){e+=this.prop;if(o.isDefined(this.rest)){e+="."+this.rest.toString()}}return e}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var a=Function.prototype.bind;var i=Array.prototype.slice;var o=function w(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return w(a,t,r)}}else if("value"in n){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var u=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var s=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};Object.defineProperty(t,"__esModule",{value:true});var l=function(e){function t(){u(this,t);if(e!=null){var r=new(a.apply(e,[null].concat(i.call(arguments))));r.__proto__=t.prototype;return r}return r}s(t,e);return t}(Error);t.ApplicationError=l;var f=function(e){function t(e,r){u(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="PreconditionFailure";this.message="This delta of type '"+e.type+"' cannot apply to this value of type '"+typeof r+"'.";this.delta=e;this.value=r}s(t,e);return t}(l);t.PreconditionFailure=f;var c=function(e){function t(e,r){var n=arguments[2]===undefined?[]:arguments[2];u(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r);this.name="MultipleOverloadsApplicationError";this.message="None of the delta-types "+e.overloads.map(function(e){return"'"+e.type+"'"}).join(",")+" can apply to this value of type '"+typeof r+"'."+n.map(function(e){return"\n-- "+e.message}).join("");this.errors=n}s(t,e);return t}(f);t.MultipleOverloadsApplicationError=c;var v=function(e){function t(e,r){u(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r);this.name="NoOverloadsApplicationError";this.message="This delta of type '"+e.type+"' has no specific deltas assigned to it, so it cannot apply to this value of type '"+typeof r+"."}s(t,e);return t}(f);t.NoOverloadsApplicationError=v;var d=function(e){function t(r,n){u(this,t);var a=new e;a.__proto__=t.prototype;a.name="CompositionError";a.message="This delta of type '"+r.type+"' cannot be composed with this other delta of type '"+n.type+"'.";a.delta1=r;a.delta2=n;return a}s(t,e);return t}(Error);t.CompositionError=d;var p=function(e){function t(e,r){var n=arguments[2]===undefined?[]:arguments[2];u(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r);this.name="MultipleOverloadsCompositionError";this.message="There are no overloads to compose this delta of type '"+e.type+"' with this other delta of type '"+r.type+"'."+n.map(function(e){return"\n-- "+e.message}).join("");this.errors=n}s(t,e);return t}(d);t.MultipleOverloadsCompositionError=p;var h=function(e){function t(r){u(this,t);var n=new e;n.__proto__=t.prototype;n.name="ConstraintFailure";n.message="The feature '"+r.name+"' is both selected and excluded by its constraints.";n.feature=r;return n}s(t,e);return t}(Error);t.ConstraintFailure=h;var y=function(e){function t(r){u(this,t);var n=new e;n.__proto__=t.prototype;n.name="ApplicationOrderCycle";n.message="The new application order created a cycle: "+r+"}";n.cycle=r;return n}s(t,e);return t}(Error);t.ApplicationOrderCycle=y;var g=function(e){function t(e){u(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.name="UnresolvedDeltaConflict";e=[].concat(n(e));var r=e.slice(0,-1).map(function(e){return"'"+e+"'"}).join(",");this.message="There is an unresolved conflict between deltas "+r+" and '"+e[e.length-1]+"'.";this.deltaNames=e}s(t,e);return t}(l);t.UnresolvedDeltaConflict=g;var m=function(e){function t(){u(this,t);var r=new e;r.__proto__=t.prototype;r.name="MultipleActiveProxiesError";r.message="Only one Proxy per path can be active at any given time.";return r}s(t,e);return t}(Error);t.MultipleActiveProxiesError=m},,function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}};var a=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var i=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:t==null||typeof Symbol=="undefined"||t.constructor!==Symbol,configurable:true,writable:true})};var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();Object.defineProperty(t,"__esModule",{value:true});var s=r(3);var l=r(5);var f=r(7);var c=r(21);var v=n(c);t["default"]=s.oncePer("Delta",function(e){e.Delta=function(){function t(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++){n[a]=arguments[a]}o(this,t);this.id=++e.Delta._nextID;this.args=n}u(t,[{key:"arg",get:function(){return this.args[0]},set:function(e){this.args[0]=e}},{key:"clone",value:function r(){return new this.constructor(this.arg)}},{key:"evaluatePrecondition",value:function n(e){var t=arguments[1]===undefined?{}:arguments[1];var r=t.weak;if(this.precondition){var n=this.precondition(e,t);if(n instanceof f.PreconditionFailure){return n}else if(!n){return new f.PreconditionFailure(this,e.value)}}return true}},{key:"appliedTo",value:function a(e){var t=arguments[1]===undefined?{}:arguments[1];if(e instanceof l.ReadableTarget){e=e.value}if(typeof e.clone==="function"){e=e.clone()}var r={value:e};this.applyTo(l.wt(r,"value"),t);return r.value}},{key:"toString",value:function i(){var e=arguments[0]===undefined?{}:arguments[0];var t=this.type;if(e.targetProp){t+=" ‹"+e.targetProp+"›"}if(this.args.length>0){t+=": "+this.args.map(function(e){return JSON.stringify(e)}).join(",")}if(e.debug){t+=" ("+this.id+")"}return t}}]);return t}();e.Delta._nextID=0;var t=new Map;function r(r,n,o){var u;var l=arguments[3]===undefined?{}:arguments[3];if(s.isUndefined(l.commutative)){l.commutative=false}if(s.isUndefined(l.arity)){l.arity=2}if(s.isUndefined(l.onTrue)){l.onTrue=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}return t.slice(0,l.arity)}}if(s.isUndefined(l.onFalse)){l.onFalse=function(){throw new Error("Failure in finding a "+r+"!")}}if(l.onDefault==="onTrue"){l.onDefault=l.onTrue}else if(l.onDefault==="onFalse"||s.isUndefined(l.onDefault)){l.onDefault=l.onFalse}s.extend(l,{name:r,staticMethodName:n,methodName:o,creationMethodName:"new"+r[0].toUpperCase()+""+r.slice(1),storageSymbol:Symbol("multiDispatch:"+r)});t.set(r,l);var f=l.creationMethodName;var c=l.storageSymbol;var v=l.onTrue;var d=l.onFalse;var p=l.onDefault;var h=l.commutative;var y=l.arity;s.extend(e.Delta,(u={},i(u,c,[]),i(u,f,function(t,r){var n=arguments[2]===undefined?{}:arguments[2];if(s.isUndefined(n.weak)){n.weak=false}if(s.isUndefined(e.Delta[c])){e.Delta[c]=[]}e.Delta[c].push({precondition:t,value:r,options:n})}),i(u,n,function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n]}var i=r.slice(0,y),o=r[y]||{};if(s.isUndefined(o.weak)){o.weak=false}var u=function C(){},l=false,f=false;if(s.isUndefined(e.Delta[c])){e.Delta[c]=[]}var g=true;var m=false;var w=undefined;try{for(var b=e.Delta[c][Symbol.iterator](),x;!(g=(x=b.next()).done);g=true){var _=x.value;var k=_.precondition;var P=_.value;var O=_.options;if(O.weak&&!o.weak){continue}if(k.apply(undefined,a(i))){u=P;l=true;break}else if(h&&k.apply(undefined,a(s.swapLastTwo(i)))){u=P;l=true;f=true;break}}}catch(E){m=true;w=E}finally{try{if(!g&&b["return"]){b["return"]()}}finally{if(m){throw w}}}if(!l){u=p}else if(u===false){u=d}else if(u===true){u=v}if(f){return u.apply(undefined,a(s.swapLastTwo(i)).concat([o]))}else{return u.apply(undefined,a(i).concat([o]))}}),u));s.extend(e.Delta.prototype,i({},o,function(){var t;for(var r=arguments.length,a=Array(r),i=0;i<r;i++){a[i]=arguments[i]}return(t=e.Delta)[n].apply(t,[this].concat(a))}));s.oncePer(e.constructor,"multiDispatch:"+r,function(){s.extend(e.constructor.prototype,i({},f,function(e,t){var r=arguments[2]===undefined?{}:arguments[2];return this.Delta[f](e,t,r)}))})}function n(r){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++){i[o-1]=arguments[o]}var u=t.get(r);var l=u.storageSymbol;var f=u.commutative;var c=true;var v=false;var d=undefined;try{for(var p=e.Delta[l][Symbol.iterator](),h;!(c=(h=p.next()).done);c=true){var y=h.value;var g=y.precondition;var m=y.value;if(g.apply(undefined,i)||f&&g.apply(undefined,a(s.swapLastTwo(i)))){return typeof m==="function"}}}catch(w){v=true;d=w}finally{try{if(!c&&p["return"]){p["return"]()}}finally{if(v){throw d}}}return false}r("composition","_binaryComposed","composedWith",{onTrue:function c(t,r,n){return new e.Delta.Composed([t,r],n)},onFalse:function d(e,t){throw new f.CompositionError(e,t)},onDefault:"onFalse"});e.Delta.composed=function p(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n]}var a=undefined,i=undefined;if(!(r[r.length-1]instanceof e.Delta)&&typeof r[r.length-1]!=="undefined"){i=r.slice(0,r.length-1);a=r[r.length-1]}else{i=r;a={}}return i.map(function(t){return t||new e.Delta.NoOp}).reduce(function(t,r){return e.Delta._binaryComposed(t,r,a)},new e.Delta.NoOp)};r("refinement","refines","refines",{onTrue:function h(e,t){return true},onFalse:function y(e,t){return false},onDefault:function g(e,t,r){return e.equals(t,r)}});r("equality","equal","equals",{onTrue:function m(e,t){return true},onFalse:function w(e,t){return false},onDefault:function b(e,t,r){if(n("refinement",e,t)){return e.refines(t,r)&&t.refines(e,r)}else{return e.type===t.type&&s.arraysEqual(e.args,t.args)}},commutative:true});r("commutation","commute","commutesWith",{onTrue:function x(e,t){return true},onFalse:function _(e,t){return false},onDefault:function k(e,t,r){return e.composedWith(t,r).equals(t.composedWith(e,r),r)},commutative:true});r("resolution","resolves","resolves",{onTrue:function P(e,t,r){return true},onFalse:function O(e,t,r){return false},onDefault:function E(t,r,n,a){return e.Delta.composed(r,n,t,a).equals(e.Delta.composed(n,r,t,a),a)},arity:3,commutative:true});v["default"](e)});e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}};var a=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function v(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return v(a,t,r)}}else if("value"in n){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var u=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};Object.defineProperty(t,"__esModule",{value:true});var s=r(3);var l=r(9);var f=n(l);var c=r(7);t["default"]=s.oncePer("Overloaded",function(e){f["default"](e);e.newOperationType("Overloaded",function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}a(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this.overloads=this.arg||[]}u(t,e);i(t,[{key:"clone",value:function r(){var e=o(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.overloads=this.overloads.map(function(e){return e.clone()});return e}},{key:"precondition",value:function n(e,t){var r=[];var n=this.overloads.some(function(n){var a=n.evaluatePrecondition(e,t);if(a!==true){r.push(a);return false}return true});if(!n){if(r.length===0){return new c.NoOverloadsApplicationError(this,e.value)}else if(r.length===1){return r[0]}else{return new c.MultipleOverloadsApplicationError(this,e.value,r)}}return true}},{key:"applyTo",value:function l(e){var t=arguments[1]===undefined?{}:arguments[1];var r=[];var n=this.overloads.some(function(n){var a=n.evaluatePrecondition(e);if(a!==true){r.push(a);return false}n.applyTo(e,t);return true});if(!n){if(r.length===0){throw new c.NoOverloadsApplicationError(this,e.value)}else if(r.length===1){throw r[0]}else{throw new c.MultipleOverloadsApplicationError(this,e.value,r)}}}},{key:"toString",value:function f(){var e=arguments[0]===undefined?{}:arguments[0];var r=o(Object.getPrototypeOf(t.prototype),"toString",this).call(this,e);var n=this.overloads.map(function(t){return t.toString(e)}).join("\n");r+="\n"+s.indent(n,4);return r}}]);return t}(e.Delta));e.newComposition(function(t,r){return t instanceof e.Delta.Overloaded||r instanceof e.Delta.Overloaded},function(t,r,n){var a=t instanceof e.Delta.Overloaded?t.overloads:[t];var i=r instanceof e.Delta.Overloaded?r.overloads:[r];var o=new e.Delta.Overloaded;var u=[];var s=true;var l=false;var f=undefined;try{for(var v=a[Symbol.iterator](),d;!(s=(d=v.next()).done);s=true){var p=d.value;var h=true;var y=false;var g=undefined;try{for(var m=i[Symbol.iterator](),w;!(h=(w=m.next()).done);h=true){var b=w.value;try{o.overloads.push(p.composedWith(b,n))}catch(x){u.push(x)}}}catch(_){y=true;g=_}finally{try{if(!h&&m["return"]){m["return"]()}}finally{if(y){throw g}}}}}catch(_){l=true;f=_}finally{try{if(!s&&v["return"]){v["return"]()}}finally{if(l){throw f}}}if(o.overloads.length===0){throw new c.MultipleOverloadsCompositionError(t,r,u)}return o});e.newEquality(s.t("Overloaded","Overloaded"),function(e,t,r){return s.arraysEqual(e.overloads,t.overloads,function(e,t){return e.equals(t,r)})});e.newCommutation(s.t("Overloaded","Overloaded"),function(e,t,r){for(var n=0;n<e.overloads.length;++n){if(!e.overloads[n].commutesWith(t.overloads[n],r)){return false}}return true})});e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}};var a=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];var n=true;var a=false;var i=undefined;try{for(var o=e[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){r.push(u.value);if(t&&r.length===t)break}}catch(s){a=true;i=s}finally{try{if(!n&&o["return"])o["return"]()}finally{if(a)throw i}}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var i=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var u=function h(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return h(a,t,r)}}else if("value"in n){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var s=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};Object.defineProperty(t,"__esModule",{value:true});var l=r(3);var f=r(6);var c=n(f);var v=r(5);var d=r(19);var p=n(d);t["default"]=l.oncePer("Modify",function(e){p["default"](e);e.newOperationType("Modify",function(e){function t(){var e=this;for(var r=arguments.length,n=Array(r),a=0;a<r;a++){n[a]=arguments[a]}i(this,t);u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n);this.subDeltas=new Map(this.arg&&Object.keys(this.arg).map(function(t){return[t,e.arg[t]]}))}s(t,e);o(t,[{key:"clone",value:function r(){var e=u(Object.getPrototypeOf(t.prototype),"clone",this).call(this);var r=true;var n=false;var i=undefined;try{for(var o=this.subDeltas[Symbol.iterator](),s;!(r=(s=o.next()).done);r=true){var l=a(s.value,2);var f=l[0];var c=l[1];e.subDeltas.set(f,c.clone())}}catch(v){n=true;i=v}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(n){throw i}}}return e}},{key:"precondition",value:function n(e){var t=arguments[1]===undefined?{}:arguments[1];if(!(e.value instanceof Object)){return false}var r=true;var n=false;var i=undefined;try{for(var o=this.subDeltas[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var s=a(u.value,2);var f=s[0];var c=s[1];if(!t.restrictToProperty||t.restrictToProperty===f){var d=c.evaluatePrecondition(v.wt(e.value,f),l.extend({},t,{restrictToProperty:null}));if(d!==true){return d}}}}catch(p){n=true;i=p}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(n){throw i}}}return true}},{key:"applyTo",value:function f(e){var t=arguments[1]===undefined?{}:arguments[1];var r=true;var n=false;var i=undefined;try{for(var o=this.subDeltas[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var s=a(u.value,2);var f=s[0];var c=s[1];if(!t.restrictToProperty||t.restrictToProperty===f){c.applyTo(v.wt(e.value,f),l.extend({},t,{restrictToProperty:null}))}}}catch(d){n=true;i=d}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(n){throw i}}}}},{key:"toString",value:function c(){var e=arguments[0]===undefined?{}:arguments[0];var r=u(Object.getPrototypeOf(t.prototype),"toString",this).call(this,e);if(this.subDeltas.size>0){var n=this.subDeltas.entries().map(function(t){var r=a(t,2);var n=r[0];var i=r[1];return i.toString(l.extend({},e,{targetProp:n}))}).join("\n");r+="\n"+l.indent(n,4)}return r}}]);return t}(e.Delta),function(t){function r(){i(this,r);if(t!=null){t.apply(this,arguments)}}s(r,t);o(r,[{key:"processProxyArguments",value:function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n={};do{if(t.length===0){throw new Error("The argument list for this Modify.Proxy method is insufficient.")}var a=t.shift();if(typeof a==="string"){n.path=a}else{l.extend(n,a)}}while(!n.path);return{options:n,args:t}}},{key:"addOperation",value:function a(t,r){var n=r.path;if(!n.prop){throw new Error("Operations on a Modify.Proxy need to have a non-empty path.")}var a;if(n.rest){var i=l.extend({},r,{path:n.rest});var o=this.addChildProxy(n.prop,new e.Delta.Modify);a=o.addOperation(t,i)}else{a=this.addChildProxy(n.prop,t)}return a}},{key:"delta",value:function f(){var e=u(Object.getPrototypeOf(r.prototype),"delta",this).call(this);var t=true;var n=false;var a=undefined;try{for(var i=this.childKeys()[Symbol.iterator](),o;!(t=(o=i.next()).done);t=true){var s=o.value;e.subDeltas.set(s,this.childDelta(s))}}catch(l){n=true;a=l}finally{try{if(!t&&i["return"]){i["return"]()}}finally{if(n){throw a}}}return e}}]);return r}(e.ContainerProxy));e.newComposition(l.t("Modify","Modify"),function(t,r,n){var a=t.clone();var i=true;var o=false;var u=undefined;try{for(var s=r.subDeltas.keys()[Symbol.iterator](),l;!(i=(l=s.next()).done);i=true){var f=l.value;a.subDeltas.set(f,e.Delta.composed(a.subDeltas.get(f),r.subDeltas.get(f),n))}}catch(c){o=true;u=c}finally{try{if(!i&&s["return"]){s["return"]()}}finally{if(o){throw u}}}return a});e.newEquality(l.t("Modify","Modify"),function(e,t){return l.mapEqual(e.subDeltas,t.subDeltas,function(e,t){return e.equals(t)})});e.newCommutation(l.t("Modify","Modify"),function(e,t,r){var n=true;var a=false;var i=undefined;try{for(var o=e.subDeltas.keys()[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){var s=u.value;if(t.subDeltas.has(s)){var l=e.subDeltas.get(s);var f=t.subDeltas.get(s);if(!l.commutesWith(f,r)){return false}}}}catch(c){a=true;i=c}finally{try{if(!n&&o["return"]){o["return"]()}}finally{if(a){throw i}}}return true})});e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}};var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var o=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};Object.defineProperty(t,"__esModule",{value:true});var u=r(3);var s=r(5);var l=r(9);var f=n(l);var c=r(11);var v=n(c);t["default"]=u.oncePer("basic operations",function(e){f["default"](e);v["default"](e);e.newOperationType("NoOp",function(e){
function t(){i(this,t);if(e!=null){e.apply(this,arguments)}}o(t,e);return t}(e.Delta));e.newOperationType("Add",function(e){function t(){i(this,t);if(e!=null){e.apply(this,arguments)}}o(t,e);a(t,[{key:"precondition",value:function r(e,t){var r=t.weak;return e instanceof s.WritableTarget&&(r||u.isUndefined(e.value))}},{key:"applyTo",value:function n(e){e.value=this.arg}}]);return t}(e.Delta));e.newOperationType("Remove",function(e){function t(){i(this,t);if(e!=null){e.apply(this,arguments)}}o(t,e);a(t,[{key:"precondition",value:function r(e,t){var r=t.weak;return e instanceof s.WritableTarget&&(r||u.isDefined(e.value))}},{key:"applyTo",value:function n(e){e["delete"]()}}]);return t}(e.Delta));e.newOperationType("Forbid",function(e){function t(){i(this,t);if(e!=null){e.apply(this,arguments)}}o(t,e);a(t,[{key:"precondition",value:function r(e,t){var r=t.weak;return r||u.isUndefined(e.value)}}]);return t}(e.Delta));e.newOperationType("Replace",function(e){function t(){i(this,t);if(e!=null){e.apply(this,arguments)}}o(t,e);a(t,[{key:"precondition",value:function r(e,t){var r=t.weak;return e instanceof s.WritableTarget&&(r||u.isDefined(e.value))}},{key:"applyTo",value:function n(e){e.value=this.arg}}]);return t}(e.Delta));e.newOperationType("Update",function(e){function t(){i(this,t);if(e!=null){e.apply(this,arguments)}}o(t,e);a(t,[{key:"precondition",value:function r(e,t){var r=t.weak;return e instanceof s.WritableTarget&&(r||u.isDefined(e.value))}},{key:"applyTo",value:function n(e){e.value=this.arg(e.value)}}]);return t}(e.Delta));e.newComposition(function(t,r){return t instanceof e.Delta.NoOp},function(e,t){return t.clone()});e.newComposition(function(t,r){return r instanceof e.Delta.NoOp},function(e,t){return e.clone()});var t=u.define_d(e);e.newComposition(u.t("Add","Modify"),t("Add",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(u.t("Modify","Add"),false);e.newComposition(function(e,t){return t.type==="Add"},t("Add",function(e){var t=e.p2;return t}),{weak:true});e.newComposition(u.t("Add","Add"),false);e.newComposition(u.t("Modify","Remove"),t("Remove"));e.newComposition(u.t("Add","Remove"),t("Forbid"));e.newComposition(u.t("Remove","Modify"),false);e.newComposition(u.t("Remove","Add"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(function(e,t){return t.type==="Remove"},t("Remove"),{weak:true});e.newComposition(u.t("Remove","Remove"),false);e.newComposition(function(e,t){return e.type==="Forbid"},function(e,t){return t.clone()},{weak:true});e.newComposition(function(e,t){return t.type==="Forbid"},function(e,t){return e.clone()},{weak:true});e.newComposition(u.t("Modify","Forbid"),false);e.newComposition(u.t("Add","Forbid"),false);e.newComposition(u.t("Remove","Forbid"),t("Remove"));e.newComposition(u.t("Forbid","Modify"),false);e.newComposition(u.t("Forbid","Add"),t("Add",function(e){var t=e.p2;return t}));e.newComposition(u.t("Forbid","Remove"),false);e.newComposition(u.t("Forbid","Forbid"),t("Forbid"));e.newComposition(u.t("Modify","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(u.t("Add","Replace"),t("Add",function(e){var t=e.p2;return t}));e.newComposition(u.t("Remove","Replace"),false);e.newComposition(u.t("Forbid","Replace"),false);e.newComposition(u.t("Replace","Modify"),t("Replace",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(u.t("Replace","Add"),false);e.newComposition(u.t("Replace","Remove"),t("Remove"));e.newComposition(u.t("Replace","Forbid"),false);e.newComposition(u.t("Replace","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(u.t("Modify","Update"),true);e.newComposition(u.t("Add","Update"),t("Add",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(u.t("Remove","Update"),true);e.newComposition(u.t("Forbid","Update"),true);e.newComposition(u.t("Replace","Update"),t("Replace",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(u.t("Update","Modify"),true);e.newComposition(u.t("Update","Add"),true);e.newComposition(u.t("Update","Remove"),t("Remove"));e.newComposition(u.t("Update","Forbid"),true);e.newComposition(u.t("Update","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(u.t("Update","Update"),t("Update",function(e){var t=e.p1;var r=e.p2;return function(e){return r(t(e))}}))});e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}};var a=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var i=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var u=function y(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return y(a,t,r)}}else if("value"in n){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var s=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};Object.defineProperty(t,"__esModule",{value:true});var l=r(3);var f=r(11);var c=n(f);var v=r(12);var d=n(v);var p=r(22);var h=n(p);t["default"]=l.oncePer("PutIntoArray",function(e){c["default"](e);d["default"](e);h["default"](e);e.newOperationType("PutIntoArray",function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}i(this,t);u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this.values=this.arg?Array.isArray(this.arg)?this.arg:[this.arg]:[]}s(t,e);o(t,[{key:"clone",value:function r(){var e=u(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.values=[].concat(a(this.values));return e}},{key:"precondition",value:function n(e,t){var r=t.weak;return r||l.isDefined(e.value)&&Array.isArray(e.value)}},{key:"applyTo",value:function f(e){var t=e.value;var r=true;var n=false;var a=undefined;try{for(var i=this.values[Symbol.iterator](),o;!(r=(o=i.next()).done);r=true){var u=o.value;var s=u.method;var l=u.value;switch(s){case"prepend":{t.unshift(l)}break;case"insert":{var f=Math.floor(Math.random()*(t.length+1));t.splice(f,0,l)}break;case"append":{t.push(l)}break}}}catch(c){n=true;a=c}finally{try{if(!r&&i["return"]){i["return"]()}}finally{if(n){throw a}}}}},{key:"methods",get:function(){return[]}}]);return t}(e.Delta));e.newProxyMethod("prepend",function(t){return new e.Delta.PutIntoArray({method:"prepend",value:t})});e.newProxyMethod("insert",function(t){return new e.Delta.PutIntoArray({method:"insert",value:t})});e.newProxyMethod("append",function(t){return new e.Delta.PutIntoArray({method:"append",value:t})});var t=l.define_d(e);e.newComposition(l.t("Modify","PutIntoArray"),false);e.newComposition(l.t("Add","PutIntoArray"),t("Add",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(l.t("Remove","PutIntoArray"),false);e.newComposition(l.t("Forbid","PutIntoArray"),false);e.newComposition(l.t("Replace","PutIntoArray"),t("Replace",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(l.t("Update","PutIntoArray"),true);e.newComposition(l.t("PutIntoArray","Modify"),false);e.newComposition(l.t("PutIntoArray","Add"),false);e.newComposition(l.t("PutIntoArray","Remove"),t("Remove"));e.newComposition(l.t("PutIntoArray","Forbid"),false);e.newComposition(l.t("PutIntoArray","Replace"),t("Replace",function(e){var t=e.p2;return t}));e.newComposition(l.t("PutIntoArray","Update"),true);e.newComposition(l.t("PutIntoArray","PutIntoArray"),function(t,r){return new e.Delta.PutIntoArray([].concat(a(t.values),a(r.values)))});e.newRefinement(l.t("PutIntoArray","PutIntoArray"),function(e,t){var r=function f(e,t){return e.method===t.method&&e.value===t.value};if(!l.arraysHaveSameElements(e.values,t.values,r)){return false}if(!l.arraysEqual(e.values.filter(function(e){return e.method==="append"}),t.values.filter(function(e){return e.method==="append"}),r)){return false}if(!l.arraysEqual(e.values.filter(function(e){return e.method==="prepend"}),t.values.filter(function(e){return e.method==="prepend"}),r)){return false}var n=[];for(var a=0;a<e.values.length;++a){if(e.values[a].method==="insert"){var i=l.customIndexOf(t.values,e.values[a],r);var o=[].concat(n);for(var u=0;u<=i;++u){var s=l.customIndexOf(o,t.values[u],r);if(s>-1){o.splice(s,1)}}if(o.length>0){return false}}else{n.push(e.values[a])}}return true});e.newCommutation(l.t("PutIntoArray","PutIntoArray"),function(e,t,r){return true},{weak:true})});e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}};var a=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var i=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var u=function g(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return g(a,t,r)}}else if("value"in n){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var s=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};Object.defineProperty(t,"__esModule",{value:true});var l=r(3);var f=r(5);var c=r(11);var v=n(c);var d=r(12);var p=n(d);var h=r(22);var y=n(h);t["default"]=l.oncePer("PutIntoFunction",function(e){v["default"](e);p["default"](e);y["default"](e);var t=Symbol("DeltaJs:function-parts");e.newOperationType("PutIntoFunction",function(e){function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}i(this,r);u(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,t);this.values=this.arg?Array.isArray(this.arg)?this.arg:[this.arg]:[]}s(r,e);o(r,[{key:"clone",value:function n(){var e=u(Object.getPrototypeOf(r.prototype),"clone",this).call(this);e.values=[].concat(a(this.values));return e}},{key:"precondition",value:function c(e){return l.isDefined(e.value)&&typeof e.value==="function"&&(l.isDefined(e.value[t])||e instanceof f.WritableTarget)}},{key:"applyTo",value:function v(e){if(l.isUndefined(e.value[t])){var r=e.value;var n=function(e){function t(t){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++){r[a]=arguments[a]}var i=undefined;var o=true;var u=false;var s=undefined;try{for(var l=n[t][Symbol.iterator](),f;!(o=(f=l.next()).done);o=true){var c=f.value;i=c.apply(this,r)}}catch(v){u=true;s=v}finally{try{if(!o&&l["return"]){l["return"]()}}finally{if(u){throw s}}}return i});n[t]=[function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}r.apply(this,t)}];e.value=n}var a=e.value[t];var i=true;var o=false;var u=undefined;try{for(var s=this.values[Symbol.iterator](),f;!(i=(f=s.next()).done);i=true){var c=f.value;var v=c.method;var d=c.value;switch(v){case"prepend":{a.unshift(d)}break;case"insert":{var p=Math.floor(Math.random()*(a.length+1));a.splice(p,0,d)}break;case"append":{a.push(d)}break}}}catch(h){o=true;u=h}finally{try{if(!i&&s["return"]){s["return"]()}}finally{if(o){throw u}}}}},{key:"methods",get:function(){return[]}}]);return r}(e.Delta));e.newProxyMethod("prepend",function(t){return new e.Delta.PutIntoFunction({method:"prepend",value:t})});e.newProxyMethod("insert",function(t){return new e.Delta.PutIntoFunction({method:"insert",value:t})});e.newProxyMethod("append",function(t){return new e.Delta.PutIntoFunction({method:"append",value:t})});var r=l.define_d(e);e.newComposition(l.t("Modify","PutIntoFunction"),false);e.newComposition(l.t("Add","PutIntoFunction"),r("Add",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(l.t("Remove","PutIntoFunction"),false);e.newComposition(l.t("Forbid","PutIntoFunction"),false);e.newComposition(l.t("Replace","PutIntoFunction"),r("Replace",function(e){var t=e.d2;var r=e.p1;return t.appliedTo(r)}));e.newComposition(l.t("Update","PutIntoFunction"),true);e.newComposition(l.t("PutIntoFunction","Modify"),false);e.newComposition(l.t("PutIntoFunction","Add"),false);e.newComposition(l.t("PutIntoFunction","Remove"),r("Remove"));e.newComposition(l.t("PutIntoFunction","Forbid"),false);e.newComposition(l.t("PutIntoFunction","Replace"),r("Replace",function(e){var t=e.p2;return t}));e.newComposition(l.t("PutIntoFunction","Update"),true);e.newComposition(l.t("PutIntoFunction","PutIntoFunction"),function(t,r){return new e.Delta.PutIntoFunction([].concat(a(t.values),a(r.values)))});e.newEquality(l.t("PutIntoFunction","PutIntoFunction"),function(e,t){return l.arraysEqual(e.values,t.values,function(e,t){return e.method===t.method&&e.value&&t.value})});e.newCommutation(l.t("PutIntoFunction","PutIntoFunction"),function(e,t){return true},{weak:true})});e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}};var a=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];var n=true;var a=false;var i=undefined;try{for(var o=e[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){r.push(u.value);if(t&&r.length===t)break}}catch(s){a=true;i=s}finally{try{if(!n&&o["return"])o["return"]()}finally{if(a)throw i}}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var i=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var s=function b(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return b(a,t,r)}}else if("value"in n){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var l=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};Object.defineProperty(t,"__esModule",{value:true});var f=r(23);var c=n(f);var v=r(3);var d=r(6);var p=n(d);var h=r(11);var y=n(h);var g=r(19);var m=n(g);var w=r(7);t["default"]=v.oncePer("DeltaModel",function(e){m["default"](e);e.newOperationType("DeltaModel",function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}o(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this.graph=new c["default"]}l(t,e);u(t,[{key:"clone",value:function r(){var e=s(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.graph=this.graph.clone(function(e){return e.clone()});return e}},{key:"_assertNoUnresolvedConflicts",value:function n(){var e=true;var t=false;var r=undefined;try{for(var n=this.conflicts()[Symbol.iterator](),a;!(e=(a=n.next()).done);e=true){var i=a.value;if(i.conflictResolvingDeltas.size===0){throw new w.UnresolvedDeltaConflict(i.conflictingDeltas)}}}catch(o){t=true;r=o}finally{try{if(!e&&n["return"]){n["return"]()}}finally{if(t){throw r}}}}},{key:"precondition",value:function f(e,t){var r=true;var n=false;var o=undefined;try{for(var u=this.graph.vertices()[Symbol.iterator](),s;!(r=(s=u.next()).done);r=true){var l=a(s.value,2);var f=l[0];var c=l[1];if([].concat(i(this.graph.verticesTo(f))).length===0){var v=c.evaluatePrecondition(e,t);if(v!==true){return v}}}}catch(d){n=true;o=d}finally{try{if(!r&&u["return"]){u["return"]()}}finally{if(n){throw o}}}return true}},{key:"applyTo",value:function d(e){var t=arguments[1]===undefined?{}:arguments[1];this._assertNoUnresolvedConflicts();var r=true;var n=false;var i=undefined;try{for(var o=this.graph.vertices_topologically()[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var s=a(u.value,2);var l=s[1];l.applyTo(e,v.extend({},t,{weak:true}))}}catch(f){n=true;i=f}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(n){throw i}}}}},{key:"toString",value:function p(){var e=arguments[0]===undefined?{}:arguments[0];var r=s(Object.getPrototypeOf(t.prototype),"toString",this).call(this,e);if(this.graph.vertexCount()>0){var n="";var i=true;var o=false;var u=undefined;try{for(var l=this.graph.vertices_topologically()[Symbol.iterator](),f;!(i=(f=l.next()).done);i=true){var c=a(f.value,2);var d=c[0];var p=c[1];n+="["+d+"] "+p.toString(e)+"\n"}}catch(h){o=true;u=h}finally{try{if(!i&&l["return"]){l["return"]()}}finally{if(o){throw u}}}r+="\n"+v.indent(n,4)}return r}},{key:"conflicts",value:function h(){var e=this.graph.clone();var t="(sink)";while(e.hasVertex(t)){t=""+t+"'"}e.addNewVertex(t,null);var r=true;var n=false;var o=undefined;try{for(var u=e.vertices()[Symbol.iterator](),s;!(r=(s=u.next()).done);r=true){var l=a(s.value,1);var f=l[0];e.setVertex(f,null);if(f!==t){e.ensureEdge(f,t)}}}catch(c){n=true;o=c}finally{try{if(!r&&u["return"]){u["return"]()}}finally{if(n){throw o}}}e=e.transitiveReduction();var d=new Map;var p=function(e){function t(t){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(t){if(e.vertexValue(t)){return}var r=new Map;var n=true;var o=false;var u=undefined;try{for(var s=e.verticesTo(t)[Symbol.iterator](),l;!(n=(l=s.next()).done);n=true){var f=a(l.value,1);var c=f[0];p(c);var h=new Set([c]);var y=true;var g=false;var m=undefined;try{for(var w=e.vertexValue(c).values()[Symbol.iterator](),b;!(y=(b=w.next()).done);y=true){var x=b.value;var _=true;var k=false;var P=undefined;try{for(var O=x.values()[Symbol.iterator](),E;!(_=(E=O.next()).done);_=true){var C=E.value;h.add(C)}}catch(A){k=true;P=A}finally{try{if(!_&&O["return"]){O["return"]()}}finally{if(k){throw P}}}}}catch(A){g=true;m=A}finally{try{if(!y&&w["return"]){w["return"]()}}finally{if(g){throw m}}}r.set(c,h)}}catch(A){o=true;u=A}finally{try{if(!n&&s["return"]){s["return"]()}}finally{if(o){throw u}}}e.setVertex(t,r);var D=true;var S=false;var T=undefined;try{for(var M=r.keys()[Symbol.iterator](),j;!(D=(j=M.next()).done);D=true){var F=j.value;var R=true;var V=false;var I=undefined;try{for(var N=r.keys()[Symbol.iterator](),U;!(R=(U=N.next()).done);R=true){var q=U.value;if(F<q){var W=new Set(r.get(F));var z=new Set(r.get(q));var H=true;var L=false;var J=undefined;try{for(var Y=W[Symbol.iterator](),B;!(H=(B=Y.next()).done);H=true){var K=B.value;var $=true;var G=false;var Q=undefined;try{for(var X=z[Symbol.iterator](),Z;!($=(Z=X.next()).done);$=true){var ee=Z.value;if(K===ee){W["delete"](K);z["delete"](ee)}}}catch(A){G=true;Q=A}finally{try{if(!$&&X["return"]){X["return"]()}}finally{if(G){throw Q}}}}}catch(A){L=true;J=A}finally{try{if(!H&&Y["return"]){Y["return"]()}}finally{if(L){throw J}}}var te=true;var re=false;var ne=undefined;try{for(var ae=W[Symbol.iterator](),ie;!(te=(ie=ae.next()).done);te=true){var K=ie.value;var oe=true;var ue=false;var se=undefined;try{for(var le=z[Symbol.iterator](),fe;!(oe=(fe=le.next()).done);oe=true){var ee=fe.value;v.s.apply(undefined,[d].concat(i([K,ee].sort()))).add(t)}}catch(A){ue=true;se=A}finally{try{if(!oe&&le["return"]){le["return"]()}}finally{if(ue){throw se}}}}}catch(A){re=true;ne=A}finally{try{if(!te&&ae["return"]){ae["return"]()}}finally{if(re){throw ne}}}}}}catch(A){V=true;I=A}finally{try{if(!R&&N["return"]){N["return"]()}}finally{if(V){throw I}}}}}catch(A){S=true;T=A}finally{try{if(!D&&M["return"]){M["return"]()}}finally{if(S){throw T}}}});p(t);var h=new Set;var y=true;var g=false;var m=undefined;try{for(var w=d.keys()[Symbol.iterator](),b;!(y=(b=w.next()).done);y=true){var x=b.value;var _=true;var k=false;var P=undefined;try{for(var O=d.get(x).keys()[Symbol.iterator](),E;!(_=(E=O.next()).done);_=true){var C=E.value;var A=this.graph.vertexValue(x);var D=this.graph.vertexValue(C);if(!A.commutesWith(D,{weak:true})){var S={conflictingDeltas:new Set([x,C]),conflictResolvingDeltas:new Set};var T=true;var M=false;var j=undefined;try{for(var F=d.get(x).get(C)[Symbol.iterator](),R;!(T=(R=F.next()).done);T=true){var V=R.value;var I=[[V]].concat(i(e.verticesWithPathFrom(V)));for(var N=0;N<I.length;N++){var U=a(I[N],1);var q=U[0];var W=this.graph.vertexValue(q);if(q!==t&&W.resolves(A,D,{weak:true})){S.conflictResolvingDeltas.add(q)}}}}catch(c){M=true;j=c}finally{try{if(!T&&F["return"]){F["return"]()}}finally{if(M){throw j}}}h.add(S)}}}catch(c){k=true;P=c}finally{try{if(!_&&O["return"]){O["return"]()}}finally{if(k){throw P}}}}}catch(c){g=true;m=c}finally{try{if(!y&&w["return"]){w["return"]()}}finally{if(g){throw m}}}return h}}]);return t}(e.Delta),function(t){function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}o(this,r);s(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,t);this._childOptions=new Map;this._childApplicationConditions=new Map}l(r,t);u(r,[{key:"processProxyArguments",value:function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n={};do{if(t.length===0){throw new Error("The argument list for this Modify.DeltaModel method is insufficient.")}var a=t.shift();if(typeof a==="string"){if(!n.name){n.name=a}else{n.path=a}}else{v.extend(n,a)}}while(!n.path||!n.name);return{options:n,args:t}}},{key:"addOperation",value:function a(t,r){var n=r.path;var a=r.name;var i=r.feature;if(!this._childApplicationConditions.has(a)){var o=undefined;if(i){o=e.newFeature(a,r)}else{o=e.newFeature("delta__"+a,v.extend({hidden:true},r))}if(v.isDefined(r.resolves)){o["if"](r.resolves);r=v.extend({},r,{feature:false})}if(v.isDefined(r.requires)){o.selects(r.requires)}if(i||o.conditional){t.applicationCondition=o}this._childApplicationConditions.set(a,o)}var u;if(n.prop){var s=v.extend({},r,{name:undefined});var l=this.addChildProxy(a,new e.Delta.Modify);u=l.addOperation(t,s)}else{u=this.addChildProxy(a,t)}if(!this._childOptions.has(a)){this._childOptions.set(a,r)}return u}},{key:"delta",value:function f(){var e=s(Object.getPrototypeOf(r.prototype),"delta",this).call(this);e.graph.clear();var t=true;var n=false;var a=undefined;try{for(var o=this.childKeys()[Symbol.iterator](),u;!(t=(u=o.next()).done);t=true){var l=u.value;var c=this._childOptions.get(l);var f=this.childDelta(l);e.graph.addVertex(l,f);var v=[].concat(i(c.resolves||[]),i(c.after||[]),i(c.requires||[]));for(var d=0;d<v.length;d++){var p=v[d];e.graph.createEdge(p,l);var h=e.graph.cycle();if(h){e.graph.removeExistingEdge(p,l);throw new w.ApplicationOrderCycle(h)}}if(c.feature||this._childApplicationConditions.get(l).conditional){f.applicationCondition=this._childApplicationConditions.get(l)}}}catch(y){n=true;a=y}finally{try{if(!t&&o["return"]){o["return"]()}}finally{if(n){throw a}}}return e}}]);return r}(e.ContainerProxy));e.newComposition(function(t,r){return t instanceof e.Delta.DeltaModel||r instanceof e.Delta.DeltaModel},true);e.newEquality(v.t("DeltaModel","DeltaModel"),function(e,t){var r=e.graph.transitiveReduction();var n=t.graph.transitiveReduction();return r.equals(n,function(e,t){return e.equals(t)})})});e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];var n=true;var a=false;var i=undefined;try{for(var o=e[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){r.push(u.value);if(t&&r.length===t)break}}catch(s){a=true;i=s}finally{try{if(!n&&o["return"])o["return"]()}finally{if(a)throw i}}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var a=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();Object.defineProperty(t,"__esModule",{value:true});var o=r(3);var u=r(7);t["default"]=o.oncePer("features",function(e){o.oncePer(e.constructor,"features",function(){o.extend(e.constructor.prototype,{newFeature:function t(e){var t=arguments[1]===undefined?{}:arguments[1];o.assert(o.isUndefined(this.features[e]),"A feature with the name '"+e+"' already exists.");return this.features[e]=new this.Feature(e,t)}})});function t(t){t=Array.isArray(t)?t:[t];t=t.map(function(t){return t instanceof e.Feature?t.name:t});return t}var r=new Map;var s=new Map;function l(e){var n=arguments[1]===undefined?[]:arguments[1];h=true;if(n===true){s.set(e,true)}else if(n===false){}else if(r.get(e)!==true){o.a(r,e).push(t(n))}}function f(e,r){var n=true;var a=false;var i=undefined;try{for(var o=t(r)[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){var s=u.value;l(s,e)}}catch(f){a=true;i=f}finally{try{if(!n&&o["return"]){o["return"]()}}finally{if(a){throw i}}}}var c=new Map;var v=new Map;function d(e){var r=arguments[1]===undefined?[]:arguments[1];h=true;if(r===false){v.set(e,false)}else if(r===true){}else if(c.get(e)!==false){o.a(c,e).push(t(r))}}function p(e,r){var n=true;var a=false;var i=undefined;try{for(var o=t(r)[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){var s=u.value;d(s,e)}}catch(l){a=true;i=l}finally{try{if(!n&&o["return"]){o["return"]()}}finally{if(a){throw i}}}}var h=false;function y(){if(!h){return}h=false;var t;do{t=false;var n=true;var a=false;var i=undefined;try{for(var o=Object.keys(e.features)[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){var l=u.value;if(!s.get(l)){if(s.has(l)){s.set(l,false)}if((r.get(l)||[]).some(function(e){return e.every(function(e){return s.get(e)})})){s.set(l,true);t=true}}}}catch(f){a=true;i=f}finally{try{if(!n&&o["return"]){o["return"]()}}finally{if(a){throw i}}}}while(t);var d=true;var p=false;var y=undefined;try{for(var g=Object.keys(e.features)[Symbol.iterator](),m;!(d=(m=g.next()).done);d=true){var l=m.value;v.set(l,(c.get(l)||[]).every(function(e){return e.some(function(e){return s.get(e)})}))}}catch(f){p=true;y=f}finally{try{if(!d&&g["return"]){g["return"]()}}finally{if(p){throw y}}}}e.Feature=function(){function e(t){var r=arguments[1]===undefined?{}:arguments[1];a(this,e);this.name=t;this.options=r;var n=true;var i=false;var o=undefined;try{for(var u=Object.keys(r)[Symbol.iterator](),s;!(n=(s=u.next()).done);n=true){var l=s.value;this.addOption(l,r[l])}}catch(f){i=true;o=f}finally{try{if(!n&&u["return"]){u["return"]()}}finally{if(i){throw o}}}}i(e,[{key:"selected",get:function(){y();if(s.get(this.name)&&!v.get(this.name)){throw new u.ConstraintFailure(this)}return s.get(this.name)}},{key:"condition",get:function(){return r.get(this.name)}},{key:"conditional",get:function(){return o.a(r,this.name).length>0}},{key:"restricted",get:function(){return o.a(c,this.name).length>0}},{key:"select",value:function t(){this["if"](true)}}]);return e}();var g=[["if",[l]],["onlyIf",[d]],["selects",[f]],["requiredBy",[p]],["iff",[l,d]]];e.Feature.prototype.addOption=function(e,t){var r=true;var a=false;var i=undefined;try{for(var o=g[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var s=n(u.value,2);var l=s[0];var f=s[1];if(e===l){var c=true;var v=false;var d=undefined;try{for(var p=f[Symbol.iterator](),h;!(c=(h=p.next()).done);c=true){var y=h.value;y(this.name,t)}}catch(m){v=true;d=m}finally{try{if(!c&&p["return"]){p["return"]()}}finally{if(v){throw d}}}}}}catch(m){a=true;i=m}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(a){throw i}}}};var m=true;var w=false;var b=undefined;try{var x=function(){P=n(k.value,1);var t=P[0];e.Feature.prototype[t]=function(e){this.addOption(t,e)}};for(var _=g[Symbol.iterator](),k;!(m=(k=_.next()).done);m=true){var P;x()}}catch(O){w=true;b=O}finally{try{if(!m&&_["return"]){_["return"]()}}finally{if(w){throw b}}}e.features={}});e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}};var a=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:t==null||typeof Symbol=="undefined"||t.constructor!==Symbol,configurable:true,writable:true})};Object.defineProperty(t,"__esModule",{value:true});var i=r(3);var o=r(15);var u=n(o);t["default"]=i.oncePer("variation points",function(e){i.oncePer(e.constructor,"variation points",function(){u["default"](e);i.extend(e.constructor.prototype,{vp:function t(e,r){var n=a({},e,r);this._deltaModelProxy.delta().applyTo(n,{restrictToProperty:e});return n[e]},"do":function r(){var e;for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n]}return(e=this._deltaModelProxy)["do"].apply(e,[{feature:true}].concat(r))}})});e._deltaModelProxy=(new e.Delta.DeltaModel)["do"]()});e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};Object.defineProperty(t,"__esModule",{value:true});var a=r(3);t["default"]=a.oncePer("application conditions",function(e){a.oncePer(e.constructor,"application conditions",function(){a.extend(e.constructor.prototype,{select:function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}var a=true;var i=false;var o=undefined;try{for(var u=t[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var l=s.value;if(Array.isArray(l)){this.select.apply(this,n(l))}else{this.features[l].select()}}}catch(f){i=true;o=f}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}}})});a.extend(e.Delta.prototype,Object.defineProperties({},{applicationCondition:{get:function(){return this._applicationCondition},set:function(e){this._applicationCondition=e},configurable:true,enumerable:true},selected:{get:function(){return a.isUndefined(this.applicationCondition)||this.applicationCondition.selected},configurable:true,enumerable:true}}))});e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}};var a=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var i=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var u=function g(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return g(a,t,r)}}else if("value"in n){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var s=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,
configurable:true}});if(t)e.__proto__=t};Object.defineProperty(t,"__esModule",{value:true});var l=r(3);var f=r(6);var c=n(f);var v=r(10);var d=n(v);var p=r(22);var h=n(p);var y=r(7);t["default"]=l.oncePer("ContainerProxy",function(e){h["default"](e);e.ContainerProxy=function(t){function r(){var e=arguments[0]===undefined?{}:arguments[0];i(this,r);u(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,e);this._doArgs=[];this._original=this;this._children=new Map}s(r,t);o(r,[{key:"deactivate",value:function n(){var e=true;var t=false;var n=undefined;try{for(var a=this._children.keys()[Symbol.iterator](),i;!(e=(i=a.next()).done);e=true){var o=i.value;this.childProxy(o).deactivate()}}catch(s){t=true;n=s}finally{try{if(!e&&a["return"]){a["return"]()}}finally{if(t){throw n}}}u(Object.getPrototypeOf(r.prototype),"deactivate",this).call(this)}},{key:"addChildProxy",value:function f(t,r){var n=this.childProxy(t);var a=r.constructor.Proxy||e.Proxy;var i=new a({delta:r,parent:this});if(n instanceof e.Delta.Modify.Proxy&&i instanceof e.Delta.Modify.Proxy){return n}if(n){n.deactivate()}this._children.get(t).push(i);return i}},{key:"childKeys",value:function v(){return[].concat(a(this._children.keys()))}},{key:"childProxies",value:function p(e){return l.a(this._children,e)}},{key:"childProxy",value:function h(e){if(!this._children.has(e)){this._children.set(e,[])}return this._children.get(e)[this._children.get(e).length-1]}},{key:"childDelta",value:function g(t){var r;var n=(r=e.Delta).composed.apply(r,a(this.childProxies(t).map(function(e){return e.delta()})));return n}},{key:"do",value:function m(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(!this.active){throw new y.MultipleActiveProxiesError}var n=Object.create(this);n._doArgs=[].concat(a(this._doArgs),t);n._original=this._original;return n}},{key:"_do",value:function w(t,r){if(!this.active){throw new y.MultipleActiveProxiesError}var n=this.processProxyArguments.apply(this,a(this._doArgs).concat(a(r)));var i=n.options;var o=n.args;if(typeof i.path==="string"){i.path=new c["default"](i.path)}var u=e.ContainerProxy._newDeltaByMethod(t,o);var s=this.addOperation(u,i);return s instanceof e.ContainerProxy?s:this}},{key:"processProxyArguments",value:function b(){throw new Error("A 'ContainerProxy' subclass needs to implement the 'processProxyArguments' method.")}},{key:"addOperation",value:function x(){throw new Error("A 'ContainerProxy' subclass needs to implement the 'addOperation' method.")}}],[{key:"_newDeltaByMethod",value:function _(t,r){var n=e.ContainerProxy._methodHandlers[t].map(function(e){return e.apply(undefined,a(r))});if(n.length===1){return n[0]}else{d["default"](e);return new e.Delta.Overloaded(n)}}},{key:"newProxyMethod",value:function k(t,r){if(l.isUndefined(e.ContainerProxy.prototype[t])){e.ContainerProxy.prototype[t]=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}return this._do(t,r)}}l.a(e.ContainerProxy,"_methodHandlers",t).push(r)}}]);return r}(e.Proxy)});e.exports=t["default"]},,function(e,t,r){"use strict";var n=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var a=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function l(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return l(a,t,r)}}else if("value"in n){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(r)}};var u=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};Object.defineProperty(t,"__esModule",{value:true});var s=r(3);t["default"]=s.oncePer("Composed",function(e){e.newOperationType("Composed",function(t){function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}a(this,r);o(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,t);this._components=this.arg||[];this.options=t[1]||{}}u(r,t);i(r,[{key:"clone",value:function l(){var e=o(Object.getPrototypeOf(r.prototype),"clone",this).call(this);e._components=this._components.map(function(e){return e.clone()});return e}},{key:"applyTo",value:function f(e){var t=arguments[1]===undefined?{}:arguments[1];var r=true;var n=false;var a=undefined;try{for(var i=this._components[Symbol.iterator](),o;!(r=(o=i.next()).done);r=true){var u=o.value;u.applyTo(e,t)}}catch(s){n=true;a=s}finally{try{if(!r&&i["return"]){i["return"]()}}finally{if(n){throw a}}}}},{key:"toString",value:function c(){var e=arguments[0]===undefined?{}:arguments[0];var t=o(Object.getPrototypeOf(r.prototype),"toString",this).call(this,e);if(this._components.length>0){var n="";var a=true;var i=false;var u=undefined;try{for(var l=this._components[Symbol.iterator](),f;!(a=(f=l.next()).done);a=true){var c=f.value;n+="• "+c.toString(e)+"\n"}}catch(v){i=true;u=v}finally{try{if(!a&&l["return"]){l["return"]()}}finally{if(i){throw u}}}t+="\n"+s.indent(n,4)}return t}},{key:"precondition",value:function v(e,t){if(this._components.length===0){return true}return this._components[0].precondition(e,t)}},{key:"_collapse",value:function d(){var t=this;this._components=function(){var r=[];var a=true;var i=false;var o=undefined;try{for(var u=t._components[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var l=s.value;if(l instanceof e.Delta.Composed){l._collapse();r.push.apply(r,n(l._components))}else{r.push(l)}}}catch(f){i=true;o=f}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}return r}();var r=undefined;do{r=false;this._components=function(){var n=[];for(var a=0;a<t._components.length-1;a+=1){var i=t._components[a].composedWith(t._components[a+1],t.options);if(i instanceof e.Delta.Composed){n.push(t._components[a])}else{n.push(i);r=true;a+=1}}if(a===t._components.length-1){n.push(t._components[a])}return n}()}while(r)}},{key:"methods",get:function(){return[]}}]);return r}(e.Delta));e.newComposition(function(t,r){return t instanceof e.Delta.Composed||r instanceof e.Delta.Composed},function(t,r,a){var i=t instanceof e.Delta.Composed?t._components:[t];var o=r instanceof e.Delta.Composed?r._components:[r];var u=new e.Delta.Composed([].concat(n(i),n(o)),a);u._collapse();return u});e.newEquality(s.t("Composed","Composed"),function(e,t){return s.arraysEqual(e._components,t._components,function(e,t){return e.equals(t)})})});e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}};var a=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();Object.defineProperty(t,"__esModule",{value:true});var o=r(3);var u=r(9);var s=n(u);t["default"]=o.oncePer("Proxy",function(e){s["default"](e);e.Proxy=function(){function e(){var t=arguments[0]===undefined?{}:arguments[0];var r=t.parent;var n=t.delta;a(this,e);this._parent=r;this._active=true;this._delta=n}i(e,[{key:"delta",value:function t(){return this._delta}},{key:"active",get:function(){return this._active}},{key:"deactivate",value:function r(){this._active=false}}]);return e}();o.extend(e.Delta.prototype,{"do":function t(){var e;for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n]}var a=this.constructor.Proxy;if(!a){throw new Error("Calling 'do' on delta type '"+this.type+"', which has no Proxy interface.")}return(e=new a({delta:this}))["do"].apply(e,r)}})});e.exports=t["default"]},function(e,t,r){"use strict";var n=function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var r=[];var n=true;var a=false;var i=undefined;try{for(var o=e[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){r.push(u.value);if(t&&r.length===t)break}}catch(s){a=true;i=s}finally{try{if(!n&&o["return"])o["return"]()}finally{if(a)throw i}}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var a=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else{return Array.from(e)}};var i=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();Object.defineProperty(t,"__esModule",{value:true});"use strict";var s=function(){function e(){o(this,e);this._vertices=new Map;this._edges=new Map;this._reverseEdges=new Map;this._vertexCount=0;this._edgeCount=0}u(e,[{key:"addNewVertex",value:function t(r,n){if(this.hasVertex(r)){throw new e.VertexExistsError(r,this._vertices.get(r))}this._vertices.set(r,n);this._edges.set(r,new Map);this._reverseEdges.set(r,new Set);this._vertexCount+=1}},{key:"setVertex",value:function r(t,n){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}this._vertices.set(t,n)}},{key:"ensureVertex",value:function a(e,t){if(!this.hasVertex(e)){this.addNewVertex(e,t)}}},{key:"addVertex",value:function i(e,t){if(this.hasVertex(e)){this.setVertex(e,t)}else{this.addNewVertex(e,t)}}},{key:"removeExistingVertex",value:function s(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}if(this._edges.get(t).size>0||this._reverseEdges.get(t).size>0){throw new e.HasConnectedEdgesError(t)}this._vertices["delete"](t);this._vertexCount-=1}},{key:"destroyExistingVertex",value:function l(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}var r=true;var a=false;var i=undefined;try{for(var o=this.verticesFrom(t)[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var s=n(u.value,1);var l=s[0];this.removeEdge(t,l)}}catch(f){a=true;i=f}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(a){throw i}}}var c=true;var v=false;var d=undefined;try{for(var p=this.verticesTo(t)[Symbol.iterator](),h;!(c=(h=p.next()).done);c=true){var y=n(h.value,1);var g=y[0];this.removeEdge(g,t)}}catch(f){v=true;d=f}finally{try{if(!c&&p["return"]){p["return"]()}}finally{if(v){throw d}}}this.removeExistingVertex(t)}},{key:"removeVertex",value:function f(e){if(this.hasVertex(e)){this.removeExistingVertex(e)}}},{key:"destroyVertex",value:function c(e){if(this.hasVertex(e)){this.destroyExistingVertex(e)}}},{key:"vertexCount",value:function v(){return this._vertexCount}},{key:"hasVertex",value:function d(e){return this._vertices.has(e)}},{key:"vertexValue",value:function p(e){return this._vertices.get(e)}},{key:"addNewEdge",value:function h(t,r,n){if(this.hasEdge(t,r)){throw new e.EdgeExistsError(t,r,this.edgeValue(t,r))}if(!this.hasVertex(t)){if(this.hasVertex(r)){throw new e.VertexNotExistsError(t)}else{throw new e.VertexNotExistsError(t).v(r)}}else if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}this._edges.get(t).set(r,n);this._reverseEdges.get(r).add(t);this._edgeCount+=1}},{key:"createNewEdge",value:function y(t,r,n){if(this.hasEdge(t,r)){throw new e.EdgeExistsError(t,r,this.edgeValue(t,r))}this.ensureVertex(t);this.ensureVertex(r);this.addNewEdge(t,r,n)}},{key:"setEdge",value:function g(t,r,n){if(!this.hasEdge(t,r)){throw new e.EdgeNotExistsError(t,r)}this._edges.get(t).set(r,n)}},{key:"spanEdge",value:function m(t,r,n){if(!this.hasVertex(t)){if(this.hasVertex(r)){throw new e.VertexNotExistsError(t)}else{throw new e.VertexNotExistsError(t).v(r)}}else if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}if(!this.hasEdge(t,r)){this.addNewEdge(t,r,n)}}},{key:"addEdge",value:function w(e,t,r){if(this.hasEdge(e,t)){this.setEdge(e,t,r)}else{this.addNewEdge(e,t,r)}}},{key:"ensureEdge",value:function b(e,t,r){if(!this.hasEdge(e,t)){this.createNewEdge(e,t,r)}}},{key:"createEdge",value:function x(e,t,r){if(this.hasEdge(e,t)){this.setEdge(e,t,r)}else{this.createNewEdge(e,t,r)}}},{key:"removeExistingEdge",value:function _(t,r){if(!this.hasEdge(t,r)){throw new e.EdgeNotExistsError(t,r)}this._edges.get(t)["delete"](r);this._reverseEdges.get(r)["delete"](t);this._edgeCount-=1}},{key:"removeEdge",value:function k(e,t){if(this.hasEdge(e,t)){this.removeExistingEdge(e,t)}}},{key:"edgeCount",value:function P(){return this._edgeCount}},{key:"hasEdge",value:function O(e,t){return this.hasVertex(e)&&this.hasVertex(t)&&this._edges.has(e)&&this._edges.get(e).has(t)}},{key:"edgeValue",value:function E(e,t){return this.hasEdge(e,t)?this._edges.get(e).get(t):undefined}},{key:"vertices",value:regeneratorRuntime.mark(function C(){var e,t,r,a,i,o,u,s,l;return regeneratorRuntime.wrap(function f(c){while(1)switch(c.prev=c.next){case 0:e=new Set;t=true;r=false;a=undefined;c.prev=4;i=this._vertices[Symbol.iterator]();case 6:if(t=(o=i.next()).done){c.next=17;break}u=n(o.value,2);s=u[0];l=u[1];if(!(this.hasVertex(s)&&!e.has(s))){c.next=14;break}e.add(s);c.next=14;return[s,l];case 14:t=true;c.next=6;break;case 17:c.next=23;break;case 19:c.prev=19;c.t0=c["catch"](4);r=true;a=c.t0;case 23:c.prev=23;c.prev=24;if(!t&&i["return"]){i["return"]()}case 26:c.prev=26;if(!r){c.next=29;break}throw a;case 29:return c.finish(26);case 30:return c.finish(23);case 31:case"end":return c.stop()}},C,this,[[4,19,23,31],[24,,26,30]])})},{key:Symbol.iterator,value:function(){return this.vertices()}},{key:"edges",value:regeneratorRuntime.mark(function A(){var e,t,r,n,a,i,o,u,s,l,f,c,v;return regeneratorRuntime.wrap(function d(p){while(1)switch(p.prev=p.next){case 0:e=new Map;t=true;r=false;n=undefined;p.prev=4;a=this._edges.keys()[Symbol.iterator]();case 6:if(t=(i=a.next()).done){p.next=40;break}o=i.value;if(!e.has(o)){e.set(o,new Set)}u=true;s=false;l=undefined;p.prev=12;f=this._edges.get(o).keys()[Symbol.iterator]();case 14:if(u=(c=f.next()).done){p.next=23;break}v=c.value;if(!(this.hasEdge(o,v)&&!e.get(o).has(v))){p.next=20;break}e.get(o).add(v);p.next=20;return[o,v,this._edges.get(o).get(v)];case 20:u=true;p.next=14;break;case 23:p.next=29;break;case 25:p.prev=25;p.t1=p["catch"](12);s=true;l=p.t1;case 29:p.prev=29;p.prev=30;if(!u&&f["return"]){f["return"]()}case 32:p.prev=32;if(!s){p.next=35;break}throw l;case 35:return p.finish(32);case 36:return p.finish(29);case 37:t=true;p.next=6;break;case 40:p.next=46;break;case 42:p.prev=42;p.t2=p["catch"](4);r=true;n=p.t2;case 46:p.prev=46;p.prev=47;if(!t&&a["return"]){a["return"]()}case 49:p.prev=49;if(!r){p.next=52;break}throw n;case 52:return p.finish(49);case 53:return p.finish(46);case 54:case"end":return p.stop()}},A,this,[[4,42,46,54],[12,25,29,37],[30,,32,36],[47,,49,53]])})},{key:"verticesFrom",value:function D(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return this._verticesFrom(t)}},{key:"_verticesFrom",value:regeneratorRuntime.mark(function S(e){var t,r,n,a,i,o,u;return regeneratorRuntime.wrap(function s(l){while(1)switch(l.prev=l.next){case 0:t=new Set;r=true;n=false;a=undefined;l.prev=4;i=this._edges.get(e).keys()[Symbol.iterator]();case 6:if(r=(o=i.next()).done){l.next=15;break}u=o.value;if(!(this.hasEdge(e,u)&&!t.has(u))){l.next=12;break}t.add(u);l.next=12;return[u,this._vertices.get(u),this._edges.get(e).get(u)];case 12:r=true;l.next=6;break;case 15:l.next=21;break;case 17:l.prev=17;l.t3=l["catch"](4);n=true;a=l.t3;case 21:l.prev=21;l.prev=22;if(!r&&i["return"]){i["return"]()}case 24:l.prev=24;if(!n){l.next=27;break}throw a;case 27:return l.finish(24);case 28:return l.finish(21);case 29:case"end":return l.stop()}},S,this,[[4,17,21,29],[22,,24,28]])})},{key:"verticesTo",value:function T(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return this._verticesTo(t)}},{key:"_verticesTo",value:regeneratorRuntime.mark(function M(e){var t,r,n,a,i,o,u;return regeneratorRuntime.wrap(function s(l){while(1)switch(l.prev=l.next){case 0:t=new Set;r=true;n=false;a=undefined;l.prev=4;i=this._reverseEdges.get(e)[Symbol.iterator]();case 6:if(r=(o=i.next()).done){l.next=15;break}u=o.value;if(!(this.hasEdge(u,e)&&!t.has(u))){l.next=12;break}t.add(u);l.next=12;return[u,this._vertices.get(u),this._edges.get(u).get(e)];case 12:r=true;l.next=6;break;case 15:l.next=21;break;case 17:l.prev=17;l.t4=l["catch"](4);n=true;a=l.t4;case 21:l.prev=21;l.prev=22;if(!r&&i["return"]){i["return"]()}case 24:l.prev=24;if(!n){l.next=27;break}throw a;case 27:return l.finish(24);case 28:return l.finish(21);case 29:case"end":return l.stop()}},M,this,[[4,17,21,29],[22,,24,28]])})},{key:"verticesWithPathFrom",value:function j(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return this._verticesWithPathFrom(t,new Set)}},{key:"_verticesWithPathFrom",value:regeneratorRuntime.mark(function F(e,t){var r,n,a,i,o,u;return regeneratorRuntime.wrap(function s(l){while(1)switch(l.prev=l.next){case 0:r=true;n=false;a=undefined;l.prev=3;i=this._edges.get(e).keys()[Symbol.iterator]();case 5:if(r=(o=i.next()).done){l.next=15;break}u=o.value;if(!(this.hasEdge(e,u)&&!t.has(u))){l.next=12;break}t.add(u);l.next=11;return[u,this._vertices.get(u)];case 11:return l.delegateYield(this._verticesWithPathFrom(u,t),"t5",12);case 12:r=true;l.next=5;break;case 15:l.next=21;break;case 17:l.prev=17;l.t6=l["catch"](3);n=true;a=l.t6;case 21:l.prev=21;l.prev=22;if(!r&&i["return"]){i["return"]()}case 24:l.prev=24;if(!n){l.next=27;break}throw a;case 27:return l.finish(24);case 28:return l.finish(21);case 29:case"end":return l.stop()}},F,this,[[3,17,21,29],[22,,24,28]])})},{key:"verticesWithPathTo",value:function R(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return this._verticesWithPathTo(t,new Set)}},{key:"_verticesWithPathTo",value:regeneratorRuntime.mark(function V(e,t){var r,n,a,i,o,u;return regeneratorRuntime.wrap(function s(l){while(1)switch(l.prev=l.next){case 0:r=true;n=false;a=undefined;l.prev=3;i=this._reverseEdges.get(e)[Symbol.iterator]();case 5:if(r=(o=i.next()).done){l.next=15;break}u=o.value;if(!(this.hasEdge(u,e)&&!t.has(u))){l.next=12;break}t.add(u);l.next=11;return[u,this._vertices.get(u)];case 11:return l.delegateYield(this._verticesWithPathTo(u,t),"t7",12);case 12:r=true;l.next=5;break;case 15:l.next=21;break;case 17:l.prev=17;l.t8=l["catch"](3);n=true;a=l.t8;case 21:l.prev=21;l.prev=22;if(!r&&i["return"]){i["return"]()}case 24:l.prev=24;if(!n){l.next=27;break}throw a;case 27:return l.finish(24);case 28:return l.finish(21);case 29:case"end":return l.stop()}},V,this,[[3,17,21,29],[22,,24,28]])})},{key:"vertices_topologically",value:regeneratorRuntime.mark(function I(){var t,r,a,i,o,u,s,l,f,c,v,d;return regeneratorRuntime.wrap(function p(h){while(1)switch(h.prev=h.next){case 0:o=function y(o){var u,s,l,f,c,v,d,p,h;return regeneratorRuntime.wrap(function g(t){while(1)switch(t.prev=t.next){case 0:r.push(o);u=r.indexOf(o);if(!(u!==r.length-1)){t.next=5;break}s=r.slice(u+1).reverse();throw new e.CycleError(s);case 5:if(a.has(o)){t.next=36;break}l=true;f=false;c=undefined;t.prev=9;v=i.verticesTo(o)[Symbol.iterator]();case 11:if(l=(d=v.next()).done){t.next=18;break}p=n(d.value,1);h=p[0];return t.delegateYield(y(h),"t9",15);case 15:l=true;t.next=11;break;case 18:t.next=24;break;case 20:t.prev=20;t.t10=t["catch"](9);f=true;c=t.t10;case 24:t.prev=24;t.prev=25;if(!l&&v["return"]){v["return"]()}case 27:t.prev=27;if(!f){t.next=30;break}throw c;case 30:return t.finish(27);case 31:return t.finish(24);case 32:if(!i.hasVertex(o)){t.next=35;break}t.next=35;return[o,i._vertices.get(o)];case 35:a.add(o);case 36:r.pop();case 37:case"end":return t.stop()}},t[0],this,[[9,20,24,32],[25,,27,31]])};t=[o].map(regeneratorRuntime.mark);r=[];a=new Set;i=this;u=true;s=false;l=undefined;h.prev=8;f=this.vertices()[Symbol.iterator]();case 10:if(u=(c=f.next()).done){h.next=18;break}v=n(c.value,1);d=v[0];if(a.has(d)){h.next=15;break}return h.delegateYield(o(d),"t11",15);case 15:u=true;h.next=10;break;case 18:h.next=24;break;case 20:h.prev=20;h.t12=h["catch"](8);s=true;l=h.t12;case 24:h.prev=24;h.prev=25;if(!u&&f["return"]){f["return"]()}case 27:h.prev=27;if(!s){h.next=30;break}throw l;case 30:return h.finish(27);case 31:return h.finish(24);case 32:case"end":return h.stop()}},I,this,[[8,20,24,32],[25,,27,31]])})},{key:"clearEdges",value:function N(){var e=true;var t=false;var r=undefined;try{for(var a=this.edges()[Symbol.iterator](),i;!(e=(i=a.next()).done);e=true){var o=n(i.value,2);var u=o[0];var s=o[1];this.removeEdge(u,s)}}catch(l){t=true;r=l}finally{try{if(!e&&a["return"]){a["return"]()}}finally{if(t){throw r}}}}},{key:"clear",value:function U(){var e=true;var t=false;var r=undefined;try{for(var a=this.vertices()[Symbol.iterator](),i;!(e=(i=a.next()).done);e=true){var o=n(i.value,1);var u=o[0];this.destroyVertex(u)}}catch(s){t=true;r=s}finally{try{if(!e&&a["return"]){a["return"]()}}finally{if(t){throw r}}}}},{key:"equals",value:function q(){var t=arguments[0]===undefined?undefined:arguments[0];var r=arguments[1]===undefined?function(e,t,r,n){return e===t}:arguments[1];if(!(t instanceof e)){return false}if(this.vertexCount()!==t.vertexCount()){return false}if(this.edgeCount()!==t.edgeCount()){return false}var a=true;var i=false;var o=undefined;try{for(var u=this.vertices()[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var l=n(s.value,2);var f=l[0];var c=l[1];if(!t.hasVertex(f)){return false}if(!r(c,t.vertexValue(f),f)){return false}}}catch(v){i=true;o=v}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}var d=true;var p=false;var h=undefined;try{for(var y=this.edges()[Symbol.iterator](),g;!(d=(g=y.next()).done);d=true){var m=n(g.value,3);var w=m[0];var b=m[1];var c=m[2];if(!t.hasEdge(w,b)){return false}if(!r(c,t.edgeValue(w,b),w,b)){return false}}}catch(v){p=true;h=v}finally{try{if(!d&&y["return"]){y["return"]()}}finally{if(p){throw h}}}return true}},{key:"cycle",value:function W(){var e=this;var t=[];var r=new Set;var a=function(e){function t(t){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(i){var o=t.indexOf(i);if(o>=0){return t.slice(o)}if(r.has(i)){return null}r.add(i);t.push(i);var u=true;var s=false;var l=undefined;try{for(var f=e.verticesFrom(i)[Symbol.iterator](),c;!(u=(c=f.next()).done);u=true){var v=n(c.value,1);var d=v[0];var p=a(d);if(p){return p}}}catch(h){s=true;l=h}finally{try{if(!u&&f["return"]){f["return"]()}}finally{if(s){throw l}}}t.pop()});var i=true;var o=false;var u=undefined;try{for(var s=this.vertices()[Symbol.iterator](),l;!(i=(l=s.next()).done);i=true){var f=n(l.value,1);var c=f[0];var v=a(c);if(v){return v}}}catch(d){o=true;u=d}finally{try{if(!i&&s["return"]){s["return"]()}}finally{if(o){throw u}}}return null}},{key:"hasCycle",value:function z(){return!!this.cycle()}},{key:"path",value:function H(e,t){var r=this;if(!this.hasVertex(e)||!this.hasVertex(t)){return null}var a=[];var i=function(e){function t(t){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(e){a.push(e);if(r.hasEdge(e,t)){return[].concat(a,[t])}var o=true;var u=false;var s=undefined;try{for(var l=r.verticesFrom(e)[Symbol.iterator](),f;!(o=(f=l.next()).done);o=true){var c=n(f.value,1);var v=c[0];if(a.indexOf(v)===-1){var d=i(v);if(d){return d}}}}catch(p){u=true;s=p}finally{try{if(!o&&l["return"]){l["return"]()}}finally{if(u){throw s}}}a.pop();return null});return i(e)}},{key:"hasPath",value:function L(e,t){return!!this.path(e,t)}},{key:"clone",value:function J(){var t=arguments[0]===undefined?function(e){return e}:arguments[0];var r=new e;var a=true;var i=false;var o=undefined;try{for(var u=this.vertices()[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var l=n(s.value,2);var f=l[0];var c=l[1];r.addVertex(f,t(c,f))}}catch(v){i=true;o=v}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}var d=true;var p=false;var h=undefined;try{for(var y=this.edges()[Symbol.iterator](),g;!(d=(g=y.next()).done);d=true){var m=n(g.value,3);var w=m[0];var b=m[1];var c=m[2];r.addEdge(w,b,t(c,w,b))}}catch(v){p=true;h=v}finally{try{if(!d&&y["return"]){y["return"]()}}finally{if(p){throw h}}}return r}},{key:"transitiveReduction",value:function Y(){var e=arguments[0]===undefined?function(e){return e}:arguments[0];var t=this.clone(e);var r=true;var a=false;var i=undefined;try{for(var o=this.vertices()[Symbol.iterator](),u;!(r=(u=o.next()).done);r=true){var s=n(u.value,1);var l=s[0];var f=true;var c=false;var v=undefined;try{for(var d=this.vertices()[Symbol.iterator](),p;!(f=(p=d.next()).done);f=true){var h=n(p.value,1);var y=h[0];if(t.hasEdge(l,y)){var g=true;var m=false;var w=undefined;try{for(var b=this.vertices()[Symbol.iterator](),x;!(g=(x=b.next()).done);g=true){var _=n(x.value,1);var k=_[0];if(t.hasPath(y,k)){t.removeEdge(l,k)}}}catch(P){m=true;w=P}finally{try{if(!g&&b["return"]){b["return"]()}}finally{if(m){throw w}}}}}}catch(P){c=true;v=P}finally{try{if(!f&&d["return"]){d["return"]()}}finally{if(c){throw v}}}}}catch(P){a=true;i=P}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(a){throw i}}}return t}}]);return e}();t["default"]=s;s.VertexExistsError=function(e){function t(r,n){o(this,t);var a=new e;a.__proto__=t.prototype;a.vertices=new Set;a.v(r,n);return a}i(t,e);u(t,[{key:"v",value:function r(e,t){this.vertices.add({key:e,value:t});this._refreshMessage();return this}},{key:"_refreshMessage",value:function n(){var e=this.vertices.size===1?"a vertex":"vertices";this.message="This graph has "+e+" '"+[].concat(a(this.vertices)).map(function(e){return e.key}).join("', '")+"'"}}]);return t}(Error);s.VertexNotExistsError=function(e){function t(r){o(this,t);var n=new e;n.__proto__=t.prototype;n.vertices=new Set;n.v(r);return n}i(t,e);u(t,[{key:"v",value:function r(e){this.vertices.add({key:e});this._refreshMessage();return this}},{key:"_refreshMessage",value:function n(){var e=this.vertices.size===1?"a vertex":"vertices";this.message="This graph does not have "+e+" '"+[].concat(a(this.vertices)).map(function(e){return e.key}).join("', '")+"'"}}]);return t}(Error);s.EdgeExistsError=function(e){function t(r,n,a){o(this,t);var i=new e;i.__proto__=t.prototype;i.edges=new Set;i.e(r,n,a);return i}i(t,e);u(t,[{key:"e",value:function r(e,t,n){this.edges.add({from:e,to:t,value:n});this._refreshMessage();return this}},{key:"_refreshMessage",value:function n(){var e=[];var t=true;var r=false;var n=undefined;try{for(var a=this.edges[Symbol.iterator](),i;!(t=(i=a.next()).done);t=true){var o=i.value;var u=o.from;var s=o.to;e.push("('"+u+"', '"+s+"')")}}catch(l){r=true;n=l}finally{try{if(!t&&a["return"]){a["return"]()}}finally{if(r){throw n}}}var f=e.length===1?"an edge":"edges";this.message="This graph has "+f+" "+e.join(", ")}}]);return t}(Error);s.EdgeNotExistsError=function(e){function t(r,n){o(this,t);var a=new e;a.__proto__=t.prototype;a.edges=new Set;a.e(r,n);return a}i(t,e);u(t,[{key:"e",value:function r(e,t){this.edges.add({from:e,to:t});this._refreshMessage();return this}},{key:"_refreshMessage",value:function n(){var e=[];var t=true;var r=false;var n=undefined;try{for(var a=this.edges[Symbol.iterator](),i;!(t=(i=a.next()).done);t=true){var o=i.value;var u=o.from;var s=o.to;e.push("('"+u+"', '"+s+"')")}}catch(l){r=true;n=l}finally{try{if(!t&&a["return"]){a["return"]()}}finally{if(r){throw n}}}var f=e.length===1?"an edge":"edges";this.message="This graph does not have "+f+" "+e.join(", ")}}]);return t}(Error);s.HasConnectedEdgesError=function(e){function t(r){o(this,t);var n=new e;n.__proto__=t.prototype;n.key=r;n.message="The '"+r+"' vertex has connected edges";return n}i(t,e);return t}(Error);s.CycleError=function(e){function t(r){o(this,t);var n=new e;n.__proto__=t.prototype;n.cycle=r;n.message="This graph contains a cycle: "+r;return n}i(t,e);return t}(Error);e.exports=t["default"]}])});
//# sourceMappingURL=dist/delta.min.js.map