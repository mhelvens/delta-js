(function e(r,t){if(typeof exports==="object"&&typeof module==="object")module.exports=t();else if(typeof define==="function"&&define.amd)define(t);else if(typeof exports==="object")exports["DeltaJs"]=t();else r["DeltaJs"]=t()})(this,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:false};e[n].call(a.exports,a,a.exports,t);a.loaded=true;return a.exports}t.m=e;t.c=r;t.p="";return t(0)}([function(e,r,t){e.exports=t(2)},,function(e,r,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=t(4).extend;var i=n(t(5));var o=t(6);var u=o.ReadableTarget;var s=o.WritableTarget;a(i,{ReadableTarget:u,WritableTarget:s});var f=n(t(7));a(i,{Path:f});var l=t(8);var c=l.ApplicationError;var v=l.PreconditionFailure;var d=l.MultipleOverloadsApplicationError;var p=l.NoOverloadsApplicationError;var h=l.CompositionError;var y=l.MultipleOverloadsCompositionError;var g=l.ConstraintFailure;var m=l.ApplicationOrderCycle;var w=l.UnresolvedDeltaConflict;var b=l.MultipleActiveProxiesError;a(i,{ApplicationError:c,PreconditionFailure:v,MultipleOverloadsApplicationError:d,NoOverloadsApplicationError:p,CompositionError:h,MultipleOverloadsCompositionError:y,ConstraintFailure:g,ApplicationOrderCycle:m,UnresolvedDeltaConflict:w,MultipleActiveProxiesError:b});e.exports=i},,function(e,r,t){"use strict";var n=function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var t=[];for(var n=e[Symbol.iterator](),a;!(a=n.next()).done;){t.push(a.value);if(r&&t.length===r)break}return t}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var a=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else{return Array.from(e)}};r.extend=i;r.o=u;r.a=s;r.m=f;r.s=l;r.assert=c;r.isUndefined=v;r.isDefined=d;r.repeat=p;r.indent=h;r.oncePer=g;r.mapEqual=b;r.customIndexOf=x;r.arraysEqual=_;r.arraysHaveSameElements=P;r.swapLastTwo=O;Object.defineProperty(r,"__esModule",{value:true});function i(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}var a=true;var i=false;var o=undefined;try{for(var u=t[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var f=s.value;var l=true;var c=false;var v=undefined;try{for(var d=Object.keys(f)[Symbol.iterator](),p;!(l=(p=d.next()).done);l=true){var h=p.value;Object.defineProperty(e,h,Object.getOwnPropertyDescriptor(f,h))}}catch(y){c=true;v=y}finally{try{if(!l&&d["return"]){d["return"]()}}finally{if(c){throw v}}}}}catch(y){i=true;o=y}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}return e}var o=function(e){return function(r){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++){n[i-1]=arguments[i]}var o=n.slice(0,-1);var u=n[n.length-1];if(o.length===0){return r}var s=e.apply(undefined,[r].concat(a(o.slice(0,-1))));if(s instanceof Map){if(v(s.get(o[o.length-1]))){s.set(o[o.length-1],u)}return s.get(o[o.length-1])}else{if(v(s[o[o.length-1]])){s[o[o.length-1]]=u}return s[o[o.length-1]]}}};function u(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}return o(u).apply(undefined,[e].concat(t,[{}]))}function s(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}return o(u).apply(undefined,[e].concat(t,[[]]))}function f(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}return o(f).apply(undefined,[e].concat(t,[new Map]))}function l(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}return o(f).apply(undefined,[e].concat(t,[new Set]))}function c(e,r){if(!e){throw new Error(r||"Assertion failed")}}function v(e){return typeof e==="undefined"}function d(e){return typeof e!=="undefined"}function p(e,r){return new Array(e+1).join(r)}function h(e,r){var t=arguments[2]===undefined?" ":arguments[2];return e.replace(/^(?!\s*$)/gm,p(r,t))}var y={};function g(e,r,t){var a=function(e){if(!y[r]){y[r]=Symbol("once per:"+r)}if(e[y[r]]){return}e[y[r]]=true;return t.call(e,e)};if(typeof e==="string"){var i=[e,r];var o=n(i,2);r=o[0];t=o[1];return a}else{return a(e)}}var m=function(e,r){return function(t,n){return t.type===e&&n.type===r}};r.t=m;var w=function(e){return function(r,t){if(typeof t==="string"){t=function(e){return function(r){return r[e]}}(t)}return function(n,a){return new e.Delta[r](t&&t({d1:n,d2:a,p1:n.arg,p2:a.arg}))}}};r.define_d=w;function b(e,r){var t=arguments[2]===undefined?function(e,r){return e===r}:arguments[2];if(e.size!==r.size){return false}var n=[].concat(a(e.keys())).sort();var i=[].concat(a(r.keys())).sort();for(var o=0;o<n.length;++o){if(n[o]!==i[o]){return false}if(!t(e.get(n[o]),r.get(i[o]))){return false}}return true}function x(e,r){var t=arguments[2]===undefined?function(e,r){return e===r}:arguments[2];for(var n=0;n<e.length;++n){if(t(e[n],r)){return n}}return-1}function _(e,r){var t=arguments[2]===undefined?function(e,r){return e===r}:arguments[2];if(e.length!==r.length){return false}for(var n=0;n<e.length;++n){if(!t(e[n],r[n])){return false}}return true}function P(e,r){var t=arguments[2]===undefined?function(e,r){return e===r}:arguments[2];if(e.length!==r.length){return false}var n=[].concat(a(r));for(var i=0;i<e.length;++i){var o=false;for(var u=0;u<n.length;++u){if(t(e[i],n[u])){n.splice(u,1);o=true;break}}if(!o){return false}}return true}function O(e){return e.slice(0,-2).concat([e[e.length-1],e[e.length-2]])}},function(e,r,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e,r){var t=Object.create(e.prototype);var n=e.apply(t,r);return n!=null&&(typeof n=="object"||typeof n=="function")?n:t};var i=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var o=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var u=n(t(22));var s=t(4);var f=s.extend;var l=s.assert;var c=s.isUndefined;var v=s.isDefined;var d=s.arraysEqual;var p=n(t(7));var h=t(6);var y=h.ReadableTarget;var g=h.WritableTarget;var m=h.rt;var w=h.wt;var b=n(t(9));var x=n(t(10));var _=n(t(11));var P=n(t(12));var O=n(t(13));var E=n(t(14));var C=n(t(15));var A=n(t(16));var k=n(t(17));var D=n(t(18));var S=n(t(19));var T=function(){function e(){o(this,e);S(this);b(this);x(this);_(this);P(this);O(this);E(this);C(this);A(this);k(this);D(this)}i(e,{newOperationType:{value:function r(t,n){var i=arguments[2]===undefined?null:arguments[2];l(t[0]===t[0].toUpperCase(),"Delta operation classes must have a name starting with a capital letter - '"+t+"' does not.");l(c(this.Delta[t]),"The '"+t+"' operation type already exists.");this.Delta[t]=n;n.Proxy=i;var o=n.prototype.applyTo||function(){};f(n.prototype,{applyTo:function m(r){var t=arguments[1]===undefined?{}:arguments[1];if(!this.selected){return}if(!(r instanceof e.ReadableTarget)){r=new e.ReadableTarget(r)}if(c(t.weak)){t.weak=false}var n=this.evaluatePrecondition(r,t);if(n!==true){throw n}o.call(this,r,t)},type:t});var u=t[0].toLowerCase()+t.slice(1);var s=true;var v=false;var d=undefined;try{for(var p=(n.prototype.methods||[u])[Symbol.iterator](),h;!(s=(h=p.next()).done);s=true){var y=h.value;this.ContainerProxy.newProxyMethod(y,function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++){r[t]=arguments[t]}return a(n,r)})}}catch(g){v=true;d=g}finally{try{if(!s&&p["return"]){p["return"]()}}finally{if(v){throw d}}}return n}},newProxyMethod:{value:function t(e,r){this.ContainerProxy.newProxyMethod(e,r)}}});return e}();e.exports=T},function(e,r,t){"use strict";var n=function c(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return c(a,r,t)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(t)}};var a=function(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof r)}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(r)e.__proto__=r};var i=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var o=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};r.wt=f;r.rt=l;Object.defineProperty(r,"__esModule",{value:true});var u=r.ReadableTarget=function(){function e(r){o(this,e);this._val=r}i(e,{getValue:{value:function r(){return this._val}},value:{get:function(){return this.getValue()},set:function(e){this.setValue(e)}}});return e}();var s=r.WritableTarget=function(e){function r(e,t){o(this,r);n(Object.getPrototypeOf(r.prototype),"constructor",this).call(this);this._obj=e;this._prop=t}a(r,e);i(r,{getValue:{value:function t(){return this._obj[this._prop]}},setValue:{value:function u(e){this._obj[this._prop]=e}},"delete":{value:function s(){delete this._obj[this._prop]}}});return r}(u);function f(e,r){return new s(e,r)}function l(e,r){return new u(e,r)}},function(e,r,t){"use strict";var n=function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var t=[];for(var n=e[Symbol.iterator](),a;!(a=n.next()).done;){t.push(a.value);if(r&&t.length===r)break}return t}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var a=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var i=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var o=t(4);var u=o.assert;var s=o.isDefined;var f=function(){function e(){var r=arguments[0]===undefined?"":arguments[0];i(this,e);var t=r.match(/^([.#]?)(\w*|\(\w+\))(.*)$/);u(t,"The path string '"+r+"' is not well formed.");var a=n(t,4);var o=a[1];var s=a[2];var f=a[3];if(o==="#"){this.set(new e(".(instance)."+s+""+f))}else if(s!==""){this._prop=s;if(f!==""){this._rest=new e(f)}}}a(e,{set:{value:function r(e){this._prop=e._prop;this._rest=e._rest}},prop:{get:function(){return this._prop}},rest:{get:function(){return this._rest}},toString:{value:function t(){var e="";if(s(this.prop)){e+=this.prop;if(s(this.rest)){e+="."+this.rest.toString()}}return e}}});return e}();e.exports=f},function(e,r,t){"use strict";var n=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else{return Array.from(e)}};var a=function g(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return g(a,r,t)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(t)}};var i=function(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof r)}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(r)e.__proto__=r};var o=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};Object.defineProperty(r,"__esModule",{value:true});var u=r.ApplicationError=function(e){function r(){o(this,r);if(e!=null){e.apply(this,arguments)}}i(r,e);return r}(Error);var s=r.PreconditionFailure=function(e){function r(e,t){o(this,r);a(Object.getPrototypeOf(r.prototype),"constructor",this).call(this);this.name="PreconditionFailure";this.message="This delta of type '"+e.type+"' cannot apply to this value of type '"+typeof t+"'.";this.delta=e;this.value=t}i(r,e);return r}(u);var f=r.MultipleOverloadsApplicationError=function(e){function r(e,t){var n=arguments[2]===undefined?[]:arguments[2];o(this,r);a(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,e,t);this.name="MultipleOverloadsApplicationError";this.message="None of the delta-types "+e.overloads.map(function(e){return"'"+e.type+"'"}).join(",")+" can apply to this value of type '"+typeof t+"'."+n.map(function(e){return"\n-- "+e.message}).join("");this.errors=n}i(r,e);return r}(s);var l=r.NoOverloadsApplicationError=function(e){function r(e,t){o(this,r);a(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,e,t);this.name="NoOverloadsApplicationError";this.message="This delta of type '"+e.type+"' has no specific deltas assigned to it, so it cannot apply to this value of type '"+typeof t+"."}i(r,e);return r}(s);var c=r.CompositionError=function(e){function r(e,t){o(this,r);a(Object.getPrototypeOf(r.prototype),"constructor",this).call(this);this.name="CompositionError";this.message="This delta of type '"+e.type+"' cannot be composed with this other delta of type '"+t.type+"'.";this.delta1=e;this.delta2=t}i(r,e);return r}(Error);var v=r.MultipleOverloadsCompositionError=function(e){function r(e,t){var n=arguments[2]===undefined?[]:arguments[2];o(this,r);a(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,e,t);this.name="MultipleOverloadsCompositionError";this.message="There are no overloads to compose this delta of type '"+e.type+"' with this other delta of type '"+t.type+"'."+n.map(function(e){return"\n-- "+e.message}).join("");this.errors=n}i(r,e);return r}(c);var d=r.ConstraintFailure=function(e){function r(e){o(this,r);a(Object.getPrototypeOf(r.prototype),"constructor",this).call(this);this.name="ConstraintFailure";this.message="The feature '"+e.name+"' is both selected and excluded by its constraints.";this.feature=e}i(r,e);return r}(Error);var p=r.ApplicationOrderCycle=function(e){function r(e,t){o(this,r);a(Object.getPrototypeOf(r.prototype),"constructor",this).call(this);this.name="ApplicationOrderCycle";this.message="The new application order between "+e+" and "+t+" created a cycle.";this.from=e;this.to=t}i(r,e);return r}(Error);var h=r.UnresolvedDeltaConflict=function(e){function r(e){o(this,r);a(Object.getPrototypeOf(r.prototype),"constructor",this).call(this);this.name="UnresolvedDeltaConflict";e=[].concat(n(e));var t=e.slice(0,-1).map(function(e){return"'"+e+"'"}).join(",");this.message="There is an unresolved conflict between deltas "+t+" and '"+e[e.length-1]+"'.";this.deltaNames=e}i(r,e);return r}(u);var y=r.MultipleActiveProxiesError=function(e){function r(){o(this,r);a(Object.getPrototypeOf(r.prototype),"constructor",this).call(this);this.name="MultipleActiveProxiesError";this.message="Only one Proxy per path can be active at any given time."}i(r,e);return r}(Error)},function(e,r,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else{return Array.from(e)}};var i=function(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})};var o=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var u=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var s=t(4);var f=s.extend;var l=s.oncePer;var c=s.isDefined;var v=s.isUndefined;var d=s.arraysEqual;var p=s.swapLastTwo;var h=t(6);var y=h.ReadableTarget;var g=h.wt;var m=t(8);var w=m.PreconditionFailure;var b=m.CompositionError;var x=n(t(23));e.exports=l("Delta",function(e){e.Delta=function(){function r(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++){n[a]=arguments[a]}u(this,r);this.id=++e.Delta._nextID;this.args=n}o(r,{arg:{get:function(){return this.args[0]},set:function(e){this.args[0]=e}},clone:{value:function t(){return new this.constructor(this.arg)}},evaluatePrecondition:{value:function n(e){var r=arguments[1]===undefined?{}:arguments[1];var t=r.weak;if(this.precondition){var n=this.precondition(e,r);if(n instanceof w){return n}else if(!n){return new w(this,e.value)}}return true}},appliedTo:{value:function a(e){var r=arguments[1]===undefined?{}:arguments[1];if(e instanceof y){e=e.value}if(typeof e.clone==="function"){e=e.clone()}var t={value:e};this.applyTo(g(t,"value"),r);return t.value}},toString:{value:function i(){var e=arguments[0]===undefined?{}:arguments[0];var r=this.type;if(e.targetProp){r+=" ‹"+e.targetProp+"›"}if(this.args.length>0){r+=": "+this.args.map(function(e){return JSON.stringify(e)}).join(",")}if(e.debug){r+=" ("+this.id+")"}return r}}});return r}();e.Delta._nextID=0;var r=new Map;function t(t,n,o){var u=arguments[3]===undefined?{}:arguments[3];if(v(u.commutative)){u.commutative=false}if(v(u.arity)){u.arity=2}if(v(u.onTrue)){u.onTrue=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++){r[t]=arguments[t]}return r.slice(0,u.arity)}}if(v(u.onFalse)){u.onFalse=function(){throw new Error("Failure in finding a "+t+"!")}}if(u.onDefault==="onTrue"){u.onDefault=u.onTrue}else if(u.onDefault==="onFalse"||v(u.onDefault)){u.onDefault=u.onFalse}f(u,{name:t,staticMethodName:n,methodName:o,creationMethodName:"new"+t[0].toUpperCase()+""+t.slice(1),storageSymbol:Symbol("multiDispatch:"+t)});r.set(t,u);var s=u.creationMethodName;var c=u.storageSymbol;var d=u.onTrue;var h=u.onFalse;var y=u.onDefault;var g=u.commutative;var m=u.arity;f(e.Delta,function(){var r={};i(r,c,[]);i(r,s,function(r,t){var n=arguments[2]===undefined?{}:arguments[2];if(v(n.weak)){n.weak=false}if(v(e.Delta[c])){e.Delta[c]=[]}e.Delta[c].push({precondition:r,value:t,options:n})});i(r,n,function(){for(var r=arguments.length,t=Array(r),n=0;n<r;n++){t[n]=arguments[n]}var i=t.slice(0,m),o=t[m]||{};if(v(o.weak)){o.weak=false}var u=function(){},s=false,f=false;if(v(e.Delta[c])){e.Delta[c]=[]}var l=true;var w=false;var b=undefined;try{for(var x=e.Delta[c][Symbol.iterator](),_;!(l=(_=x.next()).done);l=true){var P=_.value;var O=P.precondition;var E=P.value;var C=P.options;if(C.weak&&!o.weak){continue}if(O.apply(undefined,a(i))){u=E;s=true;break}else if(g&&O.apply(undefined,a(p(i)))){u=E;s=true;f=true;break}}}catch(A){w=true;b=A}finally{try{if(!l&&x["return"]){x["return"]()}}finally{if(w){throw b}}}if(!s){u=y}else if(u===false){u=h}else if(u===true){u=d}if(f){return u.apply(undefined,a(p(i)).concat([o]))}else{return u.apply(undefined,a(i).concat([o]))}});return r}());f(e.Delta.prototype,i({},o,function(){var r;for(var t=arguments.length,a=Array(t),i=0;i<t;i++){a[i]=arguments[i]}return(r=e.Delta)[n].apply(r,[this].concat(a))}));l(e.constructor,"multiDispatch:"+t,function(){f(e.constructor.prototype,i({},s,function(e,r){var t=arguments[2]===undefined?{}:arguments[2];return this.Delta[s](e,r,t)}))})}function n(t){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++){i[o-1]=arguments[o]}var u=r.get(t);var s=u.storageSymbol;var f=u.commutative;var l=true;var c=false;var v=undefined;try{for(var d=e.Delta[s][Symbol.iterator](),h;!(l=(h=d.next()).done);l=true){var y=h.value;var g=y.precondition;var m=y.value;if(g.apply(undefined,i)||f&&g.apply(undefined,a(p(i)))){return typeof m==="function"}}}catch(w){c=true;v=w}finally{try{if(!l&&d["return"]){d["return"]()}}finally{if(c){throw v}}}return false}t("composition","_binaryComposed","composedWith",{onTrue:function(r,t,n){return new e.Delta.Composed([r,t],n)},onFalse:function(e,r){throw new b(e,r)},onDefault:"onFalse"});e.Delta.composed=function s(){for(var r=arguments.length,t=Array(r),n=0;n<r;n++){t[n]=arguments[n]}var a=undefined,i=undefined;if(!(t[t.length-1]instanceof e.Delta)&&typeof t[t.length-1]!=="undefined"){i=t.slice(0,t.length-1);a=t[t.length-1]}else{i=t;a={}}return i.map(function(r){return r||new e.Delta.NoOp}).reduce(function(r,t){return e.Delta._binaryComposed(r,t,a)},new e.Delta.NoOp)};t("refinement","refines","refines",{onTrue:function(e,r){return true},onFalse:function(e,r){return false},onDefault:function(e,r,t){return e.equals(r,t)}});t("equality","equal","equals",{onTrue:function(e,r){return true},onFalse:function(e,r){return false},onDefault:function(e,r,t){if(n("refinement",e,r)){return e.refines(r,t)&&r.refines(e,t)}else{return e.type===r.type&&d(e.args,r.args)}},commutative:true});t("commutation","commute","commutesWith",{onTrue:function(e,r){return true},onFalse:function(e,r){return false},onDefault:function(e,r,t){return e.composedWith(r,t).equals(r.composedWith(e,t),t)},commutative:true});t("resolution","resolves","resolves",{onTrue:function(e,r,t){return true},onFalse:function(e,r,t){return false},onDefault:function(r,t,n,a){return e.Delta.composed(t,n,r,a).equals(e.Delta.composed(n,t,r,a),a)},arity:3,commutative:true});x(e)})},function(e,r,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var i=function m(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return m(a,r,t)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(t)}};var o=function(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof r)}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(r)e.__proto__=r};var u=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var s=t(4);var f=s.indent;var l=s.oncePer;var c=s.arraysEqual;var v=s.t;var d=n(t(9));var p=t(8);var h=p.MultipleOverloadsApplicationError;var y=p.NoOverloadsApplicationError;var g=p.MultipleOverloadsCompositionError;e.exports=l("Overloaded",function(e){d(e);e.newOperationType("Overloaded",function(e){function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}u(this,r);i(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,t);this.overloads=this.arg||[]}o(r,e);a(r,{clone:{value:function t(){var e=i(Object.getPrototypeOf(r.prototype),"clone",this).call(this);e.overloads=this.overloads.map(function(e){return e.clone()});return e}},precondition:{value:function n(e,r){var t=[];var n=this.overloads.some(function(n){var a=n.evaluatePrecondition(e,r);if(a!==true){t.push(a);return false}return true});if(!n){if(t.length===0){return new y(this,e.value)}else if(t.length===1){return t[0]}else{return new h(this,e.value,t)}}return true}},applyTo:{value:function s(e){var r=arguments[1]===undefined?{}:arguments[1];var t=[];var n=this.overloads.some(function(n){var a=n.evaluatePrecondition(e);if(a!==true){t.push(a);return false}n.applyTo(e,r);return true});if(!n){if(t.length===0){throw new y(this,e.value)}else if(t.length===1){throw t[0]}else{throw new h(this,e.value,t)}}}},toString:{value:function l(){var e=arguments[0]===undefined?{}:arguments[0];var t=i(Object.getPrototypeOf(r.prototype),"toString",this).call(this,e);var n=this.overloads.map(function(r){return r.toString(e)}).join("\n");t+="\n"+f(n,4);return t}}});return r}(e.Delta));e.newComposition(function(r,t){return r instanceof e.Delta.Overloaded||t instanceof e.Delta.Overloaded},function(r,t,n){var a=r instanceof e.Delta.Overloaded?r.overloads:[r];var i=t instanceof e.Delta.Overloaded?t.overloads:[t];var o=new e.Delta.Overloaded;var u=[];var s=true;var f=false;var l=undefined;try{for(var c=a[Symbol.iterator](),v;!(s=(v=c.next()).done);s=true){var d=v.value;var p=true;var h=false;var y=undefined;try{for(var m=i[Symbol.iterator](),w;!(p=(w=m.next()).done);p=true){var b=w.value;try{o.overloads.push(d.composedWith(b,n))}catch(x){u.push(x)}}}catch(_){h=true;y=_}finally{try{if(!p&&m["return"]){m["return"]()}}finally{if(h){throw y}}}}}catch(_){f=true;l=_}finally{try{if(!s&&c["return"]){c["return"]()}}finally{if(f){throw l}}}if(o.overloads.length===0){throw new g(r,t,u)}return o});e.newEquality(v("Overloaded","Overloaded"),function(e,r,t){return c(e.overloads,r.overloads,function(e,r){return e.equals(r,t)})});e.newCommutation(v("Overloaded","Overloaded"),function(e,r,t){for(var n=0;n<e.overloads.length;++n){if(!e.overloads[n].commutesWith(r.overloads[n],t)){return false}}return true})})},function(e,r,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var t=[];for(var n=e[Symbol.iterator](),a;!(a=n.next()).done;){t.push(a.value);if(r&&t.length===r)break}return t}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var i=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var o=function m(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return m(a,r,t)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(t)}};var u=function(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof r)}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(r)e.__proto__=r};var s=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var f=t(4);var l=f.extend;var c=f.indent;var v=f.t;var d=f.oncePer;var p=f.mapEqual;var h=n(t(7));var y=t(6).wt;var g=n(t(19));e.exports=d("Modify",function(e){g(e);e.newOperationType("Modify",function(e){function r(){var e=this;for(var t=arguments.length,n=Array(t),a=0;a<t;a++){n[a]=arguments[a]}s(this,r);o(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,n);this.subDeltas=new Map(this.arg&&Object.keys(this.arg).map(function(r){return[r,e.arg[r]]}))}u(r,e);i(r,{clone:{value:function t(){var e=o(Object.getPrototypeOf(r.prototype),"clone",this).call(this);var t=true;var n=false;var i=undefined;try{for(var u=this.subDeltas[Symbol.iterator](),s;!(t=(s=u.next()).done);t=true){var f=a(s.value,2);var l=f[0];var c=f[1];e.subDeltas.set(l,c.clone())}}catch(v){n=true;i=v}finally{try{if(!t&&u["return"]){u["return"]()}}finally{if(n){throw i}}}return e}},precondition:{value:function n(e){var r=arguments[1]===undefined?{}:arguments[1];if(!(e.value instanceof Object)){return false}var t=true;var n=false;var i=undefined;try{for(var o=this.subDeltas[Symbol.iterator](),u;!(t=(u=o.next()).done);t=true){var s=a(u.value,2);var f=s[0];var c=s[1];if(!r.restrictToProperty||r.restrictToProperty===f){var v=c.evaluatePrecondition(y(e.value,f),l({},r,{restrictToProperty:null}));if(v!==true){return v}}}}catch(d){n=true;i=d}finally{try{if(!t&&o["return"]){o["return"]()}}finally{if(n){throw i}}}return true}},applyTo:{value:function f(e){var r=arguments[1]===undefined?{}:arguments[1];var t=true;var n=false;var i=undefined;try{for(var o=this.subDeltas[Symbol.iterator](),u;!(t=(u=o.next()).done);t=true){var s=a(u.value,2);var f=s[0];var c=s[1];if(!r.restrictToProperty||r.restrictToProperty===f){c.applyTo(y(e.value,f),l({},r,{restrictToProperty:null}))}}}catch(v){n=true;i=v}finally{try{if(!t&&o["return"]){o["return"]()}}finally{if(n){throw i}}}}},toString:{value:function v(){var e=arguments[0]===undefined?{}:arguments[0];var t=o(Object.getPrototypeOf(r.prototype),"toString",this).call(this,e);if(this.subDeltas.size>0){var n=this.subDeltas.entries().map(function(r){var t=a(r,2);var n=t[0];var i=t[1];return i.toString(l({},e,{targetProp:n}))}).join("\n");t+="\n"+c(n,4)}return t}}});return r}(e.Delta),function(r){function t(){s(this,t);if(r!=null){r.apply(this,arguments)}}u(t,r);i(t,{processProxyArguments:{value:function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++){r[t]=arguments[t]}var n={};do{if(r.length===0){throw new Error("The argument list for this Modify.Proxy method is insufficient.")}var a=r.shift();if(typeof a==="string"){n.path=a}else{l(n,a)}}while(!n.path);return{options:n,args:r}}},addOperation:{value:function a(r,t){var n=t.path;if(!n.prop){throw new Error("Operations on a Modify.Proxy need to have a non-empty path.")}var a;if(n.rest){var i=l({},t,{path:n.rest});var o=this.addChildProxy(n.prop,new e.Delta.Modify);a=o.addOperation(r,i)}else{a=this.addChildProxy(n.prop,r)}return a}},delta:{value:function f(){var e=o(Object.getPrototypeOf(t.prototype),"delta",this).call(this);var r=true;var n=false;var a=undefined;try{for(var i=this.childKeys()[Symbol.iterator](),u;!(r=(u=i.next()).done);r=true){var s=u.value;e.subDeltas.set(s,this.childDelta(s))}}catch(f){n=true;a=f}finally{try{if(!r&&i["return"]){i["return"]()}}finally{if(n){throw a}}}return e}}});return t}(e.ContainerProxy));e.newComposition(v("Modify","Modify"),function(r,t,n){var a=r.clone();var i=true;var o=false;var u=undefined;try{for(var s=t.subDeltas.keys()[Symbol.iterator](),f;!(i=(f=s.next()).done);i=true){var l=f.value;a.subDeltas.set(l,e.Delta.composed(a.subDeltas.get(l),t.subDeltas.get(l),n))}}catch(c){o=true;u=c}finally{try{if(!i&&s["return"]){s["return"]()}}finally{if(o){throw u}}}return a});e.newEquality(v("Modify","Modify"),function(e,r){return p(e.subDeltas,r.subDeltas,function(e,r){return e.equals(r)})});e.newCommutation(v("Modify","Modify"),function(e,r,t){var n=true;var a=false;var i=undefined;try{for(var o=e.subDeltas.keys()[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){var s=u.value;if(r.subDeltas.has(s)){var f=e.subDeltas.get(s);var l=r.subDeltas.get(s);if(!f.commutesWith(l,t)){return false}}}}catch(c){a=true;i=c}finally{try{if(!n&&o["return"]){o["return"]()}}finally{if(a){throw i}}}return true})})},function(e,r,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var i=function(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof r)}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(r)e.__proto__=r};var o=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var u=t(4);var s=u.isUndefined;var f=u.isDefined;var l=u.t;var c=u.define_d;var v=u.oncePer;var d=t(6);var p=d.WritableTarget;var h=d.ReadableTarget;var y=d.rt;var g=d.wt;var m=n(t(9));var w=n(t(11));e.exports=v("basic operations",function(e){m(e);w(e);e.newOperationType("NoOp",function(e){function r(){o(this,r);if(e!=null){e.apply(this,arguments)}}i(r,e);return r}(e.Delta));e.newOperationType("Add",function(e){function r(){o(this,r);if(e!=null){e.apply(this,arguments)}}i(r,e);a(r,{precondition:{value:function t(e,r){var t=r.weak;return e instanceof p&&(t||s(e.value))}},applyTo:{value:function n(e){e.value=this.arg}}});return r}(e.Delta));e.newOperationType("Remove",function(e){function r(){o(this,r);if(e!=null){e.apply(this,arguments)}}i(r,e);a(r,{precondition:{value:function t(e,r){var t=r.weak;return e instanceof p&&(t||f(e.value))}},applyTo:{value:function n(e){e["delete"]()}}});return r}(e.Delta));e.newOperationType("Forbid",function(e){function r(){o(this,r);if(e!=null){e.apply(this,arguments)}}i(r,e);a(r,{precondition:{value:function t(e,r){var t=r.weak;return t||s(e.value)}}});return r}(e.Delta));e.newOperationType("Replace",function(e){function r(){o(this,r);if(e!=null){e.apply(this,arguments)}}i(r,e);a(r,{precondition:{value:function t(e,r){var t=r.weak;return e instanceof p&&(t||f(e.value))}},applyTo:{value:function n(e){e.value=this.arg}}});return r}(e.Delta));e.newOperationType("Update",function(e){
function r(){o(this,r);if(e!=null){e.apply(this,arguments)}}i(r,e);a(r,{precondition:{value:function t(e,r){var t=r.weak;return e instanceof p&&(t||f(e.value))}},applyTo:{value:function n(e){e.value=this.arg(e.value)}}});return r}(e.Delta));e.newComposition(function(r,t){return r instanceof e.Delta.NoOp},function(e,r){return r.clone()});e.newComposition(function(r,t){return t instanceof e.Delta.NoOp},function(e,r){return e.clone()});var r=c(e);e.newComposition(l("Add","Modify"),r("Add",function(e){var r=e.d2;var t=e.p1;return r.appliedTo(t)}));e.newComposition(l("Modify","Add"),false);e.newComposition(function(e,r){return r.type==="Add"},r("Add",function(e){var r=e.p2;return r}),{weak:true});e.newComposition(l("Add","Add"),false);e.newComposition(l("Modify","Remove"),r("Remove"));e.newComposition(l("Add","Remove"),r("Forbid"));e.newComposition(l("Remove","Modify"),false);e.newComposition(l("Remove","Add"),r("Replace",function(e){var r=e.p2;return r}));e.newComposition(function(e,r){return r.type==="Remove"},r("Remove"),{weak:true});e.newComposition(l("Remove","Remove"),false);e.newComposition(function(e,r){return e.type==="Forbid"},function(e,r){return r.clone()},{weak:true});e.newComposition(function(e,r){return r.type==="Forbid"},function(e,r){return e.clone()},{weak:true});e.newComposition(l("Modify","Forbid"),false);e.newComposition(l("Add","Forbid"),false);e.newComposition(l("Remove","Forbid"),r("Remove"));e.newComposition(l("Forbid","Modify"),false);e.newComposition(l("Forbid","Add"),r("Add",function(e){var r=e.p2;return r}));e.newComposition(l("Forbid","Remove"),false);e.newComposition(l("Forbid","Forbid"),r("Forbid"));e.newComposition(l("Modify","Replace"),r("Replace",function(e){var r=e.p2;return r}));e.newComposition(l("Add","Replace"),r("Add",function(e){var r=e.p2;return r}));e.newComposition(l("Remove","Replace"),false);e.newComposition(l("Forbid","Replace"),false);e.newComposition(l("Replace","Modify"),r("Replace",function(e){var r=e.d2;var t=e.p1;return r.appliedTo(t)}));e.newComposition(l("Replace","Add"),false);e.newComposition(l("Replace","Remove"),r("Remove"));e.newComposition(l("Replace","Forbid"),false);e.newComposition(l("Replace","Replace"),r("Replace",function(e){var r=e.p2;return r}));e.newComposition(l("Modify","Update"),true);e.newComposition(l("Add","Update"),r("Add",function(e){var r=e.d2;var t=e.p1;return r.appliedTo(t)}));e.newComposition(l("Remove","Update"),true);e.newComposition(l("Forbid","Update"),true);e.newComposition(l("Replace","Update"),r("Replace",function(e){var r=e.d2;var t=e.p1;return r.appliedTo(t)}));e.newComposition(l("Update","Modify"),true);e.newComposition(l("Update","Add"),true);e.newComposition(l("Update","Remove"),r("Remove"));e.newComposition(l("Update","Forbid"),true);e.newComposition(l("Update","Replace"),r("Replace",function(e){var r=e.p2;return r}));e.newComposition(l("Update","Update"),r("Update",function(e){var r=e.p1;var t=e.p2;return function(e){return t(r(e))}}))})},function(e,r,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else{return Array.from(e)}};var i=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var o=function b(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return b(a,r,t)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(t)}};var u=function(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof r)}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(r)e.__proto__=r};var s=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var f=t(4);var l=f.isDefined;var c=f.t;var v=f.define_d;var d=f.oncePer;var p=f.arraysEqual;var h=f.arraysHaveSameElements;var y=f.customIndexOf;var g=n(t(11));var m=n(t(12));var w=n(t(24));e.exports=d("PutIntoArray",function(e){g(e);m(e);w(e);e.newOperationType("PutIntoArray",function(e){function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}s(this,r);o(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,t);this.values=this.arg?Array.isArray(this.arg)?this.arg:[this.arg]:[]}u(r,e);i(r,{clone:{value:function t(){var e=o(Object.getPrototypeOf(r.prototype),"clone",this).call(this);e.values=[].concat(a(this.values));return e}},precondition:{value:function n(e,r){var t=r.weak;return t||l(e.value)&&Array.isArray(e.value)}},applyTo:{value:function f(e){var r=e.value;var t=true;var n=false;var a=undefined;try{for(var i=this.values[Symbol.iterator](),o;!(t=(o=i.next()).done);t=true){var u=o.value;var s=u.method;var f=u.value;switch(s){case"prepend":{r.unshift(f)}break;case"insert":{var l=Math.floor(Math.random()*(r.length+1));r.splice(l,0,f)}break;case"append":{r.push(f)}break}}}catch(c){n=true;a=c}finally{try{if(!t&&i["return"]){i["return"]()}}finally{if(n){throw a}}}}},methods:{get:function(){return[]}}});return r}(e.Delta));e.newProxyMethod("prepend",function(r){return new e.Delta.PutIntoArray({method:"prepend",value:r})});e.newProxyMethod("insert",function(r){return new e.Delta.PutIntoArray({method:"insert",value:r})});e.newProxyMethod("append",function(r){return new e.Delta.PutIntoArray({method:"append",value:r})});var r=v(e);e.newComposition(c("Modify","PutIntoArray"),false);e.newComposition(c("Add","PutIntoArray"),r("Add",function(e){var r=e.d2;var t=e.p1;return r.appliedTo(t)}));e.newComposition(c("Remove","PutIntoArray"),false);e.newComposition(c("Forbid","PutIntoArray"),false);e.newComposition(c("Replace","PutIntoArray"),r("Replace",function(e){var r=e.d2;var t=e.p1;return r.appliedTo(t)}));e.newComposition(c("Update","PutIntoArray"),true);e.newComposition(c("PutIntoArray","Modify"),false);e.newComposition(c("PutIntoArray","Add"),false);e.newComposition(c("PutIntoArray","Remove"),r("Remove"));e.newComposition(c("PutIntoArray","Forbid"),false);e.newComposition(c("PutIntoArray","Replace"),r("Replace",function(e){var r=e.p2;return r}));e.newComposition(c("PutIntoArray","Update"),true);e.newComposition(c("PutIntoArray","PutIntoArray"),function(r,t){return new e.Delta.PutIntoArray([].concat(a(r.values),a(t.values)))});e.newRefinement(c("PutIntoArray","PutIntoArray"),function(e,r){var t=function(e,r){return e.method===r.method&&e.value===r.value};if(!h(e.values,r.values,t)){return false}if(!p(e.values.filter(function(e){return e.method==="append"}),r.values.filter(function(e){return e.method==="append"}),t)){return false}if(!p(e.values.filter(function(e){return e.method==="prepend"}),r.values.filter(function(e){return e.method==="prepend"}),t)){return false}var n=[];for(var a=0;a<e.values.length;++a){if(e.values[a].method==="insert"){var i=y(r.values,e.values[a],t);var o=[].concat(n);for(var u=0;u<=i;++u){var s=y(o,r.values[u],t);if(s>-1){o.splice(s,1)}}if(o.length>0){return false}}else{n.push(e.values[a])}}return true});e.newCommutation(c("PutIntoArray","PutIntoArray"),function(e,r,t){return true},{weak:true})})},function(e,r,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else{return Array.from(e)}};var i=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var o=function b(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return b(a,r,t)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(t)}};var u=function(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof r)}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(r)e.__proto__=r};var s=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var f=t(4);var l=f.isUndefined;var c=f.isDefined;var v=f.t;var d=f.define_d;var p=f.oncePer;var h=f.arraysEqual;var y=t(6).WritableTarget;var g=n(t(11));var m=n(t(12));var w=n(t(24));e.exports=p("PutIntoFunction",function(e){g(e);m(e);w(e);var r=Symbol("DeltaJs:function-parts");e.newOperationType("PutIntoFunction",function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}s(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this.values=this.arg?Array.isArray(this.arg)?this.arg:[this.arg]:[]}u(t,e);i(t,{clone:{value:function n(){var e=o(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.values=[].concat(a(this.values));return e}},precondition:{value:function f(e){return c(e.value)&&typeof e.value==="function"&&(c(e.value[r])||e instanceof y)}},applyTo:{value:function v(e){if(l(e.value[r])){var t=e.value;var n=function(e){var r=function t(r){return e.apply(this,arguments)};r.toString=function(){return e.toString()};return r}(function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++){t[a]=arguments[a]}var i=undefined;var o=true;var u=false;var s=undefined;try{for(var f=n[r][Symbol.iterator](),l;!(o=(l=f.next()).done);o=true){var c=l.value;i=c.apply(this,t)}}catch(v){u=true;s=v}finally{try{if(!o&&f["return"]){f["return"]()}}finally{if(u){throw s}}}return i});n[r]=[function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}t.apply(this,r)}];e.value=n}var a=e.value[r];var i=true;var o=false;var u=undefined;try{for(var s=this.values[Symbol.iterator](),f;!(i=(f=s.next()).done);i=true){var c=f.value;var v=c.method;var d=c.value;switch(v){case"prepend":{a.unshift(d)}break;case"insert":{var p=Math.floor(Math.random()*(a.length+1));a.splice(p,0,d)}break;case"append":{a.push(d)}break}}}catch(h){o=true;u=h}finally{try{if(!i&&s["return"]){s["return"]()}}finally{if(o){throw u}}}}},methods:{get:function(){return[]}}});return t}(e.Delta));e.newProxyMethod("prepend",function(r){return new e.Delta.PutIntoFunction({method:"prepend",value:r})});e.newProxyMethod("insert",function(r){return new e.Delta.PutIntoFunction({method:"insert",value:r})});e.newProxyMethod("append",function(r){return new e.Delta.PutIntoFunction({method:"append",value:r})});var t=d(e);e.newComposition(v("Modify","PutIntoFunction"),false);e.newComposition(v("Add","PutIntoFunction"),t("Add",function(e){var r=e.d2;var t=e.p1;return r.appliedTo(t)}));e.newComposition(v("Remove","PutIntoFunction"),false);e.newComposition(v("Forbid","PutIntoFunction"),false);e.newComposition(v("Replace","PutIntoFunction"),t("Replace",function(e){var r=e.d2;var t=e.p1;return r.appliedTo(t)}));e.newComposition(v("Update","PutIntoFunction"),true);e.newComposition(v("PutIntoFunction","Modify"),false);e.newComposition(v("PutIntoFunction","Add"),false);e.newComposition(v("PutIntoFunction","Remove"),t("Remove"));e.newComposition(v("PutIntoFunction","Forbid"),false);e.newComposition(v("PutIntoFunction","Replace"),t("Replace",function(e){var r=e.p2;return r}));e.newComposition(v("PutIntoFunction","Update"),true);e.newComposition(v("PutIntoFunction","PutIntoFunction"),function(r,t){return new e.Delta.PutIntoFunction([].concat(a(r.values),a(t.values)))});e.newEquality(v("PutIntoFunction","PutIntoFunction"),function(e,r){return h(e.values,r.values,function(e,r){return e.method===r.method&&e.value&&r.value})});e.newCommutation(v("PutIntoFunction","PutIntoFunction"),function(e,r){return true},{weak:true})})},function(e,r,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var t=[];for(var n=e[Symbol.iterator](),a;!(a=n.next()).done;){t.push(a.value);if(r&&t.length===r)break}return t}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var i=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else{return Array.from(e)}};var o=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var u=function O(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return O(a,r,t)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(t)}};var s=function(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof r)}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(r)e.__proto__=r};var f=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var l=n(t(22));var c=t(4);var v=c.extend;var d=c.isDefined;var p=c.indent;var h=c.oncePer;var y=c.s;var g=c.t;var m=n(t(7));var w=n(t(11));var b=n(t(19));var x=t(8);var _=x.ApplicationOrderCycle;var P=x.UnresolvedDeltaConflict;e.exports=h("DeltaModel",function(e){b(e);e.newOperationType("DeltaModel",function(e){function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}f(this,r);u(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,t);this.graph=new l}s(r,e);o(r,{clone:{value:function t(){var e=u(Object.getPrototypeOf(r.prototype),"clone",this).call(this);e.graph=this.graph.clone(function(e){return e.clone()});return e}},_assertNoUnresolvedConflicts:{value:function n(){var e=true;var r=false;var t=undefined;try{for(var n=this.conflicts()[Symbol.iterator](),a;!(e=(a=n.next()).done);e=true){var i=a.value;if(i.conflictResolvingDeltas.size===0){throw new P(i.conflictingDeltas)}}}catch(o){r=true;t=o}finally{try{if(!e&&n["return"]){n["return"]()}}finally{if(r){throw t}}}}},precondition:{value:function c(e,r){var t=true;var n=false;var o=undefined;try{for(var u=this.graph.vertices()[Symbol.iterator](),s;!(t=(s=u.next()).done);t=true){var f=a(s.value,2);var l=f[0];var c=f[1];if([].concat(i(this.graph.verticesTo(l))).length===0){var v=c.evaluatePrecondition(e,r);if(v!==true){return v}}}}catch(d){n=true;o=d}finally{try{if(!t&&u["return"]){u["return"]()}}finally{if(n){throw o}}}return true}},applyTo:{value:function d(e){var r=arguments[1]===undefined?{}:arguments[1];this._assertNoUnresolvedConflicts();var t=true;var n=false;var i=undefined;try{for(var o=this.graph.vertices_topologically()[Symbol.iterator](),u;!(t=(u=o.next()).done);t=true){var s=a(u.value,2);var f=s[1];f.applyTo(e,v({},r,{weak:true}))}}catch(l){n=true;i=l}finally{try{if(!t&&o["return"]){o["return"]()}}finally{if(n){throw i}}}}},toString:{value:function h(){var e=arguments[0]===undefined?{}:arguments[0];var t=u(Object.getPrototypeOf(r.prototype),"toString",this).call(this,e);if(this.graph.vertexCount()>0){var n="";var i=true;var o=false;var s=undefined;try{for(var f=this.graph.vertices_topologically()[Symbol.iterator](),l;!(i=(l=f.next()).done);i=true){var c=a(l.value,2);var v=c[0];var d=c[1];n+="["+v+"] "+d.toString(e)+"\n"}}catch(h){o=true;s=h}finally{try{if(!i&&f["return"]){f["return"]()}}finally{if(o){throw s}}}t+="\n"+p(n,4)}return t}},conflicts:{value:function g(){var e=this.graph.clone();var r="(sink)";while(e.hasVertex(r)){r=""+r+"'"}e.addNewVertex(r,null);var t=true;var n=false;var o=undefined;try{for(var u=e.vertices()[Symbol.iterator](),s;!(t=(s=u.next()).done);t=true){var f=a(s.value,1);var l=f[0];e.setVertex(l,null);if(l!==r){e.ensureEdge(l,r)}}}catch(c){n=true;o=c}finally{try{if(!t&&u["return"]){u["return"]()}}finally{if(n){throw o}}}e=e.transitiveReduction();var v=new Map;var d=function(r){if(e.vertexValue(r)){return}var t=new Map;var n=true;var o=false;var u=undefined;try{for(var s=e.verticesTo(r)[Symbol.iterator](),f;!(n=(f=s.next()).done);n=true){var l=a(f.value,1);var c=l[0];d(c);var p=new Set([c]);var h=true;var g=false;var m=undefined;try{for(var w=e.vertexValue(c).values()[Symbol.iterator](),b;!(h=(b=w.next()).done);h=true){var x=b.value;var _=true;var P=false;var O=undefined;try{for(var E=x.values()[Symbol.iterator](),C;!(_=(C=E.next()).done);_=true){var A=C.value;p.add(A)}}catch(k){P=true;O=k}finally{try{if(!_&&E["return"]){E["return"]()}}finally{if(P){throw O}}}}}catch(k){g=true;m=k}finally{try{if(!h&&w["return"]){w["return"]()}}finally{if(g){throw m}}}t.set(c,p)}}catch(k){o=true;u=k}finally{try{if(!n&&s["return"]){s["return"]()}}finally{if(o){throw u}}}e.setVertex(r,t);var D=true;var S=false;var T=undefined;try{for(var j=t.keys()[Symbol.iterator](),M;!(D=(M=j.next()).done);D=true){var F=M.value;var R=true;var V=false;var I=undefined;try{for(var N=t.keys()[Symbol.iterator](),U;!(R=(U=N.next()).done);R=true){var q=U.value;if(F<q){var W=new Set(t.get(F));var z=new Set(t.get(q));var H=true;var J=false;var Y=undefined;try{for(var B=W[Symbol.iterator](),K;!(H=(K=B.next()).done);H=true){var L=K.value;var $=true;var G=false;var Q=undefined;try{for(var X=z[Symbol.iterator](),Z;!($=(Z=X.next()).done);$=true){var ee=Z.value;if(L===ee){W["delete"](L);z["delete"](ee)}}}catch(k){G=true;Q=k}finally{try{if(!$&&X["return"]){X["return"]()}}finally{if(G){throw Q}}}}}catch(k){J=true;Y=k}finally{try{if(!H&&B["return"]){B["return"]()}}finally{if(J){throw Y}}}var re=true;var te=false;var ne=undefined;try{for(var ae=W[Symbol.iterator](),ie;!(re=(ie=ae.next()).done);re=true){var L=ie.value;var oe=true;var ue=false;var se=undefined;try{for(var fe=z[Symbol.iterator](),le;!(oe=(le=fe.next()).done);oe=true){var ee=le.value;y.apply(undefined,[v].concat(i([L,ee].sort()))).add(r)}}catch(k){ue=true;se=k}finally{try{if(!oe&&fe["return"]){fe["return"]()}}finally{if(ue){throw se}}}}}catch(k){te=true;ne=k}finally{try{if(!re&&ae["return"]){ae["return"]()}}finally{if(te){throw ne}}}}}}catch(k){V=true;I=k}finally{try{if(!R&&N["return"]){N["return"]()}}finally{if(V){throw I}}}}}catch(k){S=true;T=k}finally{try{if(!D&&j["return"]){j["return"]()}}finally{if(S){throw T}}}};d(r);var p=new Set;var h=true;var g=false;var m=undefined;try{for(var w=v.keys()[Symbol.iterator](),b;!(h=(b=w.next()).done);h=true){var x=b.value;var _=true;var P=false;var O=undefined;try{for(var E=v.get(x).keys()[Symbol.iterator](),C;!(_=(C=E.next()).done);_=true){var A=C.value;var k=this.graph.vertexValue(x);var D=this.graph.vertexValue(A);if(!k.commutesWith(D,{weak:true})){var S={conflictingDeltas:new Set([x,A]),conflictResolvingDeltas:new Set};var T=true;var j=false;var M=undefined;try{for(var F=v.get(x).get(A)[Symbol.iterator](),R;!(T=(R=F.next()).done);T=true){var V=R.value;var I=true;var N=false;var U=undefined;try{for(var q=[[V]].concat(i(e.verticesWithPathFrom(V)))[Symbol.iterator](),W;!(I=(W=q.next()).done);I=true){var z=a(W.value,1);var H=z[0];var J=this.graph.vertexValue(H);if(H!==r&&J.resolves(k,D,{weak:true})){S.conflictResolvingDeltas.add(H)}}}catch(c){N=true;U=c}finally{try{if(!I&&q["return"]){q["return"]()}}finally{if(N){throw U}}}}}catch(c){j=true;M=c}finally{try{if(!T&&F["return"]){F["return"]()}}finally{if(j){throw M}}}p.add(S)}}}catch(c){P=true;O=c}finally{try{if(!_&&E["return"]){E["return"]()}}finally{if(P){throw O}}}}}catch(c){g=true;m=c}finally{try{if(!h&&w["return"]){w["return"]()}}finally{if(g){throw m}}}return p}}});return r}(e.Delta),function(r){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}f(this,t);u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this._childOptions=new Map;this._childApplicationConditions=new Map}s(t,r);o(t,{processProxyArguments:{value:function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++){r[t]=arguments[t]}var n={};do{if(r.length===0){throw new Error("The argument list for this Modify.DeltaModel method is insufficient.")}var a=r.shift();if(typeof a==="string"){if(!n.name){n.name=a}else{n.path=a}}else{v(n,a)}}while(!n.path||!n.name);return{options:n,args:r}}},addOperation:{value:function a(r,t){var n=t.path;var a=t.name;var i=t.feature;if(!this._childApplicationConditions.has(a)){var o=undefined;if(i){o=e.newFeature(a,t)}else{o=e.newFeature("delta__"+a,v({hidden:true},t))}if(d(t.resolves)){o["if"](t.resolves);t=v({},t,{feature:false})}if(d(t.requires)){o.selects(t.requires)}if(i||o.conditional){r.applicationCondition=o}this._childApplicationConditions.set(a,o)}var u;if(n.prop){var s=v({},t,{name:undefined});var f=this.addChildProxy(a,new e.Delta.Modify);u=f.addOperation(r,s)}else{u=this.addChildProxy(a,r)}if(!this._childOptions.has(a)){this._childOptions.set(a,t)}return u}},delta:{value:function l(){var e=u(Object.getPrototypeOf(t.prototype),"delta",this).call(this);e.graph.clear();var r=true;var n=false;var a=undefined;try{for(var o=this.childKeys()[Symbol.iterator](),s;!(r=(s=o.next()).done);r=true){var f=s.value;var c=this._childOptions.get(f);var l=this.childDelta(f);e.graph.addVertex(f,l);var v=true;var d=false;var p=undefined;try{for(var h=[].concat(i(c.resolves||[]),i(c.after||[]),i(c.requires||[]))[Symbol.iterator](),y;!(v=(y=h.next()).done);v=true){var g=y.value;e.graph.createEdge(g,f);if(e.graph.hasCycle()){e.graph.removeExistingEdge(g,f);throw new _(g,f)}}}catch(m){d=true;p=m}finally{try{if(!v&&h["return"]){h["return"]()}}finally{if(d){throw p}}}if(c.feature||this._childApplicationConditions.get(f).conditional){l.applicationCondition=this._childApplicationConditions.get(f)}}}catch(m){n=true;a=m}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(n){throw a}}}return e}}});return t}(e.ContainerProxy));e.newComposition(function(r,t){return r instanceof e.Delta.DeltaModel||t instanceof e.Delta.DeltaModel},true);e.newEquality(g("DeltaModel","DeltaModel"),function(e,r){var t=e.graph.transitiveReduction();var n=r.graph.transitiveReduction();return t.equals(n,function(e,r){return e.equals(r)})})})},function(e,r,t){"use strict";var n=function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var t=[];for(var n=e[Symbol.iterator](),a;!(a=n.next()).done;){t.push(a.value);if(r&&t.length===r)break}return t}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var a=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var i=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var o=t(4);var u=o.extend;var s=o.a;var f=o.assert;var l=o.isUndefined;var c=o.oncePer;var v=t(8).ConstraintFailure;e.exports=c("features",function(e){c(e.constructor,"features",function(){u(e.constructor.prototype,{newFeature:function r(e){var r=arguments[1]===undefined?{}:arguments[1];f(l(this.features[e]),"A feature with the name '"+e+"' already exists.");return this.features[e]=new this.Feature(e,r)}})});function r(r){r=Array.isArray(r)?r:[r];r=r.map(function(r){return r instanceof e.Feature?r.name:r});return r}var t=new Map;var o=new Map;function d(e){var n=arguments[1]===undefined?[]:arguments[1];w=true;if(n===true){o.set(e,true)}else if(n===false){}else if(t.get(e)!==true){s(t,e).push(r(n))}}function p(e,t){var n=true;var a=false;var i=undefined;try{for(var o=r(t)[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){var s=u.value;d(s,e)}}catch(f){a=true;i=f}finally{try{if(!n&&o["return"]){o["return"]()}}finally{if(a){throw i}}}}var h=new Map;var y=new Map;function g(e){var t=arguments[1]===undefined?[]:arguments[1];w=true;if(t===false){y.set(e,false)}else if(t===true){}else if(h.get(e)!==false){s(h,e).push(r(t))}}function m(e,t){var n=true;var a=false;var i=undefined;try{for(var o=r(t)[Symbol.iterator](),u;!(n=(u=o.next()).done);n=true){var s=u.value;g(s,e)}}catch(f){a=true;i=f}finally{try{if(!n&&o["return"]){o["return"]()}}finally{if(a){throw i}}}}var w=false;function b(){if(!w){return}w=false;var r;do{r=false;var n=true;var a=false;var i=undefined;try{for(var u=Object.keys(e.features)[Symbol.iterator](),s;!(n=(s=u.next()).done);n=true){var f=s.value;if(!o.get(f)){if(o.has(f)){o.set(f,false)}if((t.get(f)||[]).some(function(e){return e.every(function(e){return o.get(e)})})){o.set(f,true);r=true}}}}catch(l){a=true;i=l}finally{try{if(!n&&u["return"]){u["return"]()}}finally{if(a){throw i}}}}while(r);var c=true;var v=false;var d=undefined;try{for(var p=Object.keys(e.features)[Symbol.iterator](),g;!(c=(g=p.next()).done);c=true){var f=g.value;y.set(f,(h.get(f)||[]).every(function(e){return e.some(function(e){return o.get(e)})}))}}catch(l){v=true;d=l}finally{try{if(!c&&p["return"]){p["return"]()}}finally{if(v){throw d}}}}e.Feature=function(){function e(r){var t=arguments[1]===undefined?{}:arguments[1];i(this,e);this.name=r;this.options=t;var n=true;var a=false;var o=undefined;try{for(var u=Object.keys(t)[Symbol.iterator](),s;!(n=(s=u.next()).done);n=true){var f=s.value;this.addOption(f,t[f])}}catch(l){a=true;o=l}finally{try{if(!n&&u["return"]){u["return"]()}}finally{if(a){throw o}}}}a(e,{selected:{get:function(){b();if(o.get(this.name)&&!y.get(this.name)){throw new v(this)}return o.get(this.name)}},condition:{get:function(){return t.get(this.name)}},conditional:{get:function(){return s(t,this.name).length>0}},restricted:{get:function(){return s(h,this.name).length>0}},select:{value:function r(){this["if"](true)}}});return e}();var x=[["if",[d]],["onlyIf",[g]],["selects",[p]],["requiredBy",[m]],["iff",[d,g]]];e.Feature.prototype.addOption=function(e,r){var t=true;var a=false;var i=undefined;try{for(var o=x[Symbol.iterator](),u;!(t=(u=o.next()).done);t=true){var s=n(u.value,2);var f=s[0];var l=s[1];if(e===f){var c=true;var v=false;var d=undefined;try{for(var p=l[Symbol.iterator](),h;!(c=(h=p.next()).done);c=true){var y=h.value;y(this.name,r)}}catch(g){v=true;d=g}finally{try{if(!c&&p["return"]){p["return"]()}}finally{if(v){throw d}}}}}}catch(g){a=true;i=g}finally{try{if(!t&&o["return"]){o["return"]()}}finally{if(a){throw i}}}};var _=true;var P=false;var O=undefined;try{for(var E=x[Symbol.iterator](),C;!(_=(C=E.next()).done);_=true){var A;(function(){A=n(C.value,1);var r=A[0];e.Feature.prototype[r]=function(e){this.addOption(r,e)}})()}}catch(k){P=true;O=k}finally{try{if(!_&&E["return"]){E["return"]()}}finally{if(P){throw O}}}e.features={}})},function(e,r,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})};var i=t(4);var o=i.extend;var u=i.oncePer;var s=n(t(15));e.exports=u("variation points",function(e){u(e.constructor,"variation points",function(){s(e);o(e.constructor.prototype,{vp:function r(e,t){var n=a({},e,t);this._deltaModelProxy.delta().applyTo(n,{restrictToProperty:e});return n[e]},"do":function t(){var e;for(var r=arguments.length,t=Array(r),n=0;n<r;n++){t[n]=arguments[n]}return(e=this._deltaModelProxy)["do"].apply(e,[{feature:true}].concat(t))}})});e._deltaModelProxy=(new e.Delta.DeltaModel)["do"]()})},function(e,r,t){"use strict";var n=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else{return Array.from(e)}};var a=t(4);var i=a.extend;var o=a.isUndefined;var u=a.oncePer;e.exports=u("application conditions",function(e){u(e.constructor,"application conditions",function(){i(e.constructor.prototype,{select:function r(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++){r[t]=arguments[t]}var a=true;var i=false;var o=undefined;try{for(var u=r[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var f=s.value;if(Array.isArray(f)){this.select.apply(this,n(f))}else{this.features[f].select()}}}catch(l){i=true;o=l}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}}})});i(e.Delta.prototype,Object.defineProperties({},{applicationCondition:{get:function(){return this._applicationCondition},set:function(e){this._applicationCondition=e},configurable:true,enumerable:true},selected:{get:function(){return o(this.applicationCondition)||this.applicationCondition.selected},configurable:true,enumerable:true}}))})},function(e,r,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else{return Array.from(e)}};var i=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var o=function w(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return w(a,r,t)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(t)}};var u=function(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof r)}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(r)e.__proto__=r};var s=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var f=n(t(22));var l=t(4);var c=l.extend;var v=l.a;var d=l.isUndefined;var p=l.oncePer;var h=n(t(7));var y=n(t(10));var g=n(t(24));var m=t(8).MultipleActiveProxiesError;e.exports=p("ContainerProxy",function(e){g(e);e.ContainerProxy=function(r){function t(){var e=arguments[0]===undefined?{}:arguments[0];s(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);this._doArgs=[];this._original=this;this._children=new Map}u(t,r);i(t,{deactivate:{value:function n(){var e=true;var r=false;var n=undefined;try{for(var a=this._children.keys()[Symbol.iterator](),i;!(e=(i=a.next()).done);e=true){var u=i.value;this.childProxy(u).deactivate()}}catch(s){r=true;n=s}finally{try{if(!e&&a["return"]){a["return"]()}}finally{if(r){throw n}}}o(Object.getPrototypeOf(t.prototype),"deactivate",this).call(this)}},addChildProxy:{value:function f(r,t){var n=this.childProxy(r);var a=t.constructor.Proxy||e.Proxy;var i=new a({delta:t,parent:this});if(n instanceof e.Delta.Modify.Proxy&&i instanceof e.Delta.Modify.Proxy){return n}if(n){n.deactivate()}this._children.get(r).push(i);return i}},childKeys:{value:function l(){return[].concat(a(this._children.keys()))}},childProxies:{value:function c(e){return v(this._children,e)}},childProxy:{value:function p(e){if(!this._children.has(e)){this._children.set(e,[])}return this._children.get(e)[this._children.get(e).length-1]}},childDelta:{value:function g(r){var t;var n=(t=e.Delta).composed.apply(t,a(this.childProxies(r).map(function(e){return e.delta()})));return n}},"do":{value:function w(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++){r[t]=arguments[t]}if(!this.active){throw new m}var n=Object.create(this);n._doArgs=[].concat(a(this._doArgs),r);n._original=this._original;return n}},_do:{value:function b(r,t){if(!this.active){throw new m}var n=this.processProxyArguments.apply(this,a(this._doArgs).concat(a(t)));var i=n.options;var o=n.args;if(typeof i.path==="string"){i.path=new h(i.path)}var u=e.ContainerProxy._newDeltaByMethod(r,o);var s=this.addOperation(u,i);return s instanceof e.ContainerProxy?s:this}},processProxyArguments:{value:function x(){throw new Error("A 'ContainerProxy' subclass needs to implement the 'processProxyArguments' method.")}},addOperation:{value:function _(){throw new Error("A 'ContainerProxy' subclass needs to implement the 'addOperation' method.")}}},{_newDeltaByMethod:{value:function P(r,t){var n=e.ContainerProxy._methodHandlers[r].map(function(e){
return e.apply(undefined,a(t))});if(n.length===1){return n[0]}else{y(e);return new e.Delta.Overloaded(n)}}},newProxyMethod:{value:function O(r,t){if(d(e.ContainerProxy.prototype[r])){e.ContainerProxy.prototype[r]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}return this._do(r,t)}}v(e.ContainerProxy,"_methodHandlers",r).push(t)}}});return t}(e.Proxy)})},,,function(e,r,t){"use strict";var n=function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){var t=[];for(var n=e[Symbol.iterator](),a;!(a=n.next()).done;){t.push(a.value);if(r&&t.length===r)break}return t}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var a=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else{return Array.from(e)}};var i=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var o=function(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof r)}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(r)e.__proto__=r};var u=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.configurable=true;if(n.value)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var s=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var f=function(){function e(){s(this,e);this._vertices=new Map;this._edges=new Map;this._reverseEdges=new Map;this._vertexCount=0;this._edgeCount=0}u(e,[{key:"addNewVertex",value:function r(t,n){if(this.hasVertex(t)){throw new e.VertexExistsError(t,this._vertices.get(t))}this._vertices.set(t,n);this._edges.set(t,new Map);this._reverseEdges.set(t,new Set);this._vertexCount+=1}},{key:"setVertex",value:function t(r,n){if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}this._vertices.set(r,n)}},{key:"ensureVertex",value:function a(e,r){if(!this.hasVertex(e)){this.addNewVertex(e,r)}}},{key:"addVertex",value:function i(e,r){if(this.hasVertex(e)){this.setVertex(e,r)}else{this.addNewVertex(e,r)}}},{key:"removeExistingVertex",value:function o(r){if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}if(this._edges.get(r).size>0||this._reverseEdges.get(r).size>0){throw new e.HasConnectedEdgesError(r)}this._vertices["delete"](r);this._vertexCount-=1}},{key:"destroyExistingVertex",value:function f(r){if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}var t=true;var a=false;var i=undefined;try{for(var o=this.verticesFrom(r)[Symbol.iterator](),u;!(t=(u=o.next()).done);t=true){var s=n(u.value,1);var f=s[0];this.removeEdge(r,f)}}catch(l){a=true;i=l}finally{try{if(!t&&o["return"]){o["return"]()}}finally{if(a){throw i}}}var c=true;var v=false;var d=undefined;try{for(var p=this.verticesTo(r)[Symbol.iterator](),h;!(c=(h=p.next()).done);c=true){var y=n(h.value,1);var g=y[0];this.removeEdge(g,r)}}catch(l){v=true;d=l}finally{try{if(!c&&p["return"]){p["return"]()}}finally{if(v){throw d}}}this.removeExistingVertex(r)}},{key:"removeVertex",value:function l(e){if(this.hasVertex(e)){this.removeExistingVertex(e)}}},{key:"destroyVertex",value:function c(e){if(this.hasVertex(e)){this.destroyExistingVertex(e)}}},{key:"vertexCount",value:function v(){return this._vertexCount}},{key:"hasVertex",value:function d(e){return this._vertices.has(e)}},{key:"vertexValue",value:function p(e){return this._vertices.get(e)}},{key:"addNewEdge",value:function h(r,t,n){if(this.hasEdge(r,t)){throw new e.EdgeExistsError(r,t,this.edgeValue(r,t))}if(!this.hasVertex(r)){if(this.hasVertex(t)){throw new e.VertexNotExistsError(r)}else{throw new e.VertexNotExistsError(r).v(t)}}else if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}this._edges.get(r).set(t,n);this._reverseEdges.get(t).add(r);this._edgeCount+=1}},{key:"createNewEdge",value:function y(r,t,n){if(this.hasEdge(r,t)){throw new e.EdgeExistsError(r,t,this.edgeValue(r,t))}this.ensureVertex(r);this.ensureVertex(t);this.addNewEdge(r,t,n)}},{key:"setEdge",value:function g(r,t,n){if(!this.hasEdge(r,t)){throw new e.EdgeNotExistsError(r,t)}this._edges.get(r).set(t,n)}},{key:"spanEdge",value:function m(r,t,n){if(!this.hasVertex(r)){if(this.hasVertex(t)){throw new e.VertexNotExistsError(r)}else{throw new e.VertexNotExistsError(r).v(t)}}else if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}if(!this.hasEdge(r,t)){this.addNewEdge(r,t,n)}}},{key:"addEdge",value:function w(e,r,t){if(this.hasEdge(e,r)){this.setEdge(e,r,t)}else{this.addNewEdge(e,r,t)}}},{key:"ensureEdge",value:function b(e,r,t){if(!this.hasEdge(e,r)){this.createNewEdge(e,r,t)}}},{key:"createEdge",value:function x(e,r,t){if(this.hasEdge(e,r)){this.setEdge(e,r,t)}else{this.createNewEdge(e,r,t)}}},{key:"removeExistingEdge",value:function _(r,t){if(!this.hasEdge(r,t)){throw new e.EdgeNotExistsError(r,t)}this._edges.get(r)["delete"](t);this._reverseEdges.get(t)["delete"](r);this._edgeCount-=1}},{key:"removeEdge",value:function P(e,r){if(this.hasEdge(e,r)){this.removeExistingEdge(e,r)}}},{key:"edgeCount",value:function O(){return this._edgeCount}},{key:"hasEdge",value:function E(e,r){return this.hasVertex(e)&&this.hasVertex(r)&&this._edges.has(e)&&this._edges.get(e).has(r)}},{key:"edgeValue",value:function C(e,r){return this.hasEdge(e,r)?this._edges.get(e).get(r):undefined}},{key:"vertices",value:regeneratorRuntime.mark(function A(){var e=this;var r,t,a,i,o,u,s,f,l;return regeneratorRuntime.wrap(function c(v){while(1)switch(v.prev=v.next){case 0:r=new Set;t=true;a=false;i=undefined;v.prev=4;o=e._vertices[Symbol.iterator]();case 6:if(t=(u=o.next()).done){v.next=17;break}s=n(u.value,2);f=s[0];l=s[1];if(!(e.hasVertex(f)&&!r.has(f))){v.next=14;break}r.add(f);v.next=14;return[f,l];case 14:t=true;v.next=6;break;case 17:v.next=23;break;case 19:v.prev=19;v.t0=v["catch"](4);a=true;i=v.t0;case 23:v.prev=23;v.prev=24;if(!t&&o["return"]){o["return"]()}case 26:v.prev=26;if(!a){v.next=29;break}throw i;case 29:return v.finish(26);case 30:return v.finish(23);case 31:case"end":return v.stop()}},A,this,[[4,19,23,31],[24,,26,30]])})},{key:Symbol.iterator,value:function(){return this.vertices()}},{key:"edges",value:regeneratorRuntime.mark(function k(){var e=this;var r,t,n,a,i,o,u,s,f,l,c,v,d;return regeneratorRuntime.wrap(function p(h){while(1)switch(h.prev=h.next){case 0:r=new Map;t=true;n=false;a=undefined;h.prev=4;i=e._edges.keys()[Symbol.iterator]();case 6:if(t=(o=i.next()).done){h.next=40;break}u=o.value;if(!r.has(u)){r.set(u,new Set)}s=true;f=false;l=undefined;h.prev=12;c=e._edges.get(u).keys()[Symbol.iterator]();case 14:if(s=(v=c.next()).done){h.next=23;break}d=v.value;if(!(e.hasEdge(u,d)&&!r.get(u).has(d))){h.next=20;break}r.get(u).add(d);h.next=20;return[u,d,e._edges.get(u).get(d)];case 20:s=true;h.next=14;break;case 23:h.next=29;break;case 25:h.prev=25;h.t1=h["catch"](12);f=true;l=h.t1;case 29:h.prev=29;h.prev=30;if(!s&&c["return"]){c["return"]()}case 32:h.prev=32;if(!f){h.next=35;break}throw l;case 35:return h.finish(32);case 36:return h.finish(29);case 37:t=true;h.next=6;break;case 40:h.next=46;break;case 42:h.prev=42;h.t2=h["catch"](4);n=true;a=h.t2;case 46:h.prev=46;h.prev=47;if(!t&&i["return"]){i["return"]()}case 49:h.prev=49;if(!n){h.next=52;break}throw a;case 52:return h.finish(49);case 53:return h.finish(46);case 54:case"end":return h.stop()}},k,this,[[4,42,46,54],[12,25,29,37],[30,,32,36],[47,,49,53]])})},{key:"verticesFrom",value:function D(r){if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}return this._verticesFrom(r)}},{key:"_verticesFrom",value:regeneratorRuntime.mark(function S(e){var r=this;var t,n,a,i,o,u,s;return regeneratorRuntime.wrap(function f(l){while(1)switch(l.prev=l.next){case 0:t=new Set;n=true;a=false;i=undefined;l.prev=4;o=r._edges.get(e).keys()[Symbol.iterator]();case 6:if(n=(u=o.next()).done){l.next=15;break}s=u.value;if(!(r.hasEdge(e,s)&&!t.has(s))){l.next=12;break}t.add(s);l.next=12;return[s,r._vertices.get(s),r._edges.get(e).get(s)];case 12:n=true;l.next=6;break;case 15:l.next=21;break;case 17:l.prev=17;l.t3=l["catch"](4);a=true;i=l.t3;case 21:l.prev=21;l.prev=22;if(!n&&o["return"]){o["return"]()}case 24:l.prev=24;if(!a){l.next=27;break}throw i;case 27:return l.finish(24);case 28:return l.finish(21);case 29:case"end":return l.stop()}},S,this,[[4,17,21,29],[22,,24,28]])})},{key:"verticesTo",value:function T(r){if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}return this._verticesTo(r)}},{key:"_verticesTo",value:regeneratorRuntime.mark(function j(e){var r=this;var t,n,a,i,o,u,s;return regeneratorRuntime.wrap(function f(l){while(1)switch(l.prev=l.next){case 0:t=new Set;n=true;a=false;i=undefined;l.prev=4;o=r._reverseEdges.get(e)[Symbol.iterator]();case 6:if(n=(u=o.next()).done){l.next=15;break}s=u.value;if(!(r.hasEdge(s,e)&&!t.has(s))){l.next=12;break}t.add(s);l.next=12;return[s,r._vertices.get(s),r._edges.get(s).get(e)];case 12:n=true;l.next=6;break;case 15:l.next=21;break;case 17:l.prev=17;l.t4=l["catch"](4);a=true;i=l.t4;case 21:l.prev=21;l.prev=22;if(!n&&o["return"]){o["return"]()}case 24:l.prev=24;if(!a){l.next=27;break}throw i;case 27:return l.finish(24);case 28:return l.finish(21);case 29:case"end":return l.stop()}},j,this,[[4,17,21,29],[22,,24,28]])})},{key:"verticesWithPathFrom",value:function M(r){if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}return this._verticesWithPathFrom(r,new Set)}},{key:"_verticesWithPathFrom",value:regeneratorRuntime.mark(function F(e,r){var t=this;var n,a,i,o,u,s;return regeneratorRuntime.wrap(function f(l){while(1)switch(l.prev=l.next){case 0:n=true;a=false;i=undefined;l.prev=3;o=t._edges.get(e).keys()[Symbol.iterator]();case 5:if(n=(u=o.next()).done){l.next=15;break}s=u.value;if(!(t.hasEdge(e,s)&&!r.has(s))){l.next=12;break}r.add(s);l.next=11;return[s,t._vertices.get(s)];case 11:return l.delegateYield(t._verticesWithPathFrom(s,r),"t5",12);case 12:n=true;l.next=5;break;case 15:l.next=21;break;case 17:l.prev=17;l.t6=l["catch"](3);a=true;i=l.t6;case 21:l.prev=21;l.prev=22;if(!n&&o["return"]){o["return"]()}case 24:l.prev=24;if(!a){l.next=27;break}throw i;case 27:return l.finish(24);case 28:return l.finish(21);case 29:case"end":return l.stop()}},F,this,[[3,17,21,29],[22,,24,28]])})},{key:"verticesWithPathTo",value:function R(r){if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}return this._verticesWithPathTo(r,new Set)}},{key:"_verticesWithPathTo",value:regeneratorRuntime.mark(function V(e,r){var t=this;var n,a,i,o,u,s;return regeneratorRuntime.wrap(function f(l){while(1)switch(l.prev=l.next){case 0:n=true;a=false;i=undefined;l.prev=3;o=t._reverseEdges.get(e)[Symbol.iterator]();case 5:if(n=(u=o.next()).done){l.next=15;break}s=u.value;if(!(t.hasEdge(s,e)&&!r.has(s))){l.next=12;break}r.add(s);l.next=11;return[s,t._vertices.get(s)];case 11:return l.delegateYield(t._verticesWithPathTo(s,r),"t7",12);case 12:n=true;l.next=5;break;case 15:l.next=21;break;case 17:l.prev=17;l.t8=l["catch"](3);a=true;i=l.t8;case 21:l.prev=21;l.prev=22;if(!n&&o["return"]){o["return"]()}case 24:l.prev=24;if(!a){l.next=27;break}throw i;case 27:return l.finish(24);case 28:return l.finish(21);case 29:case"end":return l.stop()}},V,this,[[3,17,21,29],[22,,24,28]])})},{key:"vertices_topologically",value:regeneratorRuntime.mark(function I(){var r=this;var t=regeneratorRuntime.mark(function p(r){var t,u,s,f,l,c,v,d,h;return regeneratorRuntime.wrap(function y(g){while(1)switch(g.prev=g.next){case 0:a.push(r);t=a.indexOf(r);if(!(t!==a.length-1)){g.next=5;break}u=a.slice(t+1).reverse();throw new e.CycleError(u);case 5:if(i.has(r)){g.next=36;break}s=true;f=false;l=undefined;g.prev=9;c=o.verticesTo(r)[Symbol.iterator]();case 11:if(s=(v=c.next()).done){g.next=18;break}d=n(v.value,1);h=d[0];return g.delegateYield(p(h),"t9",15);case 15:s=true;g.next=11;break;case 18:g.next=24;break;case 20:g.prev=20;g.t10=g["catch"](9);f=true;l=g.t10;case 24:g.prev=24;g.prev=25;if(!s&&c["return"]){c["return"]()}case 27:g.prev=27;if(!f){g.next=30;break}throw l;case 30:return g.finish(27);case 31:return g.finish(24);case 32:if(!o.hasVertex(r)){g.next=35;break}g.next=35;return[r,o._vertices.get(r)];case 35:i.add(r);case 36:a.pop();case 37:case"end":return g.stop()}},p,this,[[9,20,24,32],[25,,27,31]])});var a,i,o,u,s,f,l,c,v,d;return regeneratorRuntime.wrap(function h(e){while(1)switch(e.prev=e.next){case 0:a=[];i=new Set;o=r;u=true;s=false;f=undefined;e.prev=6;l=r.vertices()[Symbol.iterator]();case 8:if(u=(c=l.next()).done){e.next=16;break}v=n(c.value,1);d=v[0];if(i.has(d)){e.next=13;break}return e.delegateYield(t(d),"t11",13);case 13:u=true;e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18;e.t12=e["catch"](6);s=true;f=e.t12;case 22:e.prev=22;e.prev=23;if(!u&&l["return"]){l["return"]()}case 25:e.prev=25;if(!s){e.next=28;break}throw f;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}},I,this,[[6,18,22,30],[23,,25,29]])})},{key:"clearEdges",value:function N(){var e=true;var r=false;var t=undefined;try{for(var a=this.edges()[Symbol.iterator](),i;!(e=(i=a.next()).done);e=true){var o=n(i.value,2);var u=o[0];var s=o[1];this.removeEdge(u,s)}}catch(f){r=true;t=f}finally{try{if(!e&&a["return"]){a["return"]()}}finally{if(r){throw t}}}}},{key:"clear",value:function U(){var e=true;var r=false;var t=undefined;try{for(var a=this.vertices()[Symbol.iterator](),i;!(e=(i=a.next()).done);e=true){var o=n(i.value,1);var u=o[0];this.destroyVertex(u)}}catch(s){r=true;t=s}finally{try{if(!e&&a["return"]){a["return"]()}}finally{if(r){throw t}}}}},{key:"equals",value:function q(){var r=arguments[0]===undefined?undefined:arguments[0];var t=arguments[1]===undefined?function(e,r,t,n){return e===r}:arguments[1];if(!(r instanceof e)){return false}if(this.vertexCount()!==r.vertexCount()){return false}if(this.edgeCount()!==r.edgeCount()){return false}var a=true;var i=false;var o=undefined;try{for(var u=this.vertices()[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var f=n(s.value,2);var l=f[0];var c=f[1];if(!r.hasVertex(l)){return false}if(!t(c,r.vertexValue(l),l)){return false}}}catch(v){i=true;o=v}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}var d=true;var p=false;var h=undefined;try{for(var y=this.edges()[Symbol.iterator](),g;!(d=(g=y.next()).done);d=true){var m=n(g.value,3);var w=m[0];var b=m[1];var c=m[2];if(!r.hasEdge(w,b)){return false}if(!t(c,r.edgeValue(w,b),w,b)){return false}}}catch(v){p=true;h=v}finally{try{if(!d&&y["return"]){y["return"]()}}finally{if(p){throw h}}}return true}},{key:"hasCycle",value:function W(){var e=this;var r=new Set;var t=new Set;var a=function(i){if(r.has(i)){return true}if(t.has(i)){return false}t.add(i);r.add(i);var o=true;var u=false;var s=undefined;try{for(var f=e.verticesFrom(i)[Symbol.iterator](),l;!(o=(l=f.next()).done);o=true){var c=n(l.value,1);var v=c[0];if(a(v)){return true}}}catch(d){u=true;s=d}finally{try{if(!o&&f["return"]){f["return"]()}}finally{if(u){throw s}}}r["delete"](i)};var i=true;var o=false;var u=undefined;try{for(var s=this.vertices()[Symbol.iterator](),f;!(i=(f=s.next()).done);i=true){var l=n(f.value,1);var c=l[0];if(a(c)){return true}}}catch(v){o=true;u=v}finally{try{if(!i&&s["return"]){s["return"]()}}finally{if(o){throw u}}}return false}},{key:"hasPath",value:function z(e,r){var t=this;if(!this.hasVertex(e)||!this.hasVertex(r)){return false}var a=new Set;var i=function(e){if(t.hasEdge(e,r)){return true}a.add(e);var o=true;var u=false;var s=undefined;try{for(var f=t.verticesFrom(e)[Symbol.iterator](),l;!(o=(l=f.next()).done);o=true){var c=n(l.value,1);var v=c[0];if(!a.has(v)&&i(v)){return true}}}catch(d){u=true;s=d}finally{try{if(!o&&f["return"]){f["return"]()}}finally{if(u){throw s}}}a["delete"](e);return false};return i(e)}},{key:"clone",value:function H(){var r=arguments[0]===undefined?function(e){return e}:arguments[0];var t=new e;var a=true;var i=false;var o=undefined;try{for(var u=this.vertices()[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var f=n(s.value,2);var l=f[0];var c=f[1];t.addVertex(l,r(c,l))}}catch(v){i=true;o=v}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}var d=true;var p=false;var h=undefined;try{for(var y=this.edges()[Symbol.iterator](),g;!(d=(g=y.next()).done);d=true){var m=n(g.value,3);var w=m[0];var b=m[1];var c=m[2];t.addEdge(w,b,r(c,w,b))}}catch(v){p=true;h=v}finally{try{if(!d&&y["return"]){y["return"]()}}finally{if(p){throw h}}}return t}},{key:"transitiveReduction",value:function J(){var e=arguments[0]===undefined?function(e){return e}:arguments[0];var r=this.clone(e);var t=true;var a=false;var i=undefined;try{for(var o=this.vertices()[Symbol.iterator](),u;!(t=(u=o.next()).done);t=true){var s=n(u.value,1);var f=s[0];var l=true;var c=false;var v=undefined;try{for(var d=this.vertices()[Symbol.iterator](),p;!(l=(p=d.next()).done);l=true){var h=n(p.value,1);var y=h[0];if(r.hasEdge(f,y)){var g=true;var m=false;var w=undefined;try{for(var b=this.vertices()[Symbol.iterator](),x;!(g=(x=b.next()).done);g=true){var _=n(x.value,1);var P=_[0];if(r.hasPath(y,P)){r.removeEdge(f,P)}}}catch(O){m=true;w=O}finally{try{if(!g&&b["return"]){b["return"]()}}finally{if(m){throw w}}}}}}catch(O){c=true;v=O}finally{try{if(!l&&d["return"]){d["return"]()}}finally{if(c){throw v}}}}}catch(O){a=true;i=O}finally{try{if(!t&&o["return"]){o["return"]()}}finally{if(a){throw i}}}return r}}]);return e}();e.exports=f;f.VertexExistsError=function(e){function r(e,t){s(this,r);this.vertices=new Set;this.v(e,t)}o(r,e);i(r,{v:{value:function t(e,r){this.vertices.add({key:e,value:r});this._refreshMessage();return this}},_refreshMessage:{value:function n(){var e=this.vertices.size===1?"a vertex":"vertices";this.message="This graph has "+e+" '"+[].concat(a(this.vertices)).map(function(e){return e.key}).join("', '")+"'"}}});return r}(Error);f.VertexNotExistsError=function(e){function r(e){s(this,r);this.vertices=new Set;this.v(e)}o(r,e);i(r,{v:{value:function t(e){this.vertices.add({key:e});this._refreshMessage();return this}},_refreshMessage:{value:function n(){var e=this.vertices.size===1?"a vertex":"vertices";this.message="This graph does not have "+e+" '"+[].concat(a(this.vertices)).map(function(e){return e.key}).join("', '")+"'"}}});return r}(Error);f.EdgeExistsError=function(e){function r(e,t,n){s(this,r);this.edges=new Set;this.e(e,t,n)}o(r,e);i(r,{e:{value:function t(e,r,n){this.edges.add({from:e,to:r,value:n});this._refreshMessage();return this}},_refreshMessage:{value:function n(){var e=[];var r=true;var t=false;var n=undefined;try{for(var a=this.edges[Symbol.iterator](),i;!(r=(i=a.next()).done);r=true){var o=i.value;var u=o.from;var s=o.to;e.push("('"+u+"', '"+s+"')")}}catch(f){t=true;n=f}finally{try{if(!r&&a["return"]){a["return"]()}}finally{if(t){throw n}}}var l=e.length===1?"an edge":"edges";this.message="This graph has "+l+" "+e.join(", ")}}});return r}(Error);f.EdgeNotExistsError=function(e){function r(e,t){s(this,r);this.edges=new Set;this.e(e,t)}o(r,e);i(r,{e:{value:function t(e,r){this.edges.add({from:e,to:r});this._refreshMessage();return this}},_refreshMessage:{value:function n(){var e=[];var r=true;var t=false;var n=undefined;try{for(var a=this.edges[Symbol.iterator](),i;!(r=(i=a.next()).done);r=true){var o=i.value;var u=o.from;var s=o.to;e.push("('"+u+"', '"+s+"')")}}catch(f){t=true;n=f}finally{try{if(!r&&a["return"]){a["return"]()}}finally{if(t){throw n}}}var l=e.length===1?"an edge":"edges";this.message="This graph does not have "+l+" "+e.join(", ")}}});return r}(Error);f.HasConnectedEdgesError=function(e){function r(e){s(this,r);this.key=e;this.message="The '"+e+"' vertex has connected edges"}o(r,e);return r}(Error);f.CycleError=function(e){function r(e){s(this,r);this.cycle=e;this.message="This graph contains a cycle: "+e}o(r,e);return r}(Error)},function(e,r,t){"use strict";var n=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else{return Array.from(e)}};var a=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var i=function d(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r);if(n===undefined){var a=Object.getPrototypeOf(e);if(a===null){return undefined}else{return d(a,r,t)}}else if("value"in n&&n.writable){return n.value}else{var i=n.get;if(i===undefined){return undefined}return i.call(t)}};var o=function(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof r)}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(r)e.__proto__=r};var u=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var s=t(4);var f=s.indent;var l=s.oncePer;var c=s.arraysEqual;var v=s.t;e.exports=l("Composed",function(e){e.newOperationType("Composed",function(r){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}u(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r);this._components=this.arg||[];this.options=r[1]||{}}o(t,r);a(t,{clone:{value:function s(){var e=i(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e._components=this._components.map(function(e){return e.clone()});return e}},applyTo:{value:function l(e){var r=arguments[1]===undefined?{}:arguments[1];var t=true;var n=false;var a=undefined;try{for(var i=this._components[Symbol.iterator](),o;!(t=(o=i.next()).done);t=true){var u=o.value;u.applyTo(e,r)}}catch(s){n=true;a=s}finally{try{if(!t&&i["return"]){i["return"]()}}finally{if(n){throw a}}}}},toString:{value:function c(){var e=arguments[0]===undefined?{}:arguments[0];var r=i(Object.getPrototypeOf(t.prototype),"toString",this).call(this,e);if(this._components.length>0){var n="";var a=true;var o=false;var u=undefined;try{for(var s=this._components[Symbol.iterator](),l;!(a=(l=s.next()).done);a=true){var c=l.value;n+="• "+c.toString(e)+"\n"}}catch(v){o=true;u=v}finally{try{if(!a&&s["return"]){s["return"]()}}finally{if(o){throw u}}}r+="\n"+f(n,4)}return r}},precondition:{value:function v(e,r){if(this._components.length===0){return true}return this._components[0].precondition(e,r)}},_collapse:{value:function d(){var r=this;this._components=function(){var t=[];var a=true;var i=false;var o=undefined;try{for(var u=r._components[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var f=s.value;if(f instanceof e.Delta.Composed){f._collapse();t.push.apply(t,n(f._components))}else{t.push(f)}}}catch(l){i=true;o=l}finally{try{if(!a&&u["return"]){u["return"]()}}finally{if(i){throw o}}}return t}();var t=undefined;do{t=false;this._components=function(){var n=[];for(var a=0;a<r._components.length-1;a+=1){var i=r._components[a].composedWith(r._components[a+1],r.options);if(i instanceof e.Delta.Composed){n.push(r._components[a])}else{n.push(i);t=true;a+=1}}if(a===r._components.length-1){n.push(r._components[a])}return n}()}while(t)}},methods:{get:function(){return[]}}});return t}(e.Delta));e.newComposition(function(r,t){return r instanceof e.Delta.Composed||t instanceof e.Delta.Composed},function(r,t,a){var i=r instanceof e.Delta.Composed?r._components:[r];var o=t instanceof e.Delta.Composed?t._components:[t];var u=new e.Delta.Composed([].concat(n(i),n(o)),a);u._collapse();return u});e.newEquality(v("Composed","Composed"),function(e,r){return c(e._components,r._components,function(e,r){return e.equals(r)})})})},function(e,r,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e};var a=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=true;if(n.value)n.writable=true}Object.defineProperties(e,r)}return function(r,t,n){if(t)e(r.prototype,t);if(n)e(r,n);return r}}();var i=function(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}};var o=n(t(22));var u=t(4);var s=u.extend;var f=u.oncePer;var l=n(t(9));e.exports=f("Proxy",function(e){l(e);e.Proxy=function(){function e(){var r=arguments[0]===undefined?{}:arguments[0];var t=r.parent;var n=r.delta;i(this,e);this._parent=t;this._active=true;this._delta=n}a(e,{delta:{value:function r(){return this._delta}},active:{get:function(){return this._active}},deactivate:{value:function t(){this._active=false}}});return e}();s(e.Delta.prototype,{"do":function r(){var e;for(var r=arguments.length,t=Array(r),n=0;n<r;n++){t[n]=arguments[n]}var a=this.constructor.Proxy;if(!a){throw new Error("Calling 'do' on delta type '"+this.type+"', which has no Proxy interface.")}return(e=new a({delta:this}))["do"].apply(e,t)}})})}])});
//# sourceMappingURL=dist/delta.min.js.map